/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x390c=['schema','merge','resolve','userId','restoreRevision','data','item','sort','execute','isAttached','isRemoved','pluginName','plugins','createUIElement','_refreshStartEndIndex','indexOf','writer','revision:','change','highest','currentChangeNumber','findIndex','split','processor','index','text','isAddSuggestion','addMarker:revision','commands','getWalker','collaboration.channelId','change:isReady','RevisionsRepository','_cleanMarkers','suggestion:','markerRange','refresh','showNextChange','ck-revision-history-root--active','set','elementToAttribute','target','addMarker:revision-suggestion:insertion','activeView','createAttributeElement','deletions','attributesBefore','_joinTapes','insertions','getItems','reconvertMarker','add','vid_start','listenTo','isContent','string','adapter','POSITIVE_INFINITY','bindElementToMarker','nodeAfter','isRemoveSuggestion','upcast','markerToData','_step','attributes','start','toViewRange','_changeIdToChange','_getViewObj','map','getAttribute','change:isEnabled','_getViewForChange','ck-suggestion-marker-','nextPosition','getRootNames','children','mapper','elementEnd','_cleanUp','enqueueChange','detachRoot','ck-suggestion-marker-merge','setAttribute','downcastDispatcher','pop','uiElement','isAtStart','markersEnd','_processTape','loadRevisionData','isAfter','diffData','addClass','removeMarker','updatePosition','for','createPositionBefore','revision','find','revisionHistoryLabel','pairId','vid','_getChangeFromId','rootName','locale','_removeRevisionMarkers','dataToMarker','getRoot','_initInteractions','_balloon','WidgetToolbarRepository','getClientRects','right','deletion','push','numberOfChanges','markerNameToElements','isEqual','ck-suggestion-marker--active','markersStart','_appendChild','get','data-change-id','getAttributes','getRevisionRootsAttributes','removeMarker:revision-suggestion','_markMismatchedRemovedTags','createPositionFromPath','hasAttribute','isAtEnd','observeMarkers','_findChangeIdFromDomTarget','top','_activeViewTarget','toModel','_threeWayMerge','remove','delete','createRange','createRevision','revision-suggestion','readOnlyMode','forceDisabled','markerToHighlight','getIndex','markerName','removeAttribute','addRevision','editing','isInline','ck-revision-history-root-','diff','_markMarkers','ck-suggestion-preview-marker','abs','useFillerType','hasClass','stopListening','selection','config','createRangeIn','isObject','has','catch','editor','offsetSize','restoreRevisionCallback','softBreak','change:activeChange','ck-suggestion-marker-split','marked','low','span','RevisionViewer','-new','insert','editingDowncast','isCollapsed','_update','elementStart','isReady','document','element','_changeView','parent','keys','distance','next','model','isAdded','isIncorrect','viewItem','change:isReadOnly','revisionHistoryAttachChange','changes','requires','clear','domConverter','_setDistance','isBlock','high','bind','isLimit','previousPosition','compare','test','attachChange','_getDiff','slice','isSuggestion','toViewPosition','dataDowncast','name','startIndex','_data','_fixObsoleteTags','_makeTape','data-revision-','endIndex','getCustomProperty','mapViewToDom','getRevision','checkAttribute','isBefore','_revisions','forward','getDomRoot','attributesAfter','mousedown','unshift','length','newRevisionId','_removeMissingPairs','changeId','end','activeChange','domEvent','getRevisionData','removeClass','includes','concat','level','_markSuggestions','_makeModelFromViewString','conversion','from','type','_markInsertions','filter','isEnabled','parse','repository','startsWith','vid_end','_getRevisionsRange','_sortAndFilterDiffChanges','consumable','revision-suggestion:','consume','view','mouseover','unbindElementFromMarkerName','then','splice','ck-editor__editable__overlay','forEach','toData','all','_makeModelFromTape','_removeUnsupportedChanges','side','clearForceDisabled','revision-end','revision-start','nextSibling','modelRange','error','wrap','init','comment','ck-suggestion-preview-marker-','isNavigationMode','maxOffset','_setConversion','getChild','addHighlight','isOnRoot','markers','shift','insertion','toViewElement','values'];(function(_0x170e5d,_0x390c42){const _0x327408=function(_0x75bc26){while(--_0x75bc26){_0x170e5d['push'](_0x170e5d['shift']());}};_0x327408(++_0x390c42);}(_0x390c,0xc4));const _0x3274=function(_0x170e5d,_0x390c42){_0x170e5d=_0x170e5d-0x0;let _0x327408=_0x390c[_0x170e5d];return _0x327408;};import{Plugin as _0x372754,Command as _0x417964}from'ckeditor5/src/core';import{scrollViewportToShowTarget as _0x1d4656}from'ckeditor5/src/utils';import{ContextualBalloon as _0x4486c4}from'ckeditor5/src/ui';import{DocumentFragment as _0x4005fc,Element as _0x180c2e,Text as _0x3728ac,ViewDocumentFragment as _0x497830,ViewText as _0x26e468,ViewElement as _0x9acf,ViewContainerElement as _0x43f85c,ViewAttributeElement as _0x26e8b9,ViewEmptyElement as _0x582c72,ViewRawElement as _0x20dcd5,ViewUIElement as _0x39a910}from'ckeditor5/src/engine';import{Users as _0x3618c5,getMarkerDomElement as _0x917108}from'ckeditor5-collaboration/src/collaboration-core';import _0x178cd4 from'./ui/revisionviewer/changedetailsview';import _0xa29013 from'./revisionsrepository';import _0x2e882f from'./changeitem';import{default as _0xd276b1}from'./revisiondiff';import'../theme/revisionviewer.css';import{cloneDeep as _0x967fb5}from'lodash-es';const X={'c':_0x43f85c,'a':_0x26e8b9,'e':_0x582c72,'r':_0x20dcd5,'u':_0x39a910};export default class w extends _0x372754{static get[_0x3274('0x6c')](){return _0x3274('0x10f');}static get[_0x3274('0x0')](){return[_0x3618c5,_0x4486c4,_0xa29013];}constructor(_0x3e04af){super(_0x3e04af),this['repository']=this[_0x3274('0x106')][_0x3274('0x6d')][_0x3274('0xdb')](_0x3274('0x81')),this[_0x3274('0x88')](_0x3274('0x28'),null),this[_0x3274('0x88')](_0x3274('0x8c'),null),this['_activeViewTarget']=null,this['set']('diff',null),this['set']('isReady',!0x1),this[_0x3274('0x88')](_0x3274('0x36'),!0x0),this['on'](_0x3274('0xa8'),(_0xf2c990,_0x58175f,_0x3160cc)=>{this[_0x3274('0x28')]=null,this['activeView']=null,this[_0x3274('0x106')][_0x3274('0xf6')]['view'][_0x3274('0x73')](_0x39da3c=>{for(const _0xe8404c of this[_0x3274('0x106')][_0x3274('0xf6')][_0x3274('0x40')][_0x3274('0x117')]['roots'])_0x3160cc?_0x39da3c['removeClass'](_0x3274('0x45'),_0xe8404c):_0x39da3c[_0x3274('0xbe')](_0x3274('0x45'),_0xe8404c);});}),this[_0x3274('0x6')](_0x3274('0x56'))['to'](this,'activeChange',_0x331c61=>null!==_0x331c61),this[_0x3274('0x6')](_0x3274('0x75'))['to'](this,_0x3274('0x116'),this,_0x3274('0xf9'),this,_0x3274('0x28'),(_0x5749fb,_0x3342aa,_0x52b9de)=>_0x5749fb&&_0x52b9de?_0x3342aa['changes'][_0x3274('0xf2')](_0x52b9de):0x0),this[_0x3274('0x6')](_0x3274('0xd5'))['to'](this,_0x3274('0x116'),this,_0x3274('0xf9'),(_0x50495a,_0x1b5175)=>_0x50495a?_0x1b5175[_0x3274('0x124')][_0x3274('0x23')]:0x0),this[_0x3274('0x119')]=null,this[_0x3274('0xa4')]=new Map(),this[_0x3274('0x99')]=null,this[_0x3274('0xcf')]=this['editor'][_0x3274('0x6d')][_0x3274('0xdb')](_0x4486c4);}[_0x3274('0x53')](){const _0x773d7f=this['editor'],_0x3d2e09=new ShowChangeCommand(_0x773d7f,{'direction':'backward'}),_0x5b7caa=new ShowChangeCommand(_0x773d7f,{'direction':_0x3274('0x1e')});(_0x773d7f[_0x3274('0x7d')]['add']('showPreviousChange',_0x3d2e09),_0x773d7f[_0x3274('0x7d')][_0x3274('0x94')](_0x3274('0x86'),_0x5b7caa),_0x773d7f[_0x3274('0x7d')][_0x3274('0x94')](_0x3274('0x65'),new RestoreRevisionCommand(_0x773d7f)),this['on']('change:numberOfChanges',()=>{_0x3d2e09[_0x3274('0x85')](),_0x5b7caa[_0x3274('0x85')]();}),this[_0x3274('0x58')](),this[_0x3274('0xce')](),_0x773d7f['enableReadOnlyMode']('revision-viewer'),_0x773d7f[_0x3274('0x6d')][_0x3274('0x104')](_0x3274('0xd0')))&&_0x773d7f[_0x3274('0x6d')]['get'](_0x3274('0xd0'))[_0x3274('0xf0')]('revision-viewer');}async[_0x3274('0x2a')](_0x7cff6){await this['loadRevisionData'](_0x7cff6);const _0x1f4a3b={};for(const _0x30a413 in _0x7cff6[_0x3274('0xbd')]){if(_0x7cff6[_0x3274('0xbd')][_0x30a413]['attachChange']&&!_0x7cff6[_0x3274('0xbd')][_0x30a413][_0x3274('0xb')][_0x3274('0x6a')])continue;const _0xbb28ee=this[_0x3274('0xcb')](JSON['parse'](_0x7cff6[_0x3274('0xbd')][_0x30a413][_0x3274('0x91')])),_0x556a6c=this['editor'][_0x3274('0xf6')][_0x3274('0x40')][_0x3274('0x117')],_0x2b618e=new _0x497830(_0x556a6c,_0xbb28ee[_0x3274('0xa6')](_0xe52dca=>this[_0x3274('0xa5')](_0xe52dca)));this[_0x3274('0x106')][_0x3274('0x66')][_0x3274('0x78')]['useFillerType'](_0x3274('0x10c')),_0x1f4a3b[_0x30a413]=this[_0x3274('0x106')][_0x3274('0x66')][_0x3274('0x78')][_0x3274('0x47')](_0x2b618e),this[_0x3274('0x106')][_0x3274('0x66')]['processor'][_0x3274('0xfd')]('default');}return _0x1f4a3b;}async[_0x3274('0xde')](_0x396be6){await this[_0x3274('0xbb')](_0x396be6);const _0x392622={};for(const _0xc52484 in _0x396be6[_0x3274('0xbd')])_0x396be6[_0x3274('0xbd')][_0xc52484][_0x3274('0xb')]&&!_0x396be6[_0x3274('0xbd')][_0xc52484]['attachChange'][_0x3274('0x6a')]||(_0x392622[_0xc52484]=_0x396be6[_0x3274('0xbd')][_0xc52484]['attributesAfter']);return _0x392622;}[_0x3274('0xcb')](_0xb38dad){return(_0xb38dad=_0xb38dad[_0x3274('0x35')](_0x2354b6=>!_0x2354b6[_0x3274('0x11')]||_0x3274('0x4e')!==_0x2354b6[_0x3274('0x11')]&&_0x3274('0x4d')!==_0x2354b6[_0x3274('0x11')]))[_0x3274('0x46')](_0x104b68=>{_0x3274('0x98')!=typeof _0x104b68&&(_0x104b68[_0x3274('0xad')]=this[_0x3274('0xcb')](_0x104b68[_0x3274('0xad')]),_0x104b68[_0x3274('0xa1')]=_0x104b68['attributes'][_0x3274('0x35')](_0x2921c8=>!_0x2921c8[0x0][_0x3274('0x39')](_0x3274('0x16'))));}),_0xb38dad;}async[_0x3274('0x9')](_0x3a5073,_0x5aafa8,_0x2cf810=!0x1){if(!this[_0x3274('0x36')])return;const _0x3dff57=this['diff'],_0x138f57=this[_0x3274('0x38')],_0x42d2e6='string'==typeof _0x3a5073?_0x138f57[_0x3274('0x1a')](_0x3a5073):_0x3a5073,_0x1b9c1e=_0x3274('0x98')==typeof _0x5aafa8?_0x138f57[_0x3274('0x1a')](_0x5aafa8):_0x5aafa8,_0x466c08=_0x42d2e6['id'],_0x2bd2f7=_0x1b9c1e?_0x1b9c1e['id']:null;if(!_0x2cf810&&this[_0x3274('0xf9')]&&this[_0x3274('0xf9')][_0x3274('0x24')]===_0x466c08&&this[_0x3274('0xf9')]['oldRevisionId']===_0x2bd2f7)return Promise[_0x3274('0x63')]();this['isReady']=!0x1,this['activeView']=null,this[_0x3274('0x28')]=null,this[_0x3274('0xf9')]=new _0xd276b1(_0x466c08,_0x2bd2f7);const _0x2410c0=this[_0x3274('0x3b')](_0x42d2e6,_0x1b9c1e,!0x0)[_0x3274('0xa6')](_0x4a9003=>this[_0x3274('0xbb')](_0x4a9003));return _0x2410c0[_0x3274('0xd4')](new Promise(_0x35eb3b=>{setTimeout(_0x35eb3b,0x14);})),Promise[_0x3274('0x48')](_0x2410c0)['then'](()=>{if(!this[_0x3274('0x36')])return;this['_cleanUp']();const _0x3da65f=this[_0x3274('0xc')](_0x466c08,_0x2bd2f7);for(const _0x2253ce of _0x3da65f['changes'])this[_0x3274('0xa4')][_0x3274('0x88')](_0x2253ce['id'],_0x2253ce);this[_0x3274('0x106')][_0x3274('0x11e')][_0x3274('0xb1')]({'isUndoable':!0x1},_0x3b4870=>{for(const _0x1759be of this['editor'][_0x3274('0x11e')][_0x3274('0x117')][_0x3274('0xac')]())_0x3b4870['detachRoot'](_0x1759be);for(const _0x41a864 of Object[_0x3274('0x11b')](_0x3da65f[_0x3274('0x11e')])){const _0x291d6b=_0x3b4870['addRoot'](_0x41a864);for(const _0x128159 of Object[_0x3274('0x11b')](_0x3da65f['attributes'][_0x41a864]))_0x3b4870[_0x3274('0xb4')](_0x128159,_0x3da65f[_0x3274('0xa1')][_0x41a864][_0x128159],_0x291d6b);_0x3b4870[_0x3274('0x111')](_0x3da65f[_0x3274('0x11e')][_0x41a864],_0x291d6b,0x0);}}),this[_0x3274('0xf9')]['_setChanges'](this[_0x3274('0x3c')](_0x3da65f['changes'])),this['isReady']=!0x0;})[_0x3274('0x105')](_0x5ea9ab=>{console[_0x3274('0x51')](_0x5ea9ab),this[_0x3274('0xb0')](),_0x3dff57&&(this['diff']=_0x3dff57),this[_0x3274('0x116')]=!0x0;});}['addRevisionData'](_0x421c34,_0x10fa3e){const _0x2f607b=this[_0x3274('0x38')][_0x3274('0xed')](_0x421c34);return _0x2f607b['on'](_0x3274('0x114'),(_0x5d3956,_0x50a751,_0x415573)=>_0x10fa3e(_0x50a751,_0x415573,_0x2f607b)),this[_0x3274('0x38')][_0x3274('0xf5')](_0x2f607b),_0x2f607b;}['loadRevisionData'](_0x2c6e6f){if(!_0x2c6e6f||_0x2c6e6f[_0x3274('0xbd')])return Promise[_0x3274('0x63')]();{const _0x1ad786=this[_0x3274('0x106')][_0x3274('0x101')][_0x3274('0xdb')](_0x3274('0x7f'));return this[_0x3274('0x99')]['getRevision']({'channelId':_0x1ad786,'revisionId':_0x2c6e6f['id']})[_0x3274('0x43')](_0xd3fc9e=>{_0x2c6e6f[_0x3274('0x114')]({'diffData':_0xd3fc9e[_0x3274('0xbd')]},!0x0);});}}[_0x3274('0xb0')](){this[_0x3274('0x28')]=null,this[_0x3274('0x82')](),this['_changeView']&&this[_0x3274('0x119')]['destroy'](),this[_0x3274('0x119')]=null,this['_changeIdToChange'][_0x3274('0x1')](),this['editor']['model'][_0x3274('0xb1')]({'isUndoable':!0x1},_0x23c6ea=>{for(const _0x247d37 of this[_0x3274('0x106')][_0x3274('0x11e')]['document'][_0x3274('0xac')]())_0x23c6ea[_0x3274('0xb2')](_0x247d37);});}[_0x3274('0x3c')](_0x6171f7){const _0x21fe31=[],_0x52db9e=new Map();for(const _0x7e3c8a of this[_0x3274('0x106')][_0x3274('0x11e')][_0x3274('0x117')]['getRootNames']()){const _0x1e3615=this[_0x3274('0x106')]['editing']['view'][_0x3274('0x1f')](_0x7e3c8a);if(!_0x1e3615)continue;const _0x47b5ee=_0x1e3615[_0x3274('0xd1')]()[_0x3274('0x67')](0x0);_0x47b5ee&&(_0x21fe31[_0x3274('0xd4')](_0x7e3c8a),_0x52db9e[_0x3274('0x88')](_0x7e3c8a,_0x47b5ee));}return _0x21fe31[_0x3274('0x68')]((_0x2e615b,_0xa0b9d9)=>{const _0x44752c=_0x52db9e[_0x3274('0xdb')](_0x2e615b),_0x15c136=_0x52db9e[_0x3274('0xdb')](_0xa0b9d9);return _0x44752c['y']-_0x15c136['y']||_0x44752c['x']-_0x15c136['x'];}),(_0x6171f7=_0x6171f7[_0x3274('0x35')](_0x1904aa=>_0x21fe31['includes'](_0x1904aa['rootName'])))[_0x3274('0x68')]((_0x384761,_0xb24cc9)=>_0x21fe31[_0x3274('0x70')](_0x384761[_0x3274('0xc9')])-_0x21fe31[_0x3274('0x70')](_0xb24cc9[_0x3274('0xc9')])),_0x6171f7;}[_0x3274('0x15')](_0x1e45f1){const _0x279ed7=Array[_0x3274('0x32')](_0x1e45f1[_0x3274('0x5c')])[_0x3274('0x35')](([_0x4de27a,_0x25757d])=>_0x4de27a[_0x3274('0x39')]('revision:')&&!_0x25757d[_0x3274('0x113')]),_0x1bd740=Array[_0x3274('0x32')](this['editor'][_0x3274('0x11e')][_0x3274('0x102')](_0x1e45f1)[_0x3274('0x7e')]({'singleCharacters':!0x0}));if(0x0!=_0x279ed7[_0x3274('0x23')])for(const _0x3500e7 of _0x1bd740){const [_0x1cce7f,_0x451655]=_0x279ed7[0x0],[,_0x21d0f3,_0x2025a4]=_0x1cce7f[_0x3274('0x77')](':');if(_0x451655[_0x3274('0x27')][_0x3274('0xd7')](_0x3500e7[_0x3274('0xab')])&&_0x279ed7['shift'](),(_0x3500e7[_0x3274('0x8')][_0x3274('0xd7')](_0x451655[_0x3274('0xa2')])||_0x3500e7[_0x3274('0x8')][_0x3274('0xbc')](_0x451655['start']))&&(_0x3274('0x5e')==_0x21d0f3?_0x3500e7[_0x3274('0x11f')]={'userId':_0x2025a4}:_0x3274('0xd3')==_0x21d0f3&&(_0x3500e7[_0x3274('0x6b')]={'userId':_0x2025a4})),0x0==_0x279ed7[_0x3274('0x23')])break;}return _0x1bd740;}[_0x3274('0x6f')](_0xb6ee9c){const _0x367ba1=new Map();for(let _0x5d7e09=0x0;_0x5d7e09<_0xb6ee9c[_0x3274('0x23')];_0x5d7e09++)_0x3274('0x7a')===_0xb6ee9c[_0x5d7e09][_0x3274('0x33')]?(_0xb6ee9c[_0x5d7e09][_0x3274('0x67')][_0x3274('0x12')]=_0x5d7e09,_0xb6ee9c[_0x5d7e09][_0x3274('0x67')]['endIndex']=_0x5d7e09):(_0x3274('0x115')===_0xb6ee9c[_0x5d7e09]['type']?_0xb6ee9c[_0x5d7e09][_0x3274('0x67')][_0x3274('0x12')]=_0x5d7e09:'elementEnd'===_0xb6ee9c[_0x5d7e09][_0x3274('0x33')]&&(_0xb6ee9c[_0x5d7e09][_0x3274('0x67')][_0x3274('0x17')]=_0x5d7e09),_0x367ba1[_0x3274('0x88')](_0xb6ee9c[_0x5d7e09]['id'],_0x5d7e09));for(const _0x28fd84 of _0x367ba1[_0x3274('0x60')]())_0x3274('0x115')===_0xb6ee9c[_0x28fd84][_0x3274('0x33')]?_0xb6ee9c[_0x28fd84][_0x3274('0x67')][_0x3274('0x17')]=_0x367ba1['get'](_0xb6ee9c[_0x28fd84][_0x3274('0xc6')]):_0x3274('0xaf')===_0xb6ee9c[_0x28fd84][_0x3274('0x33')]&&(_0xb6ee9c[_0x28fd84][_0x3274('0x67')][_0x3274('0x12')]=_0x367ba1['get'](_0xb6ee9c[_0x28fd84]['pairId']));}['_processTape'](_0x1a289c){for(let _0x19ea9f=0x0;_0x19ea9f<_0x1a289c['length'];_0x19ea9f++){if(_0x3274('0x115')===_0x1a289c[_0x19ea9f][_0x3274('0x33')])_0x1a289c[_0x19ea9f][_0x3274('0x67')]['startIndex']=_0x19ea9f;else{if(_0x3274('0xaf')===_0x1a289c[_0x19ea9f][_0x3274('0x33')]){_0x1a289c[_0x19ea9f][_0x3274('0x67')][_0x3274('0x17')]=_0x19ea9f;const _0x1e64c6=_0x1a289c[_0x19ea9f][_0x3274('0x67')]['startIndex'];_0x1a289c[_0x1e64c6][_0x3274('0xc6')]=_0x1a289c[_0x19ea9f]['id'],_0x1a289c[_0x19ea9f][_0x3274('0xc6')]=_0x1a289c[_0x1e64c6]['id'];}else _0x1a289c[_0x19ea9f][_0x3274('0x67')][_0x3274('0x12')]=_0x19ea9f,_0x1a289c[_0x19ea9f][_0x3274('0x67')][_0x3274('0x17')]=_0x19ea9f,_0x1a289c[_0x19ea9f][_0x3274('0xc6')]=null;}_0x1a289c[_0x19ea9f][_0x3274('0xd9')]||(_0x1a289c[_0x19ea9f][_0x3274('0xd9')]=[],_0x1a289c[_0x19ea9f][_0x3274('0xb9')]=[]);}}[_0x3274('0x34')](_0x53ab5a,_0x295564){const _0x53de22=_0x53ab5a[_0x3274('0x35')](_0x345a1d=>!_0x345a1d[_0x3274('0x11f')]);for(let _0x7d1dc8=0x0;_0x7d1dc8<_0x295564[_0x3274('0x23')];_0x7d1dc8++)_0x295564[_0x7d1dc8][_0x3274('0x11f')]&&(_0x53de22[_0x7d1dc8][_0x3274('0x11f')]=_0x295564[_0x7d1dc8]['isAdded']);}[_0x3274('0x30')](_0x331510){const _0x18f442=JSON[_0x3274('0x37')](_0x331510),_0x5d2e62=this[_0x3274('0x106')]['editing'][_0x3274('0x40')][_0x3274('0x117')],_0x3be703=new _0x497830(_0x5d2e62,_0x18f442[_0x3274('0xa6')](_0x2f065c=>this[_0x3274('0xa5')](_0x2f065c)));return this[_0x3274('0x106')]['data'][_0x3274('0xe8')](_0x3be703);}[_0x3274('0xa5')](_0x37db40){const _0x7d7d24=this[_0x3274('0x106')][_0x3274('0xf6')][_0x3274('0x40')][_0x3274('0x117')];if('string'==typeof _0x37db40)return new _0x26e468(_0x7d7d24,_0x37db40);{const _0x51f822=_0x37db40[_0x3274('0xad')][_0x3274('0xa6')](_0x4d54cd=>this['_getViewObj'](_0x4d54cd));return new(X[_0x37db40[(_0x3274('0x33'))]]||_0x9acf)(_0x7d7d24,_0x37db40['name'],_0x37db40[_0x3274('0xa1')],_0x51f822);}}[_0x3274('0xc')](_0x322d0a,_0x5e83cc=null){const _0x5d7745=this[_0x3274('0x38')][_0x3274('0x1a')](_0x322d0a),_0x6adeb3=_0x5e83cc?this[_0x3274('0x38')][_0x3274('0x1a')](_0x5e83cc):null,_0x2acad1=this[_0x3274('0x3b')](_0x5d7745,_0x6adeb3),_0x13f0eb=_0x2acad1[_0x2acad1[_0x3274('0x23')]-0x1],_0x3adbe9=new Map(),_0x1faebe={'model':{},'attributes':{},'changes':[]},_0x198c65=new Set(),_0x7b9da2=new Map();for(let _0x2d59d9=_0x2acad1[_0x3274('0x23')]-0x1;_0x2d59d9>=0x0;_0x2d59d9--){const _0xc4e40=_0x2acad1[_0x2d59d9];for(const _0xb571b5 of Object[_0x3274('0x11b')](_0xc4e40[_0x3274('0xbd')]))if(_0xc4e40[_0x3274('0xbd')][_0xb571b5][_0x3274('0xb')]){const _0xfcf140=_0xc4e40['diffData'][_0xb571b5]['attachChange'];_0xfcf140['isAttached']?(_0x198c65[_0x3274('0x94')](_0xb571b5),_0x7b9da2[_0x3274('0x104')](_0xb571b5)&&_0x7b9da2['get'](_0xb571b5)[_0x3274('0x64')]==_0xfcf140[_0x3274('0x64')]?_0x7b9da2[_0x3274('0xeb')](_0xb571b5):_0x7b9da2[_0x3274('0x88')](_0xb571b5,_0xfcf140)):_0x7b9da2[_0x3274('0x104')](_0xb571b5)?(_0x198c65[_0x3274('0xeb')](_0xb571b5),_0x7b9da2[_0x3274('0xeb')](_0xb571b5)):(_0x198c65[_0x3274('0x94')](_0xb571b5),_0x7b9da2[_0x3274('0x88')](_0xb571b5,_0xfcf140));}else _0x198c65[_0x3274('0x94')](_0xb571b5);}for(const _0x57fcb6 of _0x198c65){const _0x5c6055=_0x7b9da2[_0x3274('0x104')](_0x57fcb6)&&!_0x7b9da2[_0x3274('0xdb')](_0x57fcb6)[_0x3274('0x6a')];let _0x3feaaa=_0x5c6055?_0x2acad1[_0x3274('0x23')]-0x1:0x0;const _0x537ab7=_0x5c6055?-0x1:0x1;for(;_0x2acad1[_0x3feaaa];){const _0xf3da20=_0x2acad1[_0x3feaaa];if(_0xf3da20['diffData'][_0x57fcb6]){const _0x405a5d=_0x5c6055?_0xf3da20[_0x3274('0xbd')][_0x57fcb6][_0x3274('0x8f')]:_0xf3da20[_0x3274('0xbd')][_0x57fcb6][_0x3274('0x20')];_0x1faebe[_0x3274('0xa1')][_0x57fcb6]=_0x405a5d?_0x967fb5(_0x405a5d):{};break;}_0x3feaaa+=_0x537ab7;}}for(const _0x26ce3c of _0x2acad1){_0x26ce3c['model']={};for(const _0x481482 of _0x26ce3c['authors'])_0x3adbe9[_0x3274('0x88')](_0x481482['id'],_0x481482);for(const _0x167c75 of _0x198c65){const _0x5c6524=_0x26ce3c[_0x3274('0xbd')][_0x167c75]?_0x26ce3c[_0x3274('0xbd')][_0x167c75][_0x3274('0x91')]:'[]',_0x3ad0e9=_0x26ce3c[_0x3274('0xbd')][_0x167c75]?_0x26ce3c['diffData'][_0x167c75][_0x3274('0x8e')]:'[]';_0x26ce3c[_0x3274('0x11e')][_0x167c75]={'insertions':this[_0x3274('0x30')](_0x5c6524),'deletions':this[_0x3274('0x30')](_0x3ad0e9)};}}for(const _0x302ce2 of _0x198c65){let _0x1cdea=null,_0x43dd86=0x0;const _0xfd5889=new Map(Array['from'](_0x5d7745[_0x3274('0x11e')][_0x302ce2][_0x3274('0x91')][_0x3274('0x5c')])[_0x3274('0x35')](([_0x2c4cf3])=>!_0x2c4cf3[_0x3274('0x39')]('revision:')));let _0x3955a3=0x0;for(const _0x42db57 of _0x2acad1){const _0x3fb5b2=this['_makeTape'](_0x42db57[_0x3274('0x11e')][_0x302ce2][_0x3274('0x91')]);_0x42db57==_0x5d7745?(_0x1cdea=_0x3fb5b2,_0x43dd86=_0x1cdea[_0x3274('0x23')],_0x1cdea[_0x3274('0x46')](_0x1478a4=>{_0x1478a4['id']=_0x3955a3++;}),this[_0x3274('0xba')](_0x1cdea)):this[_0x3274('0x34')](_0x1cdea,_0x3fb5b2);const _0x5c2f9b=_0x1cdea[_0x3274('0x35')](_0x1d2b05=>!_0x1d2b05[_0x3274('0x11f')])[_0x3274('0xa6')](_0x14f583=>_0x14f583['id']);let _0x1300bb=0x0;const _0x56d673=this[_0x3274('0x15')](_0x42db57[_0x3274('0x11e')][_0x302ce2][_0x3274('0x8e')]);_0x56d673[_0x3274('0x46')](_0x29b8e4=>{_0x29b8e4[_0x3274('0x6b')]?_0x29b8e4['id']=_0x43dd86++:_0x29b8e4['id']=_0x5c2f9b[_0x1300bb++];}),this[_0x3274('0xba')](_0x56d673),this[_0x3274('0x3')](_0x1cdea,_0x3274('0x11f')),this[_0x3274('0x3')](_0x56d673,_0x3274('0x6b')),_0x42db57==_0x5d7745&&this[_0x3274('0xfa')](_0x1cdea,_0xfd5889),_0x1cdea=this[_0x3274('0x90')](_0x1cdea,_0x56d673),this[_0x3274('0x6f')](_0x1cdea),this[_0x3274('0x3')](_0x1cdea,_0x3274('0x6b'));}_0x1cdea=_0x1cdea[_0x3274('0x35')](_0x3e67dd=>!(_0x3e67dd[_0x3274('0x11f')]&&_0x3e67dd[_0x3274('0x6b')]));const _0x23f48b=new Map(_0x13f0eb[_0x3274('0x11e')][_0x302ce2][_0x3274('0x8e')][_0x3274('0x5c')]),_0x27fa83=new Set(_0xfd5889[_0x3274('0x11b')]());for(const _0x33ea06 of _0x23f48b[_0x3274('0x11b')]())_0x27fa83[_0x3274('0xeb')](_0x33ea06);this[_0x3274('0x2f')](_0x1cdea,_0x27fa83),this[_0x3274('0x14')](_0x1cdea),_0x1cdea=this[_0x3274('0x25')](_0x1cdea),_0x1cdea=this[_0x3274('0xe0')](_0x1cdea),_0x1cdea=this[_0x3274('0x4a')](_0x1cdea);const {root:_0x7a0f6a,changes:_0x12b16e}=this[_0x3274('0x49')](_0x1cdea,_0x3adbe9,_0x302ce2);_0x1faebe[_0x3274('0x11e')][_0x302ce2]=_0x7a0f6a;const _0x211c5c=_0x7b9da2['get'](_0x302ce2);if(_0x211c5c){const _0x45adc7=_0x3adbe9[_0x3274('0xdb')](_0x211c5c[_0x3274('0x64')]),_0x5da19e=new _0x2e882f({'author':_0x45adc7,'type':_0x211c5c[_0x3274('0x6a')]?_0x3274('0x94'):_0x3274('0xea'),'data':{'isOnRoot':!0x0},'createdAt':new Date(),'rootName':_0x302ce2});_0x12b16e[_0x3274('0x22')](_0x5da19e),_0x1faebe[_0x3274('0xa1')][_0x302ce2][_0x3274('0x123')]=_0x5da19e['id'];}_0x1faebe[_0x3274('0x124')]=_0x1faebe[_0x3274('0x124')]['concat'](_0x12b16e);}return _0x1faebe;}[_0x3274('0xfa')](_0xd5c29b,_0x356f89){for(let _0xca4cab=0x0;_0xca4cab<_0xd5c29b['length'];_0xca4cab++)for(const [_0x49e32b,_0x56bd38]of _0x356f89)_0x56bd38[_0x3274('0xa2')][_0x3274('0xd7')](_0xd5c29b[_0xca4cab][_0x3274('0x8')])&&_0xd5c29b[_0xca4cab][_0x3274('0xd9')][_0x3274('0xd4')](_0x49e32b),_0x56bd38['end'][_0x3274('0xd7')](_0xd5c29b[_0xca4cab][_0x3274('0xab')])&&_0xd5c29b[_0xca4cab][_0x3274('0xb9')]['push'](_0x49e32b);}['_joinTapes'](_0x4138f2,_0x1cffb9){let _0x7f7b5c=[],_0x1aa6dd=0x0,_0x9e14a9=0x0;for(;_0x1aa6dd<_0x4138f2[_0x3274('0x23')]||_0x9e14a9<_0x1cffb9[_0x3274('0x23')];){const _0x2b2bf2=_0x4138f2[_0x1aa6dd]||{},_0x360ecc=_0x1cffb9[_0x9e14a9]||{};if(_0x2b2bf2['id']==_0x360ecc['id'])_0x1aa6dd++,_0x9e14a9++,_0x7f7b5c[_0x3274('0xd4')](_0x2b2bf2);else{if(_0x360ecc['isRemoved']&&_0x2b2bf2[_0x3274('0x11f')]){const {commonTape:_0x1bbef4,iEnd:_0x1391ba,jEnd:_0x245950}=this[_0x3274('0xe9')](_0x4138f2,_0x1aa6dd,_0x1cffb9,_0x9e14a9);_0x7f7b5c=_0x7f7b5c['concat'](_0x1bbef4),_0x1aa6dd=_0x1391ba,_0x9e14a9=_0x245950;}else _0x360ecc[_0x3274('0x6b')]?(_0x9e14a9++,_0x7f7b5c[_0x3274('0xd4')](_0x360ecc)):(_0x1aa6dd++,_0x7f7b5c[_0x3274('0xd4')](_0x2b2bf2));}}return _0x7f7b5c;}[_0x3274('0x2f')](_0x246af3,_0x61679e){const _0x2f261f=[];for(let _0x37fe62=0x0;_0x37fe62<_0x246af3['length'];_0x37fe62++){for(let _0x193325=0x0;_0x193325<_0x246af3[_0x37fe62][_0x3274('0xd9')][_0x3274('0x23')];_0x193325++){const _0x38e2f9=_0x246af3[_0x37fe62]['markersStart'][_0x193325];if(!_0x61679e[_0x3274('0x104')](_0x38e2f9))continue;const {group:_0x4ddbf3,type:_0xd953b,authorId:_0x5b2758}=_0x5c4743(_0x38e2f9);_0x3274('0xee')!=_0x4ddbf3||'insertion'!=_0xd953b&&_0x3274('0xd3')!=_0xd953b||(_0x2f261f[_0x3274('0x22')]({'type':_0xd953b,'name':_0x38e2f9,'userId':_0x5b2758}),_0x246af3[_0x37fe62]['markersStart'][_0x3274('0x44')](_0x193325,0x1),_0x193325--);}_0x37c762(_0x246af3[_0x37fe62]);for(let _0x30037f=0x0;_0x30037f<_0x246af3[_0x37fe62][_0x3274('0xb9')][_0x3274('0x23')];_0x30037f++){const _0x5599d9=_0x246af3[_0x37fe62][_0x3274('0xb9')][_0x30037f];if(!_0x61679e[_0x3274('0x104')](_0x5599d9))continue;const {group:_0xd6b899,type:_0x2cbb8b}=_0x5c4743(_0x5599d9);if(_0x3274('0xee')!=_0xd6b899||_0x3274('0x5e')!=_0x2cbb8b&&'deletion'!=_0x2cbb8b)continue;_0x246af3[_0x37fe62]['markersEnd']['splice'](_0x30037f,0x1),_0x30037f--;const _0x20f412=_0x2f261f[_0x3274('0x76')](_0x1248d2=>_0x1248d2[_0x3274('0x11')]==_0x5599d9);_0x20f412>-0x1&&_0x2f261f[_0x3274('0x44')](_0x20f412,0x1);}}function _0x5c4743(_0x1c96c6){const _0x32ca5b=_0x1c96c6[_0x3274('0x77')](':');return{'group':_0x32ca5b[0x0],'type':_0x32ca5b[0x1],'subType':_0x32ca5b['length']>=0x5?_0x32ca5b[0x2]:null,'id':_0x32ca5b['length']<0x5?_0x32ca5b[0x2]:_0x32ca5b[0x3],'authorId':_0x32ca5b[_0x3274('0x23')]<0x5?_0x32ca5b[0x3]:_0x32ca5b[0x4],'markerCount':0x6==_0x32ca5b[_0x3274('0x23')]?_0x32ca5b[0x5]:null};}function _0x37c762(_0x4636ec){for(let _0x946da5=0x0;_0x946da5<_0x2f261f[_0x3274('0x23')];_0x946da5++){if(_0x4636ec[_0x3274('0x11f')]&&'insertion'==_0x2f261f[_0x946da5][_0x3274('0x33')])return _0x4636ec[_0x3274('0x7b')]=_0x2f261f[_0x946da5],void delete _0x4636ec['isAdded'];if(!_0x4636ec[_0x3274('0x11f')]&&!_0x4636ec[_0x3274('0x6b')]&&_0x3274('0xd3')==_0x2f261f[_0x946da5][_0x3274('0x33')])return void(_0x4636ec[_0x3274('0x9d')]=_0x2f261f[_0x946da5]);}}}[_0x3274('0x3')](_0x4171a4,_0x5ca37e){let _0x42e636=0x0,_0x304521=!0x1;const _0x2d2ef1=new Map();for(const _0x58b265 of _0x4171a4)_0x58b265[_0x5ca37e]?_0x304521&&(_0x42e636++,_0x304521=!0x1):(_0x42e636++,_0x304521=!0x0),_0x2d2ef1['set'](_0x58b265['id'],_0x42e636);for(let _0x21e406=0x0;_0x21e406<_0x4171a4[_0x3274('0x23')];_0x21e406++){if(_0x3274('0x6b')==_0x5ca37e&&_0x4171a4[_0x21e406][_0x3274('0x11f')]||_0x3274('0x11f')==_0x5ca37e&&_0x4171a4[_0x21e406][_0x3274('0x6b')])continue;if('text'==_0x4171a4[_0x21e406][_0x3274('0x33')]){_0x4171a4[_0x21e406][_0x3274('0x11c')]=0x0;continue;}const _0x290030=_0x2d2ef1[_0x3274('0xdb')](_0x4171a4[_0x21e406][_0x3274('0xc6')]),_0x150d17=_0x2d2ef1['get'](_0x4171a4[_0x21e406]['id']);_0x4171a4[_0x21e406]['distance']=_0x290030-_0x150d17;}}[_0x3274('0x3b')](_0xadfe7f,_0x41b6de,_0x404624=!0x1){const _0x15dc68=[];let _0x203419=this[_0x3274('0x38')]['getIndex'](_0xadfe7f),_0x3205af=this['repository'][_0x3274('0xf2')](_0x41b6de);for(-0x1==_0x3205af&&(_0x3205af=this[_0x3274('0x38')][_0x3274('0x1d')]['length'],_0x404624=!0x1);_0x203419<_0x3205af;)_0x15dc68[_0x3274('0xd4')](this[_0x3274('0x38')][_0x3274('0x1a')](_0x203419)),_0x203419++;return _0x404624&&_0x15dc68[_0x3274('0xd4')](this[_0x3274('0x38')][_0x3274('0x1a')](_0x203419)),_0x15dc68;}[_0x3274('0xe9')](_0x5ac09e,_0x4c59e1,_0x30ecfb,_0x10e20c){const _0x4d6b36=this[_0x3274('0x106')][_0x3274('0x11e')][_0x3274('0x61')];let _0xb1fb20=_0x4c59e1;for(;_0x5ac09e[_0xb1fb20]&&_0x5ac09e[_0xb1fb20][_0x3274('0x11f')];)_0xb1fb20++;let _0x1fcae2=_0x10e20c;for(;_0x30ecfb[_0x1fcae2]&&_0x30ecfb[_0x1fcae2]['isRemoved'];)_0x1fcae2++;_0x3d5694(_0x5ac09e,_0x4c59e1,_0xb1fb20),_0x3d5694(_0x30ecfb,_0x10e20c,_0x1fcae2);const _0x20d7ca=_0x30ecfb[_0x3274('0xd')](_0x10e20c,_0x1fcae2)[_0x3274('0x2d')](_0x5ac09e[_0x3274('0xd')](_0x4c59e1,_0xb1fb20));return _0x20d7ca[_0x3274('0x68')]((_0x27b481,_0xa7728b)=>_0x27b481[_0x3274('0x4b')]!=_0xa7728b[_0x3274('0x4b')]?_0x27b481[_0x3274('0x4b')]-_0xa7728b[_0x3274('0x4b')]:_0x27b481[_0x3274('0x2e')]!=_0xa7728b['level']?_0x27b481[_0x3274('0x2e')]-_0xa7728b['level']:_0x27b481[_0x3274('0x11c')]!=_0xa7728b['distance']?_0xa7728b[_0x3274('0x11c')]-_0x27b481[_0x3274('0x11c')]:!!_0x27b481[_0x3274('0x11f')]!=!!_0xa7728b[_0x3274('0x11f')]?-0x1==_0x27b481[_0x3274('0x4b')]||0x0==_0x27b481[_0x3274('0x4b')]?_0x27b481['isAdded']?-0x1:0x1:_0x27b481[_0x3274('0x11f')]?0x1:-0x1:_0x27b481[_0x3274('0x79')]-_0xa7728b[_0x3274('0x79')]),{'commonTape':_0x20d7ca,'iEnd':_0xb1fb20,'jEnd':_0x1fcae2};function _0x3d5694(_0x2c50b7,_0x56b75e,_0x4a50d2){let _0x4a842c=-0x1,_0x16f51a=Number[_0x3274('0x9a')],_0x1bb4d9=!0x0;for(let _0x1e9279=_0x56b75e;_0x1e9279<_0x4a50d2;_0x1e9279++)if(_0x4d6b36[_0x3274('0xf7')](_0x2c50b7[_0x1e9279]['item'])||(_0x1bb4d9=!0x1),_0x2c50b7[_0x1e9279][_0x3274('0x67')]['startIndex']<_0x56b75e&&(_0x4a842c=_0x1e9279),_0x2c50b7[_0x1e9279][_0x3274('0x67')]['endIndex']>=_0x4a50d2){_0x16f51a=_0x1e9279;break;}_0x1bb4d9&&(_0x4a842c=_0x4a50d2-0x1);for(let _0x2fcd5c=_0x56b75e;_0x2fcd5c<_0x4a50d2;_0x2fcd5c++)_0x2c50b7[_0x2fcd5c][_0x3274('0x4b')]=_0x2fcd5c<=_0x4a842c?-0x1:_0x2fcd5c<_0x16f51a?0x0:0x1,_0x2c50b7[_0x2fcd5c][_0x3274('0x79')]=_0x2fcd5c;let _0x454822=0x0;for(let _0x21cd4a=_0x56b75e;_0x21cd4a<=_0x4a842c;_0x21cd4a++)0x0==_0x2c50b7[_0x21cd4a][_0x3274('0x11c')]?_0x2c50b7[_0x21cd4a][_0x3274('0x2e')]=_0x454822:(_0x454822++,_0x2c50b7[_0x21cd4a][_0x3274('0x2e')]=_0x454822,_0x454822++);for(let _0x503e22=_0x56b75e;_0x503e22<_0x4a50d2;_0x503e22++)0x0==_0x2c50b7[_0x503e22][_0x3274('0x4b')]&&(_0x2c50b7[_0x503e22][_0x3274('0x2e')]=_0x454822);_0x454822=0x0;for(let _0x2792fc=_0x4a50d2-0x1;_0x2792fc>=_0x16f51a;_0x2792fc--)0x0==_0x2c50b7[_0x2792fc][_0x3274('0x11c')]?_0x2c50b7[_0x2792fc]['level']=_0x454822:(_0x454822--,_0x2c50b7[_0x2792fc][_0x3274('0x2e')]=_0x454822,_0x454822--);}}[_0x3274('0x14')](_0x124302){const _0x1a62bd=new Map(),_0x3191a1=this['editor'][_0x3274('0x11e')][_0x3274('0x61')];for(let _0x364f6b=0x1;_0x364f6b<_0x124302[_0x3274('0x23')];_0x364f6b++){let _0x4fae74,_0x18c355,_0x1aa097;const _0x3194b6=_0x124302[_0x364f6b],_0x241d1f=_0x124302[_0x364f6b-0x1];if('text'==_0x3194b6['type'])continue;if(_0x3194b6[_0x3274('0x33')]!=_0x241d1f[_0x3274('0x33')])continue;if(!_0x3191a1['isBlock'](_0x241d1f[_0x3274('0x67')])||_0x3191a1['isLimit'](_0x241d1f[_0x3274('0x67')]))continue;if(!_0x3191a1[_0x3274('0x4')](_0x3194b6[_0x3274('0x67')])||_0x3191a1[_0x3274('0x7')](_0x3194b6[_0x3274('0x67')]))continue;if((_0x124302[_0x364f6b][_0x3274('0x11f')]||_0x124302[_0x364f6b][_0x3274('0x7b')])&&_0x124302[_0x364f6b-0x1][_0x3274('0x6b')])_0x4fae74=_0x124302[_0x364f6b],_0x18c355=_0x124302[_0x364f6b-0x1],_0x1aa097=_0x364f6b-0x1;else{if(!_0x124302[_0x364f6b][_0x3274('0x6b')]||!_0x124302[_0x364f6b-0x1][_0x3274('0x11f')]&&!_0x124302[_0x364f6b-0x1][_0x3274('0x7b')])continue;_0x4fae74=_0x124302[_0x364f6b-0x1],_0x18c355=_0x124302[_0x364f6b],_0x1aa097=_0x364f6b;}const _0x4b0335=_0x4fae74[_0x3274('0x2e')]==_0x18c355[_0x3274('0x2e')],_0x299e38=Math[_0x3274('0xfc')](_0x4fae74[_0x3274('0x2e')])<Math[_0x3274('0xfc')](_0x18c355[_0x3274('0x2e')])&&0x0==_0x18c355[_0x3274('0x11c')];(_0x4b0335||_0x299e38)&&(_0x1a62bd['set'](_0x18c355['id'],_0x4fae74['id']),_0x124302[_0x3274('0x44')](_0x1aa097,0x1),_0x364f6b--,_0x4fae74['isAdded']=!0x1);}for(let _0x53c90e=0x0;_0x53c90e<_0x124302['length'];_0x53c90e++)_0x1a62bd[_0x3274('0x104')](_0x124302[_0x53c90e]['pairId'])&&(_0x124302[_0x53c90e][_0x3274('0xc6')]=_0x1a62bd[_0x3274('0xdb')](_0x124302[_0x53c90e][_0x3274('0xc6')]));}['_removeMissingPairs'](_0x3c5a6b){const _0x2514ca=new Set(_0x3c5a6b[_0x3274('0xa6')](_0x220203=>_0x220203['id']));for(let _0x53bfec=0x0;_0x53bfec<_0x3c5a6b[_0x3274('0x23')];_0x53bfec++)_0x2514ca[_0x3274('0x104')](_0x3c5a6b[_0x53bfec]['pairId'])||0x0==_0x3c5a6b[_0x53bfec]['distance']||(_0x3c5a6b[_0x53bfec][_0x3274('0x120')]=!0x0);return _0x3c5a6b[_0x3274('0x35')](_0x533d3b=>!_0x533d3b[_0x3274('0x120')]);}['_markMismatchedRemovedTags'](_0x99428e){const _0x2db227=new Set();for(let _0x5c5b70=0x0;_0x5c5b70<_0x99428e[_0x3274('0x23')];_0x5c5b70++){if(_0x2db227[_0x3274('0x104')](_0x99428e[_0x5c5b70]['id'])&&_0x99428e[_0x5c5b70]['isRemoved']&&(_0x99428e[_0x5c5b70]['isIncorrect']=!0x0),_0x99428e[_0x5c5b70][_0x3274('0x120')])continue;if(0x0==_0x99428e[_0x5c5b70][_0x3274('0x11c')])continue;if(_0x3274('0x115')!=_0x99428e[_0x5c5b70][_0x3274('0x33')])continue;if(null==_0x99428e[_0x5c5b70][_0x3274('0xc6')])continue;let _0x4f838f=_0x5c5b70+0x1,_0x4bb233=0x0;for(;_0x99428e[_0x4f838f]['id']!=_0x99428e[_0x5c5b70][_0x3274('0xc6')];)_0x3274('0x115')==_0x99428e[_0x4f838f][_0x3274('0x33')]?_0x4bb233++:_0x3274('0xaf')==_0x99428e[_0x4f838f][_0x3274('0x33')]&&_0x4bb233--,_0x4f838f++;if(0x0!=_0x4bb233){if(_0x99428e[_0x5c5b70]['isRemoved'])_0x99428e[_0x5c5b70][_0x3274('0x120')]=!0x0;else for(;_0x4f838f!=_0x5c5b70;)_0x99428e[_0x4f838f][_0x3274('0x6b')]&&0x0!=_0x99428e[_0x4f838f][_0x3274('0x11c')]&&(_0x99428e[_0x4f838f]['isIncorrect']=!0x0,_0x2db227['add'](_0x99428e[_0x4f838f][_0x3274('0xc6')])),_0x4f838f--;}}return _0x99428e[_0x3274('0x35')](_0x2119ff=>!_0x2119ff[_0x3274('0x120')]);}['_removeUnsupportedChanges'](_0x3adb4c){const _0x4678ba=this[_0x3274('0x106')]['model']['schema'];for(let _0x409762=0x0;_0x409762<_0x3adb4c['length'];_0x409762++){if(!(_0x3adb4c[_0x409762][_0x3274('0x11f')]||_0x3adb4c[_0x409762]['isAddSuggestion']||_0x3adb4c[_0x409762][_0x3274('0x6b')]||_0x3adb4c[_0x409762][_0x3274('0x9d')]))continue;if(0x0==_0x3adb4c[_0x409762][_0x3274('0x11c')])continue;const _0x432471=_0x3adb4c[_0x409762]['item'];_0x4678ba['isBlock'](_0x432471)||_0x4678ba['isLimit'](_0x432471)||(_0x3adb4c[_0x409762]['isAdded']&&delete _0x3adb4c[_0x409762][_0x3274('0x11f')],_0x3adb4c[_0x409762][_0x3274('0x7b')]&&delete _0x3adb4c[_0x409762][_0x3274('0x7b')],_0x3adb4c[_0x409762][_0x3274('0x9d')]&&delete _0x3adb4c[_0x409762]['isRemoveSuggestion'],_0x3adb4c[_0x409762]['isRemoved']&&(_0x3adb4c[_0x409762][_0x3274('0x120')]=!0x0));}return _0x3adb4c[_0x3274('0x35')](_0x2687e7=>!_0x2687e7['isIncorrect']);}[_0x3274('0x49')](_0x51418b,_0x2a08f7,_0x377303){const _0x1b224b=new _0x4005fc(),_0x382ebc=[],_0x5977ec=new Map(),_0x4c5c5a=this['editor']['model'],_0x3b037b=_0x4c5c5a['schema'],_0x4fa876=[_0x1b224b],_0x51b6fa={},_0x537c99={'isAdded':[],'isRemoved':[],'isAddSuggestion':[],'isRemoveSuggestion':[]};let _0x42f4b7=null;const _0x19237c=[0x0];for(let _0x23f1c2=0x0;_0x23f1c2<_0x51418b[_0x3274('0x23')];_0x23f1c2++){let _0x50622d,_0x3c084d;if(_0x3274('0x115')===_0x51418b[_0x23f1c2][_0x3274('0x33')]){_0x50622d=_0x4c5c5a['createPositionFromPath'](_0x1b224b,_0x19237c);const _0xe4600=new _0x180c2e(_0x51418b[_0x23f1c2]['item'][_0x3274('0x11')],_0x51418b[_0x23f1c2][_0x3274('0x67')][_0x3274('0xdd')]());_0x4fa876[0x0][_0x3274('0xda')](_0xe4600),_0x19237c['push'](0x0),_0x4fa876['unshift'](_0xe4600),_0x3c084d=_0x4c5c5a[_0x3274('0xe1')](_0x1b224b,_0x19237c),_0x42f4b7=null;}else{if(_0x3274('0xaf')===_0x51418b[_0x23f1c2][_0x3274('0x33')])_0x4fa876['shift'](),_0x50622d=_0x4c5c5a['createPositionFromPath'](_0x1b224b,_0x19237c),_0x19237c[_0x3274('0xb6')](),_0x19237c[_0x19237c['length']-0x1]++,_0x3c084d=_0x4c5c5a[_0x3274('0xe1')](_0x1b224b,_0x19237c),_0x42f4b7=null;else{if(_0x50622d=_0x4c5c5a['createPositionFromPath'](_0x1b224b,_0x19237c),_0x42f4b7&&_0x5338dd(_0x42f4b7,_0x51418b[_0x23f1c2]['item']))_0x42f4b7[_0x3274('0x13')]+=_0x51418b[_0x23f1c2][_0x3274('0x67')][_0x3274('0x66')];else{const _0x17d645=new _0x3728ac(_0x51418b[_0x23f1c2][_0x3274('0x67')][_0x3274('0x66')],_0x51418b[_0x23f1c2]['item'][_0x3274('0xdd')]());_0x4fa876[0x0]['_appendChild'](_0x17d645),_0x42f4b7=_0x17d645;}_0x19237c[_0x19237c[_0x3274('0x23')]-0x1]+=_0x51418b[_0x23f1c2][_0x3274('0x67')][_0x3274('0x107')],_0x3c084d=_0x4c5c5a[_0x3274('0xe1')](_0x1b224b,_0x19237c);}}for(const _0x53829e of _0x51418b[_0x23f1c2][_0x3274('0xd9')])_0x5977ec[_0x3274('0x88')](_0x53829e,{'start':_0x50622d,'end':null});_0x59b117(_0x3274('0x9d'),_0x23f1c2,_0x50622d,_0x3c084d),_0x59b117(_0x3274('0x7b'),_0x23f1c2,_0x50622d,_0x3c084d),_0x59b117(_0x3274('0x6b'),_0x23f1c2,_0x50622d,_0x3c084d),_0x59b117(_0x3274('0x11f'),_0x23f1c2,_0x50622d,_0x3c084d);for(const _0x8ec68e of _0x51418b[_0x23f1c2][_0x3274('0xb9')]){_0x5977ec[_0x3274('0xdb')](_0x8ec68e)[_0x3274('0x27')]=_0x3c084d;}}for(const [_0x2842b9,_0x5d9439]of _0x5977ec){const _0x311014=this[_0x3274('0x106')][_0x3274('0x11e')][_0x3274('0xec')](_0x5d9439[_0x3274('0xa2')],_0x5d9439[_0x3274('0x27')]);_0x1b224b[_0x3274('0x5c')][_0x3274('0x88')](_0x2842b9,_0x311014);}return _0x382ebc[_0x3274('0x68')]((_0x2dd978,_0x3122c9)=>{const _0x15d739=_0x1b224b[_0x3274('0x5c')][_0x3274('0xdb')](_0x3274('0x72')+_0x2dd978['id']),_0x5d061b=_0x1b224b[_0x3274('0x5c')][_0x3274('0xdb')](_0x3274('0x72')+_0x3122c9['id']);return _0x15d739['start']['isBefore'](_0x5d061b['start'])?-0x1:_0x15d739['start'][_0x3274('0xbc')](_0x5d061b[_0x3274('0xa2')])?0x1:_0x15d739[_0x3274('0x27')][_0x3274('0x1c')](_0x5d061b['end'])?-0x1:_0x15d739['end'][_0x3274('0xbc')](_0x5d061b[_0x3274('0x27')])?0x1:'add'===_0x2dd978[_0x3274('0x33')]?-0x1:0x1;}),{'root':_0x1b224b,'changes':_0x382ebc};function _0x59b117(_0x3cd65d,_0x2b3f4d,_0x5b49ca,_0x2968a9){const _0x479ca9=!!_0x51418b[_0x2b3f4d][_0x3cd65d],_0x39341a=_0x479ca9?_0x51418b[_0x2b3f4d][_0x3cd65d][_0x3274('0x64')]:null,_0x35bc18=_0x2b3f4d===_0x51418b['length']-0x1,_0x2af957=_0x537c99[_0x3cd65d][0x0],_0x29795f=_0x3b037b[_0x3274('0x103')](_0x51418b[_0x2b3f4d][_0x3274('0x67')]);!_0x51b6fa[_0x3cd65d]&&_0x479ca9?_0x51b6fa[_0x3cd65d]={'start':_0x5b49ca,'tapeItem':_0x51418b[_0x2b3f4d],'userId':_0x39341a,'type':_0x3cd65d}:_0x51b6fa[_0x3cd65d]&&!_0x479ca9?(_0x51b6fa[_0x3cd65d][_0x3274('0x27')]=_0x5b49ca,_0x3156ca(_0x51b6fa[_0x3cd65d]),_0x51b6fa[_0x3cd65d]=null):_0x51b6fa[_0x3cd65d]&&_0x479ca9&&_0x51b6fa[_0x3cd65d][_0x3274('0x64')]!==_0x39341a&&(_0x51b6fa[_0x3cd65d][_0x3274('0x27')]=_0x5b49ca,_0x2af957&&_0x2af957[_0x3274('0x64')]===_0x51b6fa[_0x3cd65d][_0x3274('0x64')]||_0x3156ca(_0x51b6fa[_0x3cd65d]),_0x51b6fa[_0x3cd65d]={'start':_0x5b49ca,'tapeItem':_0x51418b[_0x2b3f4d],'userId':_0x39341a,'type':_0x3cd65d}),_0x51b6fa[_0x3cd65d]&&_0x29795f&&(_0x3274('0x115')!==_0x51418b[_0x2b3f4d]['type']||_0x2af957&&_0x2af957[_0x3274('0x64')]===_0x39341a||_0x537c99[_0x3cd65d][_0x3274('0x22')]({'userId':_0x39341a,'object':_0x51418b[_0x2b3f4d]['item'],'change':_0x51b6fa[_0x3cd65d]}),'elementEnd'===_0x51418b[_0x2b3f4d][_0x3274('0x33')]&&_0x2af957&&_0x2af957['object']===_0x51418b[_0x2b3f4d]['item']&&(_0x537c99[_0x3cd65d][_0x3274('0x5d')](),_0x51b6fa[_0x3cd65d]=_0x2af957[_0x3274('0x73')])),_0x51b6fa[_0x3cd65d]&&_0x35bc18&&(_0x51b6fa[_0x3cd65d][_0x3274('0x27')]=_0x2968a9,_0x3156ca(_0x51b6fa[_0x3cd65d]),_0x51b6fa[_0x3cd65d]=null);}function _0x3156ca({start:_0x1ee00c,end:_0x447dd7,tapeItem:_0x25404f,userId:_0x181dbf,type:_0x3e14e5}){const _0x125775=_0x25404f['item'],_0x2606c4=_0x4c5c5a[_0x3274('0x61')][_0x3274('0x4')](_0x125775)&&!_0x4c5c5a[_0x3274('0x61')][_0x3274('0x7')](_0x125775),_0x3016d2=_0x1ee00c[_0x3274('0x9c')]==_0x447dd7['parent']&&_0x447dd7[_0x3274('0xb8')];if(_0x2606c4&&_0x3016d2)return;const _0x2c0ab0=_0x4c5c5a[_0x3274('0xec')](_0x1ee00c,_0x447dd7),_0x53af2c=_0x2a08f7[_0x3274('0xdb')](_0x181dbf),_0x1597ba=new _0x2e882f({'author':_0x53af2c,'type':_0x3274('0x11f')==_0x3e14e5||_0x3274('0x7b')==_0x3e14e5?'add':_0x3274('0xea'),'data':{'isSuggestion':_0x3274('0x7b')==_0x3e14e5||_0x3274('0x9d')==_0x3e14e5},'createdAt':new Date(),'rootName':_0x377303});_0x382ebc['push'](_0x1597ba),_0x1b224b['markers'][_0x3274('0x88')](_0x3274('0x72')+_0x1597ba['id'],_0x2c0ab0);}function _0x5338dd(_0x69a0ad,_0x237b5a){const _0xdd61ff=_0x69a0ad[_0x3274('0xdd')](),_0x2fec13=_0x237b5a[_0x3274('0xdd')]();for(const _0x4388ac of _0xdd61ff){if(_0x4388ac[0x1]!==_0x237b5a[_0x3274('0xa7')](_0x4388ac[0x0]))return!0x1;_0x2fec13[_0x3274('0x11d')]();}return _0x2fec13['next']()['done'];}}[_0x3274('0x58')](){this[_0x3274('0x106')]['conversion']['for'](_0x3274('0x9e'))['dataToMarker']({'view':_0x3274('0xc3')}),this[_0x3274('0x106')]['conversion'][_0x3274('0xc1')](_0x3274('0x112'))[_0x3274('0xf1')]({'model':_0x3274('0xc3'),'view':_0x3279d8=>{const _0xa8607c=_0x3279d8[_0x3274('0xf3')]['split'](':')[0x1],_0x225f72=this[_0x3274('0xc8')](_0xa8607c);if(!_0x225f72)return null;const _0x2a8724=_0x3274('0x94')==_0x225f72[_0x3274('0x33')]?_0x3274('0x5e'):_0x3274('0xd3'),_0x5efa2f=['ck-suggestion-marker',_0x3274('0xaa')+_0x2a8724];return _0x225f72[_0x3274('0x66')][_0x3274('0xe')]&&_0x5efa2f['push'](_0x3274('0xaa')+_0x2a8724+_0x3274('0x110')),this[_0x3274('0x28')]==_0x225f72&&_0x5efa2f[_0x3274('0xd4')](_0x3274('0xd8')),{'classes':_0x5efa2f,'attributes':{'data-change-id':_0xa8607c}};}}),this[_0x3274('0x106')][_0x3274('0x31')]['for']('upcast')[_0x3274('0x94')](_0x13f001=>{_0x13f001['on']('element:pre',(_0x1d9b5d,_0x2248db,_0x4eb40a)=>{const _0x59ff93=_0x2248db[_0x3274('0x121')][_0x3274('0x59')](0x0);if(!_0x59ff93||!_0x59ff93['is']('element','code'))return;if(!_0x4eb40a[_0x3274('0x3d')][_0x3274('0x3f')](_0x59ff93,{'attributes':[_0x3274('0x95'),'vid_end']}))return;const _0x17fc2c=_0x2248db[_0x3274('0x50')][_0x3274('0xa2')][_0x3274('0x9c')];_0x4eb40a['writer'][_0x3274('0xb4')](_0x3274('0x95'),_0x59ff93[_0x3274('0xa7')](_0x3274('0x95')),_0x17fc2c),_0x4eb40a[_0x3274('0x71')][_0x3274('0xb4')]('vid_end',_0x59ff93[_0x3274('0xa7')](_0x3274('0x3a')),_0x17fc2c);},{'priority':_0x3274('0x10d')});}),this[_0x3274('0x106')][_0x3274('0x31')]['for'](_0x3274('0x9e'))[_0x3274('0x94')](_0x2c4316=>{_0x2c4316['on'](_0x3274('0x118'),(_0x1646e0,_0x469dbe,_0x4c44cf)=>{if(!_0x4c44cf['consumable'][_0x3274('0x3f')](_0x469dbe[_0x3274('0x121')],{'attributes':['vid_start',_0x3274('0x3a')]}))return;if(_0x469dbe[_0x3274('0x50')][_0x3274('0x113')])return;const _0xbdee33=_0x469dbe['modelRange']['start']['nodeAfter'];_0xbdee33['hasAttribute'](_0x3274('0x95'))||_0xbdee33[_0x3274('0xe2')]('vid')||(_0x4c44cf[_0x3274('0x71')][_0x3274('0xb4')](_0x3274('0x95'),_0x469dbe['viewItem'][_0x3274('0xa7')](_0x3274('0x95')),_0xbdee33),_0x4c44cf[_0x3274('0x71')][_0x3274('0xb4')](_0x3274('0x3a'),_0x469dbe[_0x3274('0x121')][_0x3274('0xa7')](_0x3274('0x3a')),_0xbdee33));},{'priority':_0x3274('0x10d')});}),this[_0x3274('0x106')][_0x3274('0x31')][_0x3274('0xc1')]('upcast')[_0x3274('0x89')]({'view':{'name':'span','attributes':{'vid':!0x0}},'model':{'key':_0x3274('0xc7'),'value':_0x369640=>_0x369640[_0x3274('0xa7')](_0x3274('0xc7'))}}),this[_0x3274('0x106')][_0x3274('0x11e')]['schema']['on'](_0x3274('0x1b'),(_0x120002,[,_0x541050])=>{[_0x3274('0x95'),_0x3274('0x3a'),_0x3274('0xc7')][_0x3274('0x2c')](_0x541050)&&(_0x120002['return']=!0x0,_0x120002['stop']());},{'priority':_0x3274('0x74')}),this[_0x3274('0x106')][_0x3274('0x31')]['for'](_0x3274('0x10'))[_0x3274('0x94')](_0xd66305=>{_0xd66305['on']('attribute:vid',(_0x4ba950,_0x2fadf9,_0x52009f)=>{if('\x20'!=_0x2fadf9[_0x3274('0x67')]['data']||_0x2fadf9[_0x3274('0x67')]['parent'][_0x3274('0x57')]>0x1)return;if(!_0x52009f[_0x3274('0x3d')][_0x3274('0x3f')](_0x2fadf9[_0x3274('0x67')],_0x4ba950[_0x3274('0x11')]))return;const _0x71437c=_0x52009f['writer'],_0x36849b=_0x52009f[_0x3274('0xae')][_0x3274('0xa3')](_0x2fadf9['range']);_0x71437c[_0x3274('0x52')](_0x36849b,_0x71437c[_0x3274('0x8d')]('span'));});}),this[_0x3274('0x106')][_0x3274('0x31')][_0x3274('0xc1')]('dataDowncast')[_0x3274('0x9f')]({'model':_0x3274('0xc3')}),this['editor'][_0x3274('0xf6')]['downcastDispatcher']['on']('addMarker:revision',function(_0x34e302){const _0x3ae685=_0x34e302[_0x3274('0x6d')][_0x3274('0xdb')]('RevisionViewer');return(_0x258f87,_0x473a48,_0x3dbf5f)=>{const _0x782fa6=_0x473a48['markerName'][_0x3274('0x77')](':')[0x1],_0x11a453=_0x3ae685[_0x3274('0xc8')](_0x782fa6);if(!_0x11a453)return null;const _0x514926='add'==_0x11a453[_0x3274('0x33')]?_0x3274('0x77'):_0x3274('0x62');if(!_0x3dbf5f[_0x3274('0x3d')]['test'](_0x473a48['markerRange'],_0x258f87['name']))return;const _0x561426=_0x473a48[_0x3274('0x84')]['getWalker'](),_0x360917=_0x473a48['markerRange']['start'],_0x4c271a=_0x34e302[_0x3274('0x11e')][_0x3274('0x61')];let _0x1cfdcf=null,_0x1e4bab=null,_0x49d8d2=!0x1,_0x3890a4=!0x1;for(const _0xd417fe of _0x561426){const _0x3a263a=_0xd417fe['item'];_0x49d8d2=_0x49d8d2||_0x4c271a[_0x3274('0x97')](_0x3a263a);const _0x18b8ad=_0x3dbf5f[_0x3274('0xae')][_0x3274('0x5f')](_0x3a263a);if(_0x18b8ad&&_0x18b8ad[_0x3274('0x18')]('addHighlight'))return;_0x3274('0xaf')==_0xd417fe[_0x3274('0x33')]&&(_0x4c271a[_0x3274('0x4')](_0x3a263a)&&!_0x4c271a[_0x3274('0x7')](_0x3a263a)&&(_0x3a263a[_0x3274('0x4f')]||_0x360917['isAtEnd']?_0x1cfdcf&&_0x1cfdcf['parent']==_0x3a263a||(_0x1cfdcf=_0x3a263a,_0x55456d(_0xd417fe['previousPosition']),_0x3890a4=!0x0):_0x1e4bab=_0x1e4bab||_0xd417fe['previousPosition']));}function _0x55456d(_0x430b6f){const _0x571782=_0x3dbf5f[_0x3274('0x71')][_0x3274('0x6e')](_0x3274('0x10e'),{'class':_0x3274('0xaa')+_0x514926}),_0x4ea717=_0x3dbf5f['mapper'][_0x3274('0xf')](_0x430b6f);_0x11a453[_0x3274('0x66')][_0x3274('0xe')]&&_0x3dbf5f['writer'][_0x3274('0xbe')](_0x3274('0xaa')+_0x514926+_0x3274('0x110'),_0x571782),_0x3ae685[_0x3274('0x28')]==_0x11a453&&_0x3dbf5f['writer'][_0x3274('0xbe')]('ck-suggestion-marker--active',_0x571782),_0x3dbf5f[_0x3274('0x71')][_0x3274('0x111')](_0x4ea717,_0x571782),_0x3dbf5f[_0x3274('0xae')]['bindElementToMarker'](_0x571782,_0x473a48[_0x3274('0xf3')]);}_0x49d8d2||_0x3890a4||!_0x1e4bab||_0x55456d(_0x1e4bab);};}(this['editor']),{'priority':_0x3274('0x5')}),this[_0x3274('0x106')]['editing'][_0x3274('0xb5')]['on']('removeMarker:revision',(_0x5da2f5,_0x2ce7a5,_0x5a491d)=>{const _0x3c8e8d=_0x5a491d[_0x3274('0xae')][_0x3274('0xd6')](_0x2ce7a5['markerName']);if(_0x3c8e8d)for(const _0x125a7e of _0x3c8e8d)(_0x125a7e[_0x3274('0xfe')](_0x3274('0x10b'))||_0x125a7e[_0x3274('0xfe')](_0x3274('0xb3')))&&(_0x5a491d[_0x3274('0xae')]['unbindElementFromMarkerName'](_0x125a7e,_0x2ce7a5[_0x3274('0xf3')]),_0x5a491d[_0x3274('0x71')][_0x3274('0xea')](_0x125a7e));},{'priority':_0x3274('0x5')}),this[_0x3274('0x106')][_0x3274('0xf6')]['downcastDispatcher']['on'](_0x3274('0x7c'),(_0x3476ea,_0x57e951,_0x4c93d2)=>{const _0xaf13ce=_0x57e951[_0x3274('0xf3')][_0x3274('0x77')](':')[0x1],_0x1440e7=this[_0x3274('0xc8')](_0xaf13ce);if(!_0x1440e7)return null;const _0x49fdd5=_0x3274('0x94')==_0x1440e7[_0x3274('0x33')]?_0x3274('0x77'):_0x3274('0x62');if(_0x4c93d2[_0x3274('0x3d')]['test'](_0x57e951[_0x3274('0x84')],_0x3476ea[_0x3274('0x11')]))for(const _0x118581 of _0x57e951[_0x3274('0x84')][_0x3274('0x92')]()){if(!_0x118581['is'](_0x3274('0x118'),_0x3274('0x109')))continue;const _0x298908=_0x4c93d2['writer'][_0x3274('0x6e')](_0x3274('0x10e'),{'class':_0x3274('0xaa')+_0x49fdd5}),_0x178b3d=_0x4c93d2[_0x3274('0xae')]['toViewPosition'](this[_0x3274('0x106')]['model'][_0x3274('0xc2')](_0x118581));_0x1440e7['data'][_0x3274('0xe')]&&_0x4c93d2[_0x3274('0x71')]['addClass'](_0x3274('0xaa')+_0x49fdd5+'-new',_0x298908),this[_0x3274('0x28')]==_0x1440e7&&_0x4c93d2['writer'][_0x3274('0xbe')](_0x3274('0xd8'),_0x298908),_0x4c93d2[_0x3274('0x71')][_0x3274('0x111')](_0x178b3d,_0x298908),_0x4c93d2[_0x3274('0xae')][_0x3274('0x9b')](_0x298908,_0x57e951[_0x3274('0xf3')]);}},{'priority':_0x3274('0x5')}),this[_0x3274('0x106')][_0x3274('0x11e')]['document']['on'](_0x3274('0x73'),()=>{this[_0x3274('0x106')]['editing'][_0x3274('0x40')][_0x3274('0x73')](_0x4d465f=>{for(const _0x31d08c of this[_0x3274('0x106')][_0x3274('0x11e')][_0x3274('0x117')][_0x3274('0xac')]()){const _0x188991=this['editor'][_0x3274('0x11e')][_0x3274('0x117')]['getRoot'](_0x31d08c),_0x341cf3=this[_0x3274('0x106')][_0x3274('0xf6')][_0x3274('0x40')][_0x3274('0x117')]['getRoot'](_0x31d08c);if(_0x341cf3){const _0x1b1ccf=_0x188991['getAttribute'](_0x3274('0x123'));if(_0x4d465f[_0x3274('0xf4')](_0x3274('0xdc'),_0x341cf3),_0x4d465f[_0x3274('0x2b')]('ck-revision-history-root-add',_0x341cf3),_0x4d465f['removeClass']('ck-revision-history-root-remove',_0x341cf3),_0x4d465f[_0x3274('0x2b')]('ck-revision-history-root--active',_0x341cf3),_0x1b1ccf){const _0x42b8d5=this[_0x3274('0xc8')](_0x1b1ccf);if(!_0x42b8d5)return null;_0x4d465f[_0x3274('0xb4')]('data-change-id',_0x1b1ccf,_0x341cf3),_0x4d465f['addClass'](_0x3274('0xf8')+_0x42b8d5['type'],_0x341cf3),this[_0x3274('0x28')]==_0x42b8d5&&_0x4d465f[_0x3274('0xbe')](_0x3274('0x87'),_0x341cf3);}}}});}),this[_0x3274('0x106')]['conversion']['for'](_0x3274('0x9e'))[_0x3274('0xcc')]({'view':_0x3274('0x54'),'model':_0x42a512=>'revision-comment:'+_0x42a512,'converterPriority':_0x3274('0x74')}),this[_0x3274('0x106')]['conversion']['for'](_0x3274('0x9e'))[_0x3274('0xcc')]({'view':'suggestion','model':_0x248fed=>_0x3274('0x3e')+_0x248fed,'converterPriority':_0x3274('0x74')}),this['editor'][_0x3274('0x31')][_0x3274('0xc1')](_0x3274('0x10'))[_0x3274('0x9f')]({'model':'revision-suggestion','view':_0x44553c=>({'name':_0x3274('0x83')+_0x44553c,'group':_0x3274('0xee')}),'converterPriority':_0x3274('0x74')}),this['editor'][_0x3274('0x31')][_0x3274('0xc1')](_0x3274('0x112'))[_0x3274('0xf1')]({'model':_0x3274('0xee'),'view':_0x50f16b=>{const _0x3b5027=_0x50f16b['markerName'][_0x3274('0x77')](':')[0x1];return'insertion'!=_0x3b5027&&_0x3274('0xd3')!=_0x3b5027?null:{'classes':[_0x3274('0xfb'),_0x3274('0x55')+_0x3b5027]};}}),this['editor'][_0x3274('0xf6')][_0x3274('0xb5')]['on']('addMarker:revision-suggestion:deletion',Y(this[_0x3274('0x106')],_0x3274('0x62')),{'priority':_0x3274('0x5')}),this[_0x3274('0x106')][_0x3274('0xf6')][_0x3274('0xb5')]['on'](_0x3274('0x8b'),Y(this['editor'],'split'),{'priority':'high'}),this['editor'][_0x3274('0xf6')][_0x3274('0xb5')]['on'](_0x3274('0xdf'),(_0x498030,_0xc3ad4,_0x59cf6)=>{const _0x49cc00=_0x59cf6[_0x3274('0xae')]['markerNameToElements'](_0xc3ad4[_0x3274('0xf3')]);if(_0x49cc00)for(const _0x972986 of _0x49cc00)_0x972986['is'](_0x3274('0xb7'))&&(_0x59cf6[_0x3274('0xae')][_0x3274('0x42')](_0x972986,_0xc3ad4[_0x3274('0xf3')]),_0x59cf6['writer'][_0x3274('0xea')](_0x972986));},{'priority':_0x3274('0x5')});}[_0x3274('0xc8')](_0x25bf23){return this[_0x3274('0xa4')]['get'](_0x25bf23);}['_getViewForChange'](_0x337c39){return this['_changeView']&&this['_changeView']['destroy'](),this[_0x3274('0x119')]=new _0x178cd4(this[_0x3274('0x106')][_0x3274('0xca')],_0x337c39),this[_0x3274('0x119')];}[_0x3274('0xce')](){this['editor'][_0x3274('0x11e')]['document'][_0x3274('0x100')][_0x3274('0xe4')](_0x3274('0xc3')),this['on']('change:activeView',(_0x1e459a,_0x55edaf,_0x8c329a,_0x1a2421)=>{_0x1a2421&&this[_0x3274('0xcf')]['remove'](_0x1a2421),_0x8c329a&&(this[_0x3274('0xcf')][_0x3274('0x94')]({'view':_0x8c329a,'stackId':_0x3274('0xc5'),'position':{'target':()=>{const _0x4d114f=this[_0x3274('0x106')][_0x3274('0xf6')],_0x209ad9=this['_getChangeFromId'](_0x8c329a[_0x3274('0x26')]);let _0x5423dc;if(_0x209ad9[_0x3274('0x66')][_0x3274('0x5b')]){const _0x64c8d=_0x4d114f[_0x3274('0x40')][_0x3274('0x1f')](_0x209ad9[_0x3274('0xc9')]);_0x5423dc=Array['from'](_0x64c8d[_0x3274('0xd1')]());}else{const _0x144a3a=this['editor'][_0x3274('0x11e')][_0x3274('0x5c')][_0x3274('0xdb')]('revision:'+_0x8c329a[_0x3274('0x26')]);_0x5423dc=Array[_0x3274('0x32')](_0x4d114f[_0x3274('0xae')][_0x3274('0xd6')](_0x144a3a['name']))[_0x3274('0xa6')](_0x113eae=>_0x4d114f[_0x3274('0x40')][_0x3274('0x2')][_0x3274('0x19')](_0x113eae))[_0x3274('0xa6')](_0x749092=>Array[_0x3274('0x32')](_0x749092[_0x3274('0xd1')]()))['flat']();}if(!this[_0x3274('0xe7')])return _0x5423dc[0x0];return _0x5423dc[_0x3274('0xc4')](_0x4a90bb=>_0x4a90bb[_0x3274('0xe6')]-0x3<=this['_activeViewTarget']['y']&&_0x4a90bb['bottom']+0x3>=this[_0x3274('0xe7')]['y']&&_0x4a90bb['left']-0x3<=this[_0x3274('0xe7')]['x']&&_0x4a90bb[_0x3274('0xd2')]+0x3>=this[_0x3274('0xe7')]['x'])||_0x5423dc[0x0];}}}),this[_0x3274('0xcf')]['showStack']('revisionHistoryLabel'));}),this['on'](_0x3274('0x10a'),(_0x44c0ec,_0x114e38,_0x3ac102,_0x7138d1)=>{this[_0x3274('0x8c')]=_0x3ac102?this[_0x3274('0xa9')](_0x3ac102):null,this[_0x3274('0x106')][_0x3274('0x11e')][_0x3274('0x73')](()=>{const _0x4f4b4c=this[_0x3274('0x106')]['editing'];_0x7138d1&&(_0x7138d1['data'][_0x3274('0x5b')]?_0x4f4b4c['view'][_0x3274('0x73')](_0x42455f=>{_0x42455f[_0x3274('0x2b')](_0x3274('0x87'),_0x4f4b4c[_0x3274('0x40')][_0x3274('0x117')][_0x3274('0xcd')](_0x7138d1['rootName']));}):_0x4f4b4c[_0x3274('0x93')]('revision:'+_0x7138d1['id'])),_0x3ac102&&(_0x3ac102[_0x3274('0x66')][_0x3274('0x5b')]?_0x4f4b4c[_0x3274('0x40')][_0x3274('0x73')](_0x4430c1=>{_0x4430c1['addClass'](_0x3274('0x87'),_0x4f4b4c[_0x3274('0x40')][_0x3274('0x117')][_0x3274('0xcd')](_0x3ac102[_0x3274('0xc9')]));}):_0x4f4b4c[_0x3274('0x93')](_0x3274('0x72')+_0x3ac102['id']));});}),this[_0x3274('0x96')](this[_0x3274('0x106')]['editing'][_0x3274('0x40')][_0x3274('0x117')],_0x3274('0x41'),(_0x59f392,_0x5d12b0)=>{if(this[_0x3274('0x28')])return;const _0x3f5d94=this[_0x3274('0xe5')](_0x5d12b0[_0x3274('0x8a')]),_0x284f78=this['_changeIdToChange'][_0x3274('0xdb')](_0x3f5d94);_0x284f78?(this[_0x3274('0xe7')]={'x':_0x5d12b0[_0x3274('0x29')]['x'],'y':_0x5d12b0[_0x3274('0x29')]['y']},this[_0x3274('0x8c')]=this[_0x3274('0xa9')](_0x284f78)):(this[_0x3274('0xe7')]=null,this[_0x3274('0x8c')]=null);}),this[_0x3274('0x96')](this['editor'][_0x3274('0xf6')][_0x3274('0x40')][_0x3274('0x117')],_0x3274('0x21'),(_0x35e3ec,_0x417f17)=>{const _0x143442=this['_findChangeIdFromDomTarget'](_0x417f17[_0x3274('0x8a')]),_0x35f93c=this[_0x3274('0xa4')][_0x3274('0xdb')](_0x143442);_0x35f93c?(this[_0x3274('0xe7')]={'x':_0x417f17[_0x3274('0x29')]['x'],'y':_0x417f17[_0x3274('0x29')]['y']},_0x35f93c===this[_0x3274('0x28')]?this[_0x3274('0xcf')][_0x3274('0xc0')]():this['activeChange']=_0x35f93c):(this[_0x3274('0xe7')]=null,this[_0x3274('0x28')]=null);});}[_0x3274('0xe5')](_0x28c01d){do{const _0x2b832f=_0x28c01d[_0x3274('0xa7')](_0x3274('0xdc'));if(_0x2b832f)return _0x2b832f;_0x28c01d=_0x28c01d[_0x3274('0x11a')];}while(_0x28c01d);return null;}[_0x3274('0x82')](){this[_0x3274('0x106')][_0x3274('0x11e')][_0x3274('0x73')](_0xfd469f=>{for(const _0xa93bcf of this[_0x3274('0x106')]['model'][_0x3274('0x5c')])_0xfd469f[_0x3274('0xbf')](_0xa93bcf);});}}function Y(_0x56ce1d,_0x3c8620){return(_0x6c8af3,_0x5ca7ae,_0x15f83e)=>{if(!_0x15f83e[_0x3274('0x3d')][_0x3274('0xa')](_0x5ca7ae[_0x3274('0x84')],_0x6c8af3[_0x3274('0x11')]))return;const _0x276189=_0x5ca7ae[_0x3274('0x84')]['getWalker'](),_0x29dd05=_0x5ca7ae[_0x3274('0x84')][_0x3274('0xa2')],_0x3da157=_0x56ce1d[_0x3274('0x11e')]['schema'];let _0xcbc0f1=null,_0x6d937=null,_0x1a8174=!0x1,_0x47b34d=!0x1;for(const _0x355f1d of _0x276189){const _0x2d0839=_0x355f1d[_0x3274('0x67')];_0x1a8174=_0x1a8174||_0x3da157[_0x3274('0x97')](_0x2d0839);const _0x136942=_0x15f83e[_0x3274('0xae')]['toViewElement'](_0x2d0839);if(_0x136942&&_0x136942['getCustomProperty'](_0x3274('0x5a')))return;_0x3274('0xaf')==_0x355f1d[_0x3274('0x33')]&&(_0x3da157[_0x3274('0x4')](_0x2d0839)&&!_0x3da157['isLimit'](_0x2d0839)&&(_0x2d0839[_0x3274('0x4f')]||_0x29dd05[_0x3274('0xe3')]?_0xcbc0f1&&_0xcbc0f1[_0x3274('0x11a')]==_0x2d0839||(_0xcbc0f1=_0x2d0839,_0x2cccd2(_0x355f1d[_0x3274('0x8')]),_0x47b34d=!0x0):_0x6d937=_0x6d937||_0x355f1d[_0x3274('0x8')]));}function _0x2cccd2(_0x3a0ddc){const _0x4d4da6=_0x15f83e['mapper'][_0x3274('0xf')](_0x3a0ddc),_0xe7e0d2=_0x15f83e[_0x3274('0x71')][_0x3274('0x6e')](_0x3274('0x10e'),{'class':_0x3274('0x55')+_0x3c8620});_0x15f83e[_0x3274('0x71')][_0x3274('0x111')](_0x4d4da6,_0xe7e0d2),_0x15f83e[_0x3274('0xae')][_0x3274('0x9b')](_0xe7e0d2,_0x5ca7ae[_0x3274('0xf3')]);}_0x1a8174||_0x47b34d||!_0x6d937||_0x2cccd2(_0x6d937);};}export class RestoreRevisionCommand extends _0x417964{constructor(_0x2e12af){super(_0x2e12af);const _0x1a6847=_0x2e12af[_0x3274('0x6d')]['get'](w);this['stopListening'](_0x2e12af,'change:isReadOnly'),this[_0x3274('0x4c')](_0x3274('0xef')),this[_0x3274('0x96')](_0x1a6847,_0x3274('0x80'),()=>this[_0x3274('0x85')]()),this['listenTo'](_0x1a6847,_0x3274('0xa8'),()=>this[_0x3274('0x85')]());}[_0x3274('0x69')](){const _0x3e8e67=this[_0x3274('0x106')],_0x77ff28=_0x3e8e67[_0x3274('0x6d')][_0x3274('0xdb')](w),_0x3dc2d2=_0x77ff28[_0x3274('0x116')]?_0x77ff28[_0x3274('0xf9')]['newRevisionId']:null;_0x3e8e67['config'][_0x3274('0xdb')]('revisionHistory')[_0x3274('0x108')](_0x3dc2d2);}[_0x3274('0x85')](){const {isReady:_0x851cd,isEnabled:_0x2903f3}=this['editor'][_0x3274('0x6d')][_0x3274('0xdb')](w);this[_0x3274('0x36')]=_0x851cd&&_0x2903f3;}}export class ShowChangeCommand extends _0x417964{constructor(_0x4c8fd5,{direction:_0x1fd63b}){super(_0x4c8fd5);const _0xf84e9e=_0x4c8fd5[_0x3274('0x6d')][_0x3274('0xdb')](w);this[_0x3274('0xff')](_0x4c8fd5,_0x3274('0x122')),this[_0x3274('0x4c')](_0x3274('0xef')),this[_0x3274('0xa0')]=_0x3274('0x1e')===_0x1fd63b?0x1:-0x1,this[_0x3274('0x96')](_0xf84e9e,_0x3274('0x80'),()=>this[_0x3274('0x85')]()),this[_0x3274('0x96')](_0xf84e9e,'change:isEnabled',()=>this['refresh']());}[_0x3274('0x69')](){const _0x4eed5=this[_0x3274('0x106')],_0x1cde3d=_0x4eed5[_0x3274('0x6d')][_0x3274('0xdb')](w),{isNavigationMode:_0x1203b8,currentChangeNumber:_0xfb01ce}=_0x1cde3d;let _0xb2fd23;if(_0x1cde3d['activeChange']=_0x1203b8?_0x1cde3d[_0x3274('0xf9')][_0x3274('0x124')][_0x3274('0xdb')](_0xfb01ce+this[_0x3274('0xa0')]):_0x1cde3d[_0x3274('0xf9')][_0x3274('0x124')]['first'],_0x1cde3d[_0x3274('0x28')][_0x3274('0x66')]['isOnRoot'])_0xb2fd23=_0x4eed5[_0x3274('0xf6')][_0x3274('0x40')][_0x3274('0x1f')](_0x1cde3d[_0x3274('0x28')]['rootName']);else{const _0x31f262=_0x4eed5['model'][_0x3274('0x5c')][_0x3274('0xdb')]('revision:'+_0x1cde3d[_0x3274('0x28')]['id']);_0xb2fd23=_0x917108(_0x4eed5[_0x3274('0xf6')],_0x31f262);}_0x1d4656({'target':_0xb2fd23,'viewportOffset':0x28});}[_0x3274('0x85')](){const {isNavigationMode:_0x57cfed,currentChangeNumber:_0x34999b,numberOfChanges:_0x35563e,isReady:_0x3a503a,isEnabled:_0x1a9fb5}=this[_0x3274('0x106')]['plugins'][_0x3274('0xdb')](w);this[_0x3274('0x36')]=!!(_0x1a9fb5&&_0x3a503a&&_0x35563e)&&(!_0x57cfed||(0x1===this[_0x3274('0xa0')]?_0x34999b<_0x35563e-0x1:_0x34999b>0x0));}}