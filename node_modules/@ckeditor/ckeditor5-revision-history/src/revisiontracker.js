/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x54b0=['_getFromVersion','_handleOperation','_revisionId','_bufferUpdate','_initialRevisionId','elementEnd','source','deletion','authorsIds','setRevisionData','get','version','requires','vid','getChild','_initialRoots','_reset','parse','history','getRevisionRootsAttributes','key','for','plugins','add','_cloneOperation','set','currentRevision','view','_calculateMetaData','stickiness','conversion','getRevision','type','getRange','insertionPosition','name','_transformMarkers','creatorId','addRevisionData','_appendChild','_pendingAction','getData','createRevision','path','rootName','slice','length','childCount','createPositionFromPath','createdAt','_operations','clone','pluginName','editing','_removeRevisionMarkers','config','revisionHistory.resumeUnsavedRevision','reverse','getAncestors','creator','diffData','addRootAttribute','data','addRevision','_copyMarkers','useFillerType','_markChanges','deletions','locale','editor-initial-data-replaced-with-revision-data','_setConversion','has','_handleMoveOperation','_handleInsertOperation','max','default','document','collaboration.channelId','marker','dataDowncast','nodes','_authorId','getWalker','_touched','_processRootBeforeSave','_getState','RevisionTracker','some','_startingVersion','_handleMarkerOperation','RevisionsRepository','newValue','_createFromRanges','revision:','getAttributes','revision-start','_generateTape','_handleMergeOperation','userId','model','_baseRootsAttributes','_touchedMarkers','children','getChildren','roots','_addPendingAction','range','updateRevisions','keys','upcast','_loadRevisionData','item','RealTimeCollaborationClient','affectsData','repository','from','getOperations','update','split','_update','text','_removePendingAction','_revisionDataBuilder','toVersion','loadState','offset','getTransformedByOperation','_setAttribute','addRoot','markerToData','_insertChild','_lastTo','map','_makeIdsRoot','_handleRootAttributeOperation','insert','_replaceEditorDataWithRevisionData','graveyardPosition','saveRevision','_source','NEGATIVE_INFINITY','_getBaseVids','_removeMetaData','filter','_isAttached','createPositionBefore','createRangeIn','define','authors','_prepareViewToSave','getLatestVersion','attributesAfter','getUser','$text','baseVersion','_startingRevisionId','offsetSize','vid_end','getRevisions','_makeRevision','_createInitialRevision','position','targetPosition','createPositionAfter','_isPendingUpdate','getCurrentRevisionId','_loadedStateData','_diffRoots','rootsAttributes','remove','splitPosition','sendBufferedUpdates','isReady','insertions','_applyOperations','delete','markers','start','previousPosition','_loadState','_baseRoots','values','_getViewJson','PendingActions','parent','$graveyard','vid_start','Initial\x20revision','resolve','startsWith','insertion','root','attachChange','tableCell','reInit','documentFragment','includes','isAdd','marked','nodeAfter','getRootNames','string','_getVidAttributeName','_saveMetaData','Empty\x20document','createPositionAt','_continueCurrentRevision','editor','reinsert','initial','_diffRootsAttributes','_baseIdsRoots','getAttribute','fromVersion','_fixRange','push','newRange','_fixPosition','_idsRoots','_getPreviousFrom','dataToMarker','_createCurrentRevision','buildRevisionData','Users','find','_fixOperation','getRoot','forEach','_findInsertionIndex','_execute','paragraph','getNodeByPath','getMovedRangeStart','revision','getTime','getRevisionDocumentData','_savedMetaData','move','clear','_makeModelFromViewString','element','size','toModel','_lastFrom','keepParagraph','isAttached','attributes','end','data-revision-','elementStart','processor','initialData','_handleSplitOperation','_markers','then','adapter','_touchedRoots','oldRange','createRange','shift','isEnabled','_handleRootOperation','_bufferedUpdates'];(function(_0x4e1d9c,_0x54b046){const _0x2e0382=function(_0x251664){while(--_0x251664){_0x4e1d9c['push'](_0x4e1d9c['shift']());}};_0x2e0382(++_0x54b046);}(_0x54b0,0x1ac));const _0x2e03=function(_0x4e1d9c,_0x54b046){_0x4e1d9c=_0x4e1d9c-0x0;let _0x2e0382=_0x54b0[_0x4e1d9c];return _0x2e0382;};import{Users as _0x215de0}from'ckeditor5-collaboration/src/collaboration-core';import{Plugin as _0x367a74,PendingActions as _0x7fb05a}from'ckeditor5/src/core';import{logWarning as _0x191f0f,uid as _0x3c0177}from'ckeditor5/src/utils';import{Position as _0x5e3514,Range as _0x3f86f7,Element as _0x1692b2,DocumentFragment as _0x3273da,ViewText as _0x1e2bf1,ViewElement as _0x8dac77,ViewContainerElement as _0x56c3ab,ViewAttributeElement as _0x199011,ViewEmptyElement as _0x3b2003,ViewRawElement as _0xf71056,ViewUIElement as _0x59da95,ViewDocumentFragment as _0x3c9387}from'ckeditor5/src/engine';import _0x4a8dbd from'./revisionsrepository';import{getTranslation as _0x557fb8}from'./utils/common-translations';import{cloneDeep as _0x4eb609,isEqual as _0x182be6}from'lodash-es';const j={'c':_0x56c3ab,'a':_0x199011,'e':_0x3b2003,'r':_0xf71056,'u':_0x59da95};export default class l extends _0x367a74{static get[_0x2e03('0x96')](){return _0x2e03('0xb8');}static get[_0x2e03('0x6e')](){return[_0x215de0,_0x4a8dbd,_0x7fb05a];}constructor(_0x5394a0){super(_0x5394a0),this[_0x2e03('0x5a')]=null,this[_0x2e03('0x7c')]=null,this[_0x2e03('0xdc')]=new T(this[_0x2e03('0x2a')]),this[_0x2e03('0x66')]=this[_0x2e03('0x2a')][_0x2e03('0x99')]['get']('collaboration.channelId')||_0x2e03('0x2c'),this['_bufferedUpdates']=new Map(),this[_0x2e03('0x1')]=null;const _0x357abf=_0x3c0177();this[_0x2e03('0xed')]={'history':this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xae')]['history'],'getLatestVersion':()=>Promise['resolve'](this[_0x2e03('0x2a')]['model'][_0x2e03('0xae')][_0x2e03('0x6d')]),'getCurrentRevisionId':()=>_0x357abf},this[_0x2e03('0x7b')](_0x2e03('0x7'),!0x1),this[_0x2e03('0x7b')](_0x2e03('0x5f'),!0x0),this[_0x2e03('0x7b')](_0x2e03('0x106'),!0x1),this[_0x2e03('0x2a')][_0x2e03('0x99')][_0x2e03('0xf5')](_0x2e03('0x9a'),!0x0),this[_0x2e03('0x2a')]['conversion'][_0x2e03('0x77')](_0x2e03('0xcf'))[_0x2e03('0x37')]({'view':'revision'});}['init'](){this[_0x2e03('0xd4')]=this['editor'][_0x2e03('0x78')][_0x2e03('0x6c')](_0x2e03('0xbc')),this[_0x2e03('0xa8')](),this[_0x2e03('0x2a')][_0x2e03('0xa0')]['on']('ready',()=>{const _0x369a86=this[_0x2e03('0xd4')]['getRevision'](0x0),_0x2d9ee6=_0x369a86&&null===_0x369a86[_0x2e03('0x9d')]?_0x369a86:null;if(this[_0x2e03('0x29')]=!!_0x2d9ee6&&this['editor']['config'][_0x2e03('0x6c')](_0x2e03('0x9a')),this[_0x2e03('0x2a')][_0x2e03('0x78')][_0x2e03('0xa9')](_0x2e03('0xd2'))){const _0x452a1f=this[_0x2e03('0xed')]['getCurrentRevisionId'](),_0x13dfe4=this['repository']['getRevision'](_0x452a1f);if(_0x13dfe4)this['_startingVersion']=_0x13dfe4[_0x2e03('0x30')],this[_0x2e03('0x29')]=!0x1;else{const _0x1e6e4a=this[_0x2e03('0xed')][_0x2e03('0x74')][_0x2e03('0x94')]['find'](_0x1d75dd=>!_0x1d75dd['_isInit']),_0x30c3d2=_0x1e6e4a?_0x1e6e4a[_0x2e03('0xfc')]:this[_0x2e03('0xed')][_0x2e03('0x74')][_0x2e03('0x6d')];_0x369a86?(_0x369a86['toVersion']<_0x30c3d2&&_0x369a86[_0x2e03('0xd9')]({'toVersion':_0x30c3d2}),this[_0x2e03('0x29')]?(this[_0x2e03('0xed')][_0x2e03('0x0')]=()=>_0x2d9ee6['id'],this[_0x2e03('0xba')]=_0x2d9ee6[_0x2e03('0x30')]):(this[_0x2e03('0xba')]=_0x369a86[_0x2e03('0xdd')],this['_continueCurrentRevision']=!0x1)):(this[_0x2e03('0xba')]=_0x30c3d2,this['_continueCurrentRevision']=!0x1);}}else _0x2d9ee6&&(this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xae')]['history'][_0x2e03('0x6d')]=Math[_0x2e03('0xac')](_0x2d9ee6[_0x2e03('0xdd')],this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xae')][_0x2e03('0x74')][_0x2e03('0x6d')]),_0x2d9ee6[_0x2e03('0x30')]===_0x2d9ee6[_0x2e03('0xdd')]?(0x0!==_0x2d9ee6[_0x2e03('0x30')]&&(this['_source'][_0x2e03('0x0')]=()=>_0x2d9ee6['id']),this[_0x2e03('0x29')]=!0x1):this['_continueCurrentRevision']&&(this[_0x2e03('0xed')][_0x2e03('0x0')]=()=>_0x2d9ee6['id'],this[_0x2e03('0xba')]=_0x2d9ee6[_0x2e03('0x30')])),this[_0x2e03('0x29')]||(this[_0x2e03('0xba')]=this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xae')][_0x2e03('0x6d')]);this[_0x2e03('0xdc')]['init'](this['_source'][_0x2e03('0x74')]),this['_createInitialRevision'](this[_0x2e03('0xba')]),this[_0x2e03('0x38')](this['_startingVersion']),this[_0x2e03('0x5a')]&&this[_0x2e03('0x6')]();}),this['bind']('isReady')['to'](this,_0x2e03('0x106'),_0x474f07=>!_0x474f07);}async['afterInit'](){if(this[_0x2e03('0xd4')][_0x2e03('0x90')]>0x0){const _0x295f73=this[_0x2e03('0xd4')]['getRevision'](0x0),_0x172b43=await this[_0x2e03('0x46')](_0x295f73),_0x1dc5a0=await this[_0x2e03('0x75')](_0x295f73);this[_0x2e03('0xea')](_0x172b43,_0x1dc5a0);}}['setSource'](_0x27cf3c){this[_0x2e03('0xed')]=_0x27cf3c;}async[_0x2e03('0xd7')](){const _0x4ac5c0=await this['_source'][_0x2e03('0xf8')]();if(_0x4ac5c0>this[_0x2e03('0x7c')][_0x2e03('0xdd')]){await this[_0x2e03('0xe')]();const _0x4c8ddf=this[_0x2e03('0x39')]({'revision':this[_0x2e03('0x7c')],'to':_0x4ac5c0});_0x4c8ddf[_0x2e03('0xf6')]=_0x4c8ddf[_0x2e03('0x6a')][_0x2e03('0xe6')](_0x3beb26=>this[_0x2e03('0x2a')][_0x2e03('0x78')][_0x2e03('0x6c')](_0x2e03('0x3a'))[_0x2e03('0xfa')](_0x3beb26)),this['currentRevision'][_0x2e03('0xd9')](_0x4c8ddf);}}async[_0x2e03('0xe')](){this[_0x2e03('0x29')]&&!this[_0x2e03('0x1')]&&(await this['_loadRevisionData'](this[_0x2e03('0x7c')]),this[_0x2e03('0xdc')][_0x2e03('0xde')](this[_0x2e03('0x7c')]),this[_0x2e03('0x1')]={'fromVersion':this[_0x2e03('0x7c')][_0x2e03('0x30')],'authors':this[_0x2e03('0x7c')]['authors'][_0x2e03('0x8f')]()});}async[_0x2e03('0xec')](_0x33b7e4={},_0x2f6114=null){const _0x23881b=[];await this['_loadState'](),this[_0x2e03('0x29')]=!0x1,_0x2f6114>this[_0x2e03('0x7c')][_0x2e03('0xdd')]&&(_0x2f6114=null),null===_0x2f6114&&(_0x2f6114=await this[_0x2e03('0xed')][_0x2e03('0xf8')]());const _0x59b2a5=this[_0x2e03('0x62')](_0x2f6114),_0x4801ad=this[_0x2e03('0x39')]({'from':_0x59b2a5,'to':_0x2f6114});if(this[_0x2e03('0x7c')][_0x2e03('0xdd')]<_0x2f6114){const _0x4326d0=this['buildRevisionData']({'revision':this[_0x2e03('0x7c')],'from':_0x2f6114,'to':_0x2f6114});_0x4326d0[_0x2e03('0xf6')]=[],_0x4326d0['authorsIds']=[],_0x4326d0['id']=this['currentRevision']['id'],this[_0x2e03('0x7c')][_0x2e03('0xd9')](_0x4326d0,!0x0),delete _0x4326d0[_0x2e03('0xf6')],_0x23881b[_0x2e03('0x32')](_0x4326d0);}_0x33b7e4[_0x2e03('0x87')]=this[_0x2e03('0x2a')]['plugins'][_0x2e03('0x6c')]('Users')['me']['id'],_0x33b7e4['name']=_0x33b7e4[_0x2e03('0x85')]||null,_0x33b7e4['id']=_0x33b7e4['id']||_0x3c0177(),_0x33b7e4={..._0x33b7e4,..._0x4801ad};const _0x32e2cd=this['addRevisionData'](_0x33b7e4);_0x23881b[_0x2e03('0x32')](_0x33b7e4);const _0x26b970=this['repository']['getIndex'](_0x32e2cd);if(0x0!==_0x26b970){const _0x51cd25=this['repository'][_0x2e03('0x81')](_0x26b970-0x1);if(_0x51cd25['fromVersion']!==_0x2f6114){const _0x1fb19a=this['_revisionDataBuilder']['getData'](_0x2f6114,_0x51cd25[_0x2e03('0xdd')]),_0x26b91c={'id':_0x51cd25['id'],'diffData':_0x1fb19a[_0x2e03('0x9e')],'authorsIds':_0x1fb19a['authorsIds'],'authors':_0x1fb19a[_0x2e03('0x6a')][_0x2e03('0xe6')](_0x3dfe8c=>this['editor']['plugins']['get'](_0x2e03('0x3a'))[_0x2e03('0xfa')](_0x3dfe8c)),'fromVersion':_0x2f6114};_0x51cd25===this['currentRevision']&&(_0x26b91c[_0x2e03('0x93')]=new Date(_0x33b7e4['createdAt'][_0x2e03('0x45')]()+0xa)),_0x51cd25['_update'](_0x26b91c,!0x0),delete _0x26b91c[_0x2e03('0xf6')],_0x23881b['push'](_0x26b91c);}}if(this[_0x2e03('0x5a')]){for(const _0x2cc1ec of _0x23881b)this[_0x2e03('0x65')](_0x2cc1ec['id'],_0x2cc1ec,!0x0);this[_0x2e03('0x6')]();}return _0x32e2cd;}['addRevisionData'](_0x5a3d70){const _0xb2acf7=this[_0x2e03('0xd4')][_0x2e03('0x8c')](_0x5a3d70);return this[_0x2e03('0x5a')]&&_0xb2acf7['on']('_update',(_0x26d7cc,_0x31cd5d,_0x5992fb)=>{_0x5992fb||(this[_0x2e03('0x65')](_0x31cd5d['id'],_0x31cd5d,!0x0),this[_0x2e03('0x6')]());}),this[_0x2e03('0xd4')][_0x2e03('0xa1')](_0xb2acf7,this[_0x2e03('0x3f')](_0xb2acf7)),_0xb2acf7;}async[_0x2e03('0x46')](_0x5e0bc0){await this[_0x2e03('0xd0')](_0x5e0bc0);const _0x3db305={};for(const _0x2c1cbd in _0x5e0bc0['diffData']){if(_0x5e0bc0[_0x2e03('0x9e')][_0x2c1cbd][_0x2e03('0x1b')]&&!_0x5e0bc0['diffData'][_0x2c1cbd]['attachChange'][_0x2e03('0x50')])continue;const _0x5a1d61=this[_0x2e03('0x98')](JSON['parse'](_0x5e0bc0['diffData'][_0x2c1cbd]['insertions'])),_0x6dc965=this['editor']['editing']['view']['document'],_0x1f8943=new _0x3c9387(_0x6dc965,_0x5a1d61[_0x2e03('0xe6')](_0x50d3ea=>F(_0x50d3ea,this[_0x2e03('0x2a')])));this[_0x2e03('0x2a')]['data'][_0x2e03('0x55')][_0x2e03('0xa3')](_0x2e03('0x21')),_0x3db305[_0x2c1cbd]=this['editor'][_0x2e03('0xa0')]['processor']['toData'](_0x1f8943),this['editor'][_0x2e03('0xa0')][_0x2e03('0x55')]['useFillerType'](_0x2e03('0xad'));}return _0x3db305;}async[_0x2e03('0x75')](_0x426974){await this[_0x2e03('0xd0')](_0x426974);const _0x82fbc0={};for(const _0x3c4053 in _0x426974['diffData'])_0x426974[_0x2e03('0x9e')][_0x3c4053][_0x2e03('0x1b')]&&!_0x426974[_0x2e03('0x9e')][_0x3c4053]['attachChange'][_0x2e03('0x50')]||(_0x82fbc0[_0x3c4053]=_0x426974[_0x2e03('0x9e')][_0x3c4053][_0x2e03('0xf9')]);return _0x82fbc0;}[_0x2e03('0x6')](){if(0x0===this['_bufferedUpdates']['size'])return;if(this[_0x2e03('0x106')])return;let _0x2709e9=Array[_0x2e03('0xd5')](this[_0x2e03('0x61')]['values']());this[_0x2e03('0x61')][_0x2e03('0x49')]();for(let _0x32f776=0x0;_0x32f776<_0x2709e9[_0x2e03('0x90')];_0x32f776++){const _0x47f8e9=_0x2709e9[_0x32f776];let _0x5278af=!0x1;for(const _0x1da10b of Object['keys'](_0x47f8e9))void 0x0===_0x47f8e9[_0x1da10b]?delete _0x47f8e9[_0x1da10b]:'id'!==_0x1da10b&&(_0x5278af=!0x0);_0x5278af||(_0x2709e9[_0x32f776]=null);}if(_0x2709e9=_0x2709e9[_0x2e03('0xf1')](_0xff24ff=>null!==_0xff24ff),!_0x2709e9['length'])return;for(let _0x4da575=0x0;_0x4da575<_0x2709e9[_0x2e03('0x90')];_0x4da575++){const _0x3ec4b0=_0x2709e9[_0x4da575];void 0x0!==_0x3ec4b0['fromVersion']&&void 0x0===_0x3ec4b0[_0x2e03('0xdd')]&&(_0x3ec4b0[_0x2e03('0xdd')]=this['repository'][_0x2e03('0x81')](_0x3ec4b0['id'])[_0x2e03('0xdd')]),void 0x0!==_0x3ec4b0[_0x2e03('0xdd')]&&void 0x0===_0x3ec4b0[_0x2e03('0x30')]&&(_0x3ec4b0[_0x2e03('0x30')]=this[_0x2e03('0xd4')][_0x2e03('0x81')](_0x3ec4b0['id'])[_0x2e03('0x30')]);}const _0x1ad6a2=this['editor']['config'][_0x2e03('0x6c')]('collaboration.channelId');this[_0x2e03('0x106')]=!0x0,this[_0x2e03('0xcb')](),this[_0x2e03('0x5a')][_0x2e03('0xcd')](_0x2709e9,_0x1ad6a2)['finally'](()=>{this[_0x2e03('0x106')]=!0x1;})[_0x2e03('0x59')](_0xd2024d=>{if(_0xd2024d)for(const _0xb0e1f2 of _0xd2024d)this[_0x2e03('0x6b')]({'id':_0xb0e1f2['id'],'createdAt':_0xb0e1f2[_0x2e03('0x93')]});this[_0x2e03('0xdb')](),this[_0x2e03('0x6')]();});}[_0x2e03('0xea')](_0x34be8e,_0x33ae59){let _0x1cddf7=this[_0x2e03('0x2a')][_0x2e03('0x99')][_0x2e03('0x6c')](_0x2e03('0x56')),_0x8fbcac=this['editor'][_0x2e03('0x99')]['get'](_0x2e03('0x3'));if(void 0x0===_0x1cddf7){_0x1cddf7={};for(const _0x416376 of this[_0x2e03('0x2a')][_0x2e03('0xc5')]['document'][_0x2e03('0x23')]())_0x1cddf7[_0x416376]='';}if(_0x2e03('0x24')==typeof _0x1cddf7&&(_0x1cddf7={'main':_0x1cddf7}),void 0x0===_0x8fbcac){_0x8fbcac={};for(const _0x85bc1 of this[_0x2e03('0x2a')]['model'][_0x2e03('0xae')]['getRootNames']())_0x8fbcac[_0x85bc1]={};}let _0x7f9a14=!0x1;const _0x149bc0=Object[_0x2e03('0xce')](_0x1cddf7),_0x17c4a1=Object[_0x2e03('0xce')](_0x34be8e);for(const _0x4fc202 of _0x149bc0){if(_0x1cddf7[_0x4fc202]!==_0x34be8e[_0x4fc202]&&''!==_0x1cddf7[_0x4fc202]['trim']()){_0x7f9a14=!0x0;break;}if(!_0x182be6(_0x8fbcac[_0x4fc202],_0x33ae59[_0x4fc202])&&Object[_0x2e03('0xce')](_0x8fbcac[_0x4fc202])[_0x2e03('0x90')]>0x0){_0x7f9a14=!0x0;break;}}_0x7f9a14||(_0x7f9a14=_0x17c4a1[_0x2e03('0xb9')](_0x3c85e3=>!_0x149bc0[_0x2e03('0x1f')](_0x3c85e3))),_0x7f9a14&&_0x191f0f(_0x2e03('0xa7'),{'editorData':_0x1cddf7,'editorRootsAttributes':_0x8fbcac,'revisionData':_0x34be8e,'revisionRootsAttributes':_0x33ae59}),this[_0x2e03('0x2a')][_0x2e03('0x99')][_0x2e03('0x7b')]('initialData',_0x34be8e),this[_0x2e03('0x2a')][_0x2e03('0x99')][_0x2e03('0x7b')](_0x2e03('0x3'),_0x33ae59);}['_addPendingAction'](){if(!this[_0x2e03('0x8a')]){const _0x15d535=this[_0x2e03('0x2a')][_0x2e03('0x78')][_0x2e03('0x6c')](_0x2e03('0x12'));this['_pendingAction']=_0x15d535[_0x2e03('0x79')](_0x557fb8(this[_0x2e03('0x2a')][_0x2e03('0xa6')],'PENDING_ACTION_REVISION_HISTORY'));}}[_0x2e03('0xdb')](){this[_0x2e03('0x8a')]&&(this[_0x2e03('0x2a')][_0x2e03('0x78')][_0x2e03('0x6c')]('PendingActions')['remove'](this[_0x2e03('0x8a')]),this[_0x2e03('0x8a')]=null);}[_0x2e03('0x3f')](_0x2403a7){const _0xcfb68c=this['repository'][_0x2e03('0x100')]();_0xcfb68c[_0x2e03('0x9b')]();let _0x5a9ba5=0x0;for(;_0x5a9ba5<_0xcfb68c[_0x2e03('0x90')];){const _0x48c3f9=_0xcfb68c[_0x5a9ba5];if(_0x48c3f9===this[_0x2e03('0x7c')]){_0x5a9ba5++;continue;}if(_0x48c3f9['id']===this['_initialRevisionId'])break;const _0x32b39c=_0x2403a7[_0x2e03('0xdd')]-_0x48c3f9[_0x2e03('0xdd')]||_0x2403a7[_0x2e03('0x30')]-_0x48c3f9[_0x2e03('0x30')];if(_0x32b39c>0x0)break;if(_0x32b39c<0x0)_0x5a9ba5++;else{if(!_0x2403a7[_0x2e03('0x9d')]&&_0x48c3f9['creator'])break;if(_0x48c3f9['creator']||!_0x2403a7[_0x2e03('0x9d')]){if(_0x2403a7['createdAt']>_0x48c3f9[_0x2e03('0x93')])break;_0x5a9ba5++;}else _0x5a9ba5++;}}return _0x5a9ba5;}[_0x2e03('0x6b')](_0x1f5e51){const _0x4c9745=this[_0x2e03('0xd4')]['getRevision'](_0x1f5e51['id']);if(_0x1f5e51[_0x2e03('0x93')]&&(_0x1f5e51[_0x2e03('0x93')]=new Date(_0x1f5e51[_0x2e03('0x93')])),_0x1f5e51[_0x2e03('0x6a')]){const _0x2662a3=this[_0x2e03('0x2a')]['plugins'][_0x2e03('0x6c')](_0x2e03('0x3a'));_0x1f5e51[_0x2e03('0xf6')]=_0x1f5e51['authorsIds'][_0x2e03('0xe6')](_0x2d2dd3=>_0x2662a3[_0x2e03('0xfa')](_0x2d2dd3));}_0x4c9745[_0x2e03('0xd9')](_0x1f5e51,!0x0);}[_0x2e03('0x39')]({revision:_0x368a60=null,from:_0x3b5f41=null,to:_0x24cf8e=null}){_0x3b5f41=null!==_0x3b5f41?_0x3b5f41:_0x368a60[_0x2e03('0x30')],_0x24cf8e=null!==_0x24cf8e?_0x24cf8e:_0x368a60[_0x2e03('0xdd')];const _0x3c6c12=this['_revisionDataBuilder']['getData'](_0x3b5f41,_0x24cf8e),_0x28c1f3={'diffData':_0x3c6c12[_0x2e03('0x9e')],'authorsIds':_0x3c6c12['authorsIds'],'fromVersion':_0x3b5f41,'toVersion':_0x24cf8e};if(!_0x368a60||_0x24cf8e!==_0x368a60[_0x2e03('0xdd')]){const _0x48ca39=_0x24cf8e-0x1,_0x39ded5=this[_0x2e03('0xed')]['history']['getOperation'](_0x48ca39);_0x28c1f3[_0x2e03('0x93')]=_0x39ded5&&_0x39ded5['createdAt']||new Date();}if(this[_0x2e03('0x1')]&&_0x3b5f41===this['_loadedStateData'][_0x2e03('0x30')])for(const _0x136d73 of this[_0x2e03('0x1')][_0x2e03('0xf6')])_0x28c1f3[_0x2e03('0x6a')][_0x2e03('0x1f')](_0x136d73['id'])||_0x28c1f3['authorsIds']['push'](_0x136d73['id']);return _0x28c1f3;}[_0x2e03('0xd0')](_0xbf8a28){if(!_0xbf8a28||_0xbf8a28['diffData'])return Promise[_0x2e03('0x17')]();{const _0x31ff8c=this[_0x2e03('0x2a')][_0x2e03('0x99')][_0x2e03('0x6c')](_0x2e03('0xaf'));return this['adapter']['getRevision']({'channelId':_0x31ff8c,'revisionId':_0xbf8a28['id']})[_0x2e03('0x59')](_0x2f5ea0=>{_0xbf8a28[_0x2e03('0x9e')]=_0x2f5ea0[_0x2e03('0x9e')];});}}[_0x2e03('0x65')](_0x43acab,_0x9fce97,_0x621af3){if(this[_0x2e03('0x61')][_0x2e03('0xa9')](_0x43acab)){const _0xdfa725=this['_bufferedUpdates'][_0x2e03('0x6c')](_0x43acab);_0x9fce97=_0x621af3?{..._0xdfa725,..._0x9fce97}:{..._0x9fce97,..._0xdfa725};}this['_bufferedUpdates'][_0x2e03('0x7b')](_0x43acab,_0x9fce97);}[_0x2e03('0x62')](_0x56fad0){const _0x2ad32d=this[_0x2e03('0xd4')][_0x2e03('0x100')]();_0x2ad32d[_0x2e03('0x9b')](),_0x2ad32d[_0x2e03('0x5e')]();const _0x5921b1=_0x2ad32d[_0x2e03('0x3b')](_0x387248=>_0x387248[_0x2e03('0xdd')]<=_0x56fad0)[_0x2e03('0xdd')];return _0x5921b1<this[_0x2e03('0xba')]?this['_startingVersion']:_0x5921b1;}[_0x2e03('0x102')](_0xa57434){const _0x35a821=this[_0x2e03('0xd4')][_0x2e03('0x81')](this[_0x2e03('0xd4')]['length']-0x1);if(_0x35a821)this['_initialRevisionId']=_0x35a821['id'];else{const _0x4bb1ab=!this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xae')][_0x2e03('0xca')][_0x2e03('0x3b')](_0x33d217=>this[_0x2e03('0x2a')][_0x2e03('0xc5')]['hasContent'](_0x33d217)),_0x5487e8=this[_0x2e03('0x2a')][_0x2e03('0x78')]['get'](_0x2e03('0x3a'))['me']['id'],_0x32cb46=_0x557fb8(this[_0x2e03('0x2a')][_0x2e03('0xa6')],_0x4bb1ab?_0x2e03('0x27'):_0x2e03('0x16'));this[_0x2e03('0x101')]({'from':_0xa57434,'to':_0xa57434,'id':this['_initialRevisionId'],'name':_0x32cb46,'creatorId':_0x5487e8});}}[_0x2e03('0x38')](_0x5da909){const _0x2a7353=this[_0x2e03('0xed')][_0x2e03('0x0')]();this[_0x2e03('0x7c')]=this[_0x2e03('0xd4')]['getRevision'](_0x2a7353),this['currentRevision']||(this[_0x2e03('0x7c')]=this[_0x2e03('0x101')]({'from':_0x5da909,'to':_0x5da909,'id':_0x2a7353,'name':'','creatorId':null}));}[_0x2e03('0x101')]({name:_0x55de17,from:_0x15e830,to:_0x3366bc,creatorId:_0x38ff72,id:_0x929cd7}){const _0x31b787=this[_0x2e03('0x39')]({'from':_0x15e830,'to':_0x3366bc});_0x31b787['name']=_0x55de17,_0x31b787[_0x2e03('0x87')]=_0x38ff72,_0x31b787['id']=_0x929cd7;const _0x350067=this[_0x2e03('0x88')](_0x31b787);return this[_0x2e03('0x5a')]&&this[_0x2e03('0x65')](_0x31b787['id'],_0x31b787,!0x0),_0x350067;}[_0x2e03('0xa8')](){this[_0x2e03('0x2a')][_0x2e03('0x80')][_0x2e03('0x77')](_0x2e03('0xb1'))[_0x2e03('0xe3')]({'model':_0x2e03('0x44')});}[_0x2e03('0x98')](_0x121bc1){return(_0x121bc1=_0x121bc1[_0x2e03('0xf1')](_0x2c03b6=>!_0x2c03b6['name']||_0x2e03('0xc1')!==_0x2c03b6[_0x2e03('0x85')]&&'revision-end'!==_0x2c03b6['name']))[_0x2e03('0x3e')](_0x256073=>{_0x2e03('0x24')!=typeof _0x256073&&(_0x256073[_0x2e03('0xc8')]=this[_0x2e03('0x98')](_0x256073[_0x2e03('0xc8')]),_0x256073[_0x2e03('0x51')]=_0x256073[_0x2e03('0x51')][_0x2e03('0xf1')](_0x33191b=>!_0x33191b[0x0]['startsWith'](_0x2e03('0x53'))));}),_0x121bc1;}}function F(_0x14b3ff,_0x1b9563){const _0x10a9b8=_0x1b9563[_0x2e03('0x97')][_0x2e03('0x7d')][_0x2e03('0xae')];if(_0x2e03('0x24')==typeof _0x14b3ff)return new _0x1e2bf1(_0x10a9b8,_0x14b3ff);{const _0x3a3e5b=_0x14b3ff['children'][_0x2e03('0xe6')](_0x3db31c=>F(_0x3db31c,_0x1b9563));return new(j[_0x14b3ff[(_0x2e03('0x82'))]]||_0x8dac77)(_0x10a9b8,_0x14b3ff[_0x2e03('0x85')],_0x14b3ff[_0x2e03('0x51')],_0x3a3e5b);}}class T{constructor(_0x26922f){this['editor']=_0x26922f,this['_savedMetaData']=new Map(),this[_0x2e03('0x4e')]=-0x1,this[_0x2e03('0xe5')]=-0x1,this['_markers']=new Map(),this[_0x2e03('0x2')]=new Map(),this[_0x2e03('0x2d')]=new Map(),this['_baseRoots']=new Map(),this[_0x2e03('0xc6')]=new Map(),this['_idsRoots']=new Map(),this['_baseIdsRoots']=new Map(),this[_0x2e03('0xb5')]=new Map(),this[_0x2e03('0xc7')]=new Map(),this[_0x2e03('0x5b')]=new Map(),this['_revisionId']=0x1,this['_initialRoots']=this[_0x2e03('0x2a')][_0x2e03('0xc5')]['document'][_0x2e03('0x23')](),this[_0x2e03('0x71')]['push']('$graveyard');}['init'](_0x176312){this[_0x2e03('0x68')]=_0x176312;const _0x442d90=new Map(),_0x395d50=new Map(),_0x3e4e5f=this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xae')][_0x2e03('0x23')](!0x0);_0x3e4e5f['push'](_0x2e03('0x14'));for(const _0x2bdab0 of _0x3e4e5f){const _0x185cac=this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xae')][_0x2e03('0x3d')](_0x2bdab0),_0x4a5f28=B(_0x185cac);_0x442d90[_0x2e03('0x7b')](_0x2bdab0,_0x4a5f28),_0x395d50['set'](_0x2bdab0,Object['fromEntries'](_0x185cac['getAttributes']()));}const _0x3c63bf=Array[_0x2e03('0xd5')](this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xb')])[_0x2e03('0xe6')](_0x42058b=>[_0x42058b[_0x2e03('0x85')],_0x42058b[_0x2e03('0x83')]()]),_0x451e75=this[_0x2e03('0x68')][_0x2e03('0x6d')];this['_saveMetaData'](_0x451e75,_0x442d90,_0x3c63bf,_0x395d50),this[_0x2e03('0xfd')]=this[_0x2e03('0x64')];const _0x52b0f6=new Map(),_0x181b0e=new Map();for(const _0x4400cf of this['_initialRoots']){const _0x99e4ae=J(_0x4400cf);_0x52b0f6[_0x2e03('0x7b')](_0x4400cf,_0x99e4ae),_0x181b0e[_0x2e03('0x7b')](_0x4400cf,{});}this[_0x2e03('0x26')](Number[_0x2e03('0xee')],_0x52b0f6,[],_0x181b0e);}[_0x2e03('0x8b')](_0x39f5a9,_0x1f1d38){if(this[_0x2e03('0x4e')]===_0x39f5a9&&this[_0x2e03('0xe5')]<=_0x1f1d38)this['_savedMetaData'][_0x2e03('0x4c')]>0x1&&this['_removeMetaData'](this[_0x2e03('0xe5')]),this['_applyOperations'](this[_0x2e03('0xe5')],_0x1f1d38,!0x0);else{if(!this['_savedMetaData']['has'](_0x39f5a9)){const _0x494078=this['_getPreviousFrom'](_0x39f5a9);this[_0x2e03('0x7e')](_0x494078,_0x39f5a9,!0x1);}this[_0x2e03('0x7e')](_0x39f5a9,_0x1f1d38,!0x0);}return this[_0x2e03('0x4e')]=_0x39f5a9,this[_0x2e03('0xe5')]=_0x1f1d38,this['_getState']();}['loadState'](_0x4f80d2){this[_0x2e03('0x72')](),this[_0x2e03('0x4e')]=_0x4f80d2[_0x2e03('0x30')],this[_0x2e03('0xe5')]=_0x4f80d2[_0x2e03('0xdd')];for(const _0x2203d4 in _0x4f80d2[_0x2e03('0x9e')]){const _0x5de2f1=_0x4f80d2[_0x2e03('0x9e')][_0x2203d4][_0x2e03('0x1b')],_0x3427dc=_0x4eb609(_0x4f80d2[_0x2e03('0x9e')][_0x2203d4]['attributesBefore'])||{},_0x1a3755=this[_0x2e03('0x4a')](_0x4f80d2[_0x2e03('0x9e')][_0x2203d4][_0x2e03('0xa5')]);_0x1a3755[_0x2e03('0x8e')]=_0x2203d4,_0x1a3755['_isAttached']=!_0x5de2f1||!_0x5de2f1[_0x2e03('0x50')],_0x1a3755[_0x2e03('0x50')]=()=>_0x1a3755[_0x2e03('0xf2')],this[_0x2e03('0xf')][_0x2e03('0x7b')](_0x2203d4,_0x1a3755),this['_baseRootsAttributes'][_0x2e03('0x7b')](_0x2203d4,_0x3427dc),_0x5de2f1&&this[_0x2e03('0x5b')][_0x2e03('0x7b')](_0x2203d4,_0x5de2f1);const _0x40e0f6=this['_makeIdsRoot'](_0x1a3755);this[_0x2e03('0x2e')][_0x2e03('0x7b')](_0x2203d4,_0x40e0f6);for(const [_0xbb13a4,_0x2ee617]of _0x1a3755[_0x2e03('0xb')]){if(!_0xbb13a4[_0x2e03('0x18')](_0x2e03('0xbf')))continue;const _0xb784ec=_0xbb13a4[_0x2e03('0xd8')](':')[0x2];for(const _0x23bc8 of _0x2ee617['getWalker']({'singleCharacters':!0x0})){const _0xbfb1ba=this['_getVidAttributeName'](_0x23bc8),_0x9bc31='elementEnd'==_0x23bc8['type']?_0x23bc8[_0x2e03('0xd')]['path'][_0x2e03('0x8f')](0x0,-0x1):_0x23bc8[_0x2e03('0xd')][_0x2e03('0x8d')],_0x2f9da6=_0x40e0f6[_0x2e03('0x42')](_0x9bc31)[_0x2e03('0x2f')](_0xbfb1ba);this[_0x2e03('0xb5')][_0x2e03('0x7b')](_0x2f9da6,{'userId':_0xb784ec});}}}this[_0x2e03('0xfd')]=this[_0x2e03('0x64')];const _0x3cb52d=[...Array(this[_0x2e03('0x64')])[_0x2e03('0xce')]()][_0x2e03('0x8f')](0x1)[_0x2e03('0xf1')](_0x45b073=>!this[_0x2e03('0xb5')][_0x2e03('0xa9')](_0x45b073));let _0x273805=0x0;const _0x28b283=new Map();for(const _0x387abe in _0x4f80d2['diffData']){const _0x3dfe85=_0x4f80d2[_0x2e03('0x9e')][_0x387abe][_0x2e03('0x1b')],_0x5750d1=_0x4eb609(_0x4f80d2[_0x2e03('0x9e')][_0x387abe][_0x2e03('0xf9')])||{},_0x139fe0=this[_0x2e03('0x4a')](_0x4f80d2[_0x2e03('0x9e')][_0x387abe]['insertions']);_0x139fe0['rootName']=_0x387abe,_0x139fe0[_0x2e03('0xf2')]=!_0x3dfe85||_0x3dfe85[_0x2e03('0x50')],_0x139fe0[_0x2e03('0x50')]=()=>_0x139fe0[_0x2e03('0xf2')],this[_0x2e03('0x2')][_0x2e03('0x7b')](_0x387abe,_0x139fe0),this[_0x2e03('0x2d')][_0x2e03('0x7b')](_0x387abe,_0x5750d1);const _0x4d3d4b=this['_makeIdsRoot'](_0x139fe0,Number[_0x2e03('0xee')]);this[_0x2e03('0x35')][_0x2e03('0x7b')](_0x387abe,_0x4d3d4b),_0x28b283[_0x2e03('0x7b')](_0x387abe,_0x139fe0[_0x2e03('0x50')]()?_0x5750d1:{});for(const [_0x2a26e1,_0x19cf66]of _0x139fe0[_0x2e03('0xb')]){if(!_0x2a26e1[_0x2e03('0x18')](_0x2e03('0xbf')))continue;const _0x218f05=_0x2a26e1[_0x2e03('0xd8')](':')[0x2];for(const _0x396959 of _0x19cf66[_0x2e03('0xb4')]({'singleCharacters':!0x0})){const _0x5baaad=this[_0x2e03('0x25')](_0x396959),_0x11ab7e=this[_0x2e03('0x64')]++,_0x34d5be='elementEnd'==_0x396959[_0x2e03('0x82')]?_0x396959[_0x2e03('0xd')][_0x2e03('0x8d')][_0x2e03('0x8f')](0x0,-0x1):_0x396959[_0x2e03('0xd')][_0x2e03('0x8d')];_0x4d3d4b['getNodeByPath'](_0x34d5be)[_0x2e03('0xe1')](_0x5baaad,_0x11ab7e),this[_0x2e03('0xb5')][_0x2e03('0x7b')](_0x11ab7e,{'userId':_0x218f05});}}for(const _0x32a7af of this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0xf4')](_0x139fe0)[_0x2e03('0xb4')]({'singleCharacters':!0x0})){const _0x323250=this[_0x2e03('0x25')](_0x32a7af),_0x46e7c3=_0x2e03('0x67')==_0x32a7af['type']?_0x32a7af[_0x2e03('0xd')][_0x2e03('0x8d')]['slice'](0x0,-0x1):_0x32a7af[_0x2e03('0xd')][_0x2e03('0x8d')],_0x492e3=_0x4d3d4b[_0x2e03('0x42')](_0x46e7c3);_0x492e3[_0x2e03('0x2f')](_0x323250)>0x0||_0x492e3['_setAttribute'](_0x323250,_0x3cb52d[_0x273805++]);}for(const [_0x157f2f,_0x265e7a]of _0x139fe0[_0x2e03('0xb')])_0x157f2f[_0x2e03('0x18')](_0x2e03('0xbf'))||this[_0x2e03('0x58')][_0x2e03('0x7b')](_0x157f2f,_0x265e7a);}const _0x92f84c=J(_0x2e03('0x14'));this[_0x2e03('0xf')][_0x2e03('0x7b')](_0x2e03('0x14'),_0x92f84c),this[_0x2e03('0x2e')]['set']('$graveyard',this[_0x2e03('0xe7')](_0x92f84c,0x1));const _0x3e17a8=J(_0x2e03('0x14'));this[_0x2e03('0x2')][_0x2e03('0x7b')](_0x2e03('0x14'),_0x3e17a8),this[_0x2e03('0x35')][_0x2e03('0x7b')]('$graveyard',this['_makeIdsRoot'](_0x3e17a8,0x1));const _0xef1129=Array[_0x2e03('0xd5')](this[_0x2e03('0x2')])[_0x2e03('0xe6')](([_0x2332a2,_0x38cd17])=>[_0x2332a2,B(_0x38cd17)]);this[_0x2e03('0x26')](this[_0x2e03('0xe5')],_0xef1129,this['_markers'],_0x28b283);}[_0x2e03('0x4a')](_0x1ad7b8){const _0xbc2839=JSON[_0x2e03('0x73')](_0x1ad7b8),_0x16f60d=this['editor'][_0x2e03('0x97')][_0x2e03('0x7d')][_0x2e03('0xae')],_0x1e4fc9=new _0x3c9387(_0x16f60d,_0xbc2839[_0x2e03('0xe6')](_0x415f5e=>F(_0x415f5e,this[_0x2e03('0x2a')])));return this[_0x2e03('0x2a')]['data'][_0x2e03('0x4d')](_0x1e4fc9);}[_0x2e03('0x26')](_0x579f11,_0x2b9a75,_0x49e127,_0x3d89a4){const _0x1ab742=new Map(_0x2b9a75),_0x29c648=new Map(_0x4eb609(_0x3d89a4)),_0x2c4845=new Map();for(const [_0x426e3b,_0xb33fb8]of _0x49e127)_0x2c4845['set'](_0x426e3b,{'start':_0xb33fb8[_0x2e03('0xc')][_0x2e03('0x95')](),'end':_0xb33fb8[_0x2e03('0x52')][_0x2e03('0x95')](),'rootName':_0xb33fb8[_0x2e03('0x1a')][_0x2e03('0x8e')]});this[_0x2e03('0x47')][_0x2e03('0x7b')](_0x579f11,{'roots':_0x1ab742,'markers':_0x2c4845,'rootsAttributes':_0x29c648});}[_0x2e03('0xf0')](_0x364cc1){this[_0x2e03('0x47')]['delete'](_0x364cc1);}[_0x2e03('0x1d')](){this[_0x2e03('0x72')](),this['_lastFrom']=-0x1,this['_lastTo']=-0x1,this[_0x2e03('0x47')][_0x2e03('0x49')](),this['init'](this['source']);}['_reset'](){this[_0x2e03('0xb5')][_0x2e03('0x49')](),this['_touchedMarkers'][_0x2e03('0x49')](),this[_0x2e03('0x5b')][_0x2e03('0x49')](),this[_0x2e03('0x2')][_0x2e03('0x49')](),this[_0x2e03('0x2d')][_0x2e03('0x49')](),this['_baseRoots']['clear'](),this[_0x2e03('0xc6')][_0x2e03('0x49')](),this[_0x2e03('0x35')][_0x2e03('0x49')](),this['_baseIdsRoots'][_0x2e03('0x49')](),this[_0x2e03('0x58')][_0x2e03('0x49')](),this['_revisionId']=0x1,this['_startingRevisionId']=this[_0x2e03('0x64')];}[_0x2e03('0xe7')](_0x18ad0d,_0x6f4bbc=null){let _0x2246c4=null;_0x18ad0d['is'](_0x2e03('0x1e'))||(_0x2246c4=new _0x1692b2(_0x18ad0d[_0x2e03('0x85')],{'vid_start':null===_0x6f4bbc?this[_0x2e03('0x64')]++:_0x6f4bbc++}));const _0x3bd790=[];for(const _0x2a9b7d of _0x18ad0d[_0x2e03('0xc9')]())if(_0x2a9b7d['is'](_0x2e03('0x4b'))){_0x3bd790[_0x2e03('0x32')](this['_makeIdsRoot'](_0x2a9b7d,_0x6f4bbc));const _0x2f5d93=_0x3bd790[_0x3bd790[_0x2e03('0x90')]-0x1];null!==_0x6f4bbc&&(_0x6f4bbc=_0x2f5d93['is']('element','$text')?_0x2f5d93['getAttribute'](_0x2e03('0x6f'))+0x1:_0x2f5d93[_0x2e03('0x2f')](_0x2e03('0xff'))+0x1);}else for(let _0x2e8058=0x0;_0x2e8058<_0x2a9b7d[_0x2e03('0xfe')];_0x2e8058++)_0x3bd790[_0x2e03('0x32')](new _0x1692b2(_0x2e03('0xfb'),{'vid':null===_0x6f4bbc?this[_0x2e03('0x64')]++:_0x6f4bbc++}));if(_0x18ad0d['is'](_0x2e03('0x1e'))){const _0x5c7774=J(_0x18ad0d[_0x2e03('0x8e')]);return _0x5c7774[_0x2e03('0xe4')](0x0,_0x3bd790),_0x5c7774;}return _0x2246c4['_setAttribute'](_0x2e03('0xff'),null===_0x6f4bbc?this[_0x2e03('0x64')]++:_0x6f4bbc++),_0x2246c4[_0x2e03('0xe4')](0x0,_0x3bd790),_0x2246c4;}[_0x2e03('0x7e')](_0x5c37af,_0x472630,_0x461b9d){this[_0x2e03('0x72')]();const {roots:_0x266e72,markers:_0x21dbce,rootsAttributes:_0x58dd60}=this[_0x2e03('0x47')][_0x2e03('0x6c')](_0x5c37af);this[_0x2e03('0xf')]=new Map(_0x266e72),this[_0x2e03('0xc6')]=new Map(_0x4eb609(_0x58dd60));for(const [_0x1ee333,_0x168fa4]of this[_0x2e03('0xf')])if('$graveyard'!==_0x1ee333&&(this[_0x2e03('0x2')][_0x2e03('0x7b')](_0x1ee333,B(_0x168fa4)),this[_0x2e03('0x2d')]=new Map(_0x4eb609(_0x58dd60)),_0x461b9d)){const _0x1a8444=this[_0x2e03('0x64')];this[_0x2e03('0x35')][_0x2e03('0x7b')](_0x1ee333,this[_0x2e03('0xe7')](_0x168fa4)),this['_baseIdsRoots'][_0x2e03('0x7b')](_0x1ee333,this[_0x2e03('0xe7')](_0x168fa4,_0x1a8444));}this['_startingRevisionId']=this['_revisionId'],this[_0x2e03('0x2')][_0x2e03('0x7b')](_0x2e03('0x14'),B(this[_0x2e03('0xf')][_0x2e03('0x6c')](_0x2e03('0x14')))),_0x461b9d&&this[_0x2e03('0x35')][_0x2e03('0x7b')](_0x2e03('0x14'),this[_0x2e03('0xe7')](this[_0x2e03('0xf')]['get'](_0x2e03('0x14'))));for(const [_0x3707c7,_0x34718d]of _0x21dbce){const _0x432b98=this[_0x2e03('0xf')][_0x2e03('0x6c')](_0x34718d[_0x2e03('0x8e')]),_0x4f8a89=this[_0x2e03('0x2')][_0x2e03('0x6c')](_0x34718d[_0x2e03('0x8e')]),_0x13b944=new _0x3f86f7(this['_fixPosition'](_0x34718d['start'],_0x432b98),this['_fixPosition'](_0x34718d[_0x2e03('0x52')],_0x432b98)),_0x4d008b=this[_0x2e03('0x31')](_0x13b944,_0x4f8a89);_0x432b98['markers'][_0x2e03('0x7b')](_0x3707c7,_0x13b944),this['_markers'][_0x2e03('0x7b')](_0x3707c7,_0x4d008b);}this[_0x2e03('0x9')](_0x5c37af,_0x472630,_0x461b9d);}[_0x2e03('0x9')](_0x24808d,_0x113e14,_0x3a513b){for(const _0x50802c of this[_0x2e03('0x68')][_0x2e03('0xd6')](_0x24808d,_0x113e14))this[_0x2e03('0x63')](_0x50802c,_0x3a513b);for(const _0x4197c7 of this[_0x2e03('0x2')][_0x2e03('0x10')]())_0x4197c7['markers'][_0x2e03('0x49')]();for(const [_0x1afe77,_0x46ae54]of this['_markers']){this['_diffRoots'][_0x2e03('0x6c')](_0x46ae54[_0x2e03('0x1a')][_0x2e03('0x8e')])[_0x2e03('0xb')]['set'](_0x1afe77,_0x46ae54[_0x2e03('0x95')]());}const _0x8f320b=new Map(),_0x34aa31=new Map();for(const [_0x216f39,_0x672733]of this[_0x2e03('0x2')])_0x8f320b[_0x2e03('0x7b')](_0x216f39,B(_0x672733)),_0x34aa31[_0x2e03('0x7b')](_0x216f39,this[_0x2e03('0x2d')][_0x2e03('0x6c')](_0x216f39));this['_saveMetaData'](_0x113e14,_0x8f320b,this[_0x2e03('0x58')],_0x34aa31);}[_0x2e03('0x36')](_0x1719d1){const _0x17ff7c=Array['from'](this[_0x2e03('0x47')][_0x2e03('0xce')]());_0x17ff7c['sort']((_0x165bb2,_0x4a7511)=>_0x165bb2-_0x4a7511),_0x17ff7c['reverse']();for(const _0x1de069 of _0x17ff7c)if(_0x1de069<_0x1719d1)return _0x1de069;return Number[_0x2e03('0xee')];}['_copyMarkers'](_0x3cc0c5,_0xf694cc){const _0x1c127c=Array[_0x2e03('0xd5')](_0xf694cc[_0x2e03('0xb')])[_0x2e03('0xe6')](([_0x36cbef,_0x538481])=>[_0x36cbef,this['_fixRange'](_0x538481,_0x3cc0c5)]);_0x3cc0c5[_0x2e03('0xb')]=new Map(_0x1c127c);}['_transformMarkers'](_0x35eef2){for(const _0x55c879 of this['_markers'][_0x2e03('0x10')]()){const _0x1ac13e=_0x55c879[_0x2e03('0xe0')](_0x35eef2),_0x215698=_0x3f86f7[_0x2e03('0xbe')](_0x1ac13e);_0x55c879[_0x2e03('0xc')]=_0x215698[_0x2e03('0xc')],_0x55c879[_0x2e03('0x52')]=_0x215698[_0x2e03('0x52')];}}['_handleOperation'](_0x27325b,_0x2f9e04){if(_0x2e03('0xe2')==_0x27325b[_0x2e03('0x82')]||'detachRoot'==_0x27325b['type'])return void this[_0x2e03('0x60')](_0x27325b,_0x2f9e04);if(_0x2e03('0xe9')==_0x27325b[_0x2e03('0x82')]){const _0x10780f=_0x27325b[_0x2e03('0x103')][_0x2e03('0x1a')][_0x2e03('0x8e')];this[_0x2e03('0x2')][_0x2e03('0xa9')](_0x10780f)||(this[_0x2e03('0x2')][_0x2e03('0x7b')](_0x10780f,J(_0x10780f,!0x0)),this[_0x2e03('0x2d')]['set'](_0x10780f,{}),_0x2f9e04&&this['_idsRoots'][_0x2e03('0x7b')](_0x10780f,J(_0x10780f,!0x0)));}if(_0x2e03('0x9f')==_0x27325b[_0x2e03('0x82')]||'removeRootAttribute'==_0x27325b[_0x2e03('0x82')]||'changeRootAttribute'==_0x27325b[_0x2e03('0x82')])return void this[_0x2e03('0xe8')](_0x27325b);const _0x477722=this['_cloneOperation'](_0x27325b,this[_0x2e03('0x2')]);if(_0x2e03('0xb0')!==_0x27325b[_0x2e03('0x82')]&&(_0x477722['_execute'](),this[_0x2e03('0x86')](_0x477722)),_0x2f9e04)switch(_0x477722[_0x2e03('0x82')]){case _0x2e03('0xe9'):this['_handleInsertOperation'](_0x27325b);break;case _0x2e03('0x48'):case _0x2e03('0x4'):case _0x2e03('0x2b'):this['_handleMoveOperation'](_0x27325b);break;case'merge':this[_0x2e03('0xc3')](_0x27325b);break;case _0x2e03('0xd8'):this[_0x2e03('0x57')](_0x27325b);break;case _0x2e03('0xb0'):this[_0x2e03('0xbb')](_0x27325b);}}[_0x2e03('0x7a')](_0x140d9b,_0x480a0e){const _0x9d0966=_0x140d9b[_0x2e03('0x95')]();return _0x9d0966[_0x2e03('0xb3')]=_0x140d9b['_authorId'],this[_0x2e03('0x3c')](_0x9d0966,_0x480a0e),_0x9d0966;}[_0x2e03('0xef')](_0x426da2){return _0x426da2['map'](_0x451e91=>{const _0x5e9ecf=this[_0x2e03('0x25')](_0x451e91);return Number(_0x451e91['item']['getAttribute'](_0x5e9ecf));});}['_generateTape'](_0x4efb0d,_0x1438b){if(_0x4efb0d['is'](_0x2e03('0x4b'),'$text'))_0x1438b[_0x2e03('0x32')]({'item':_0x4efb0d,'type':_0x2e03('0xda')});else{_0x4efb0d['is']('element')&&_0x1438b[_0x2e03('0x32')]({'item':_0x4efb0d,'type':_0x2e03('0x54')});for(const _0x2d4646 of _0x4efb0d[_0x2e03('0xc9')]())this[_0x2e03('0xc2')](_0x2d4646,_0x1438b);_0x4efb0d['is']('element')&&_0x1438b[_0x2e03('0x32')]({'item':_0x4efb0d,'type':_0x2e03('0x67')});}return _0x1438b;}[_0x2e03('0xb7')](){const _0x278f03=new Map(this['_touched']),_0x203fc8=new Map(_0x278f03),_0x370634=new Map(),_0x181677={'insertions':{},'deletions':{}},_0x18ad6f={'insertions':{},'deletions':{}},_0x22428d=new Map(),_0x32452b=new Set([...this[_0x2e03('0xf')][_0x2e03('0xce')](),...this[_0x2e03('0x2')][_0x2e03('0xce')]()]);_0x32452b[_0x2e03('0xa')](_0x2e03('0x14'));for(const _0x533434 of _0x32452b){const _0x4fe339=this[_0x2e03('0x2')][_0x2e03('0x6c')](_0x533434)||J(_0x533434,!0x1),_0x35aa78=this['_baseRoots']['get'](_0x533434)||J(_0x533434,!0x1);_0x4fe339[_0x2e03('0x50')]()||_0x35aa78[_0x2e03('0x50')]()?(_0x181677['insertions'][_0x533434]=B(_0x4fe339),_0x181677['deletions'][_0x533434]=B(_0x35aa78),this['_copyMarkers'](_0x181677[_0x2e03('0xa5')][_0x533434],_0x35aa78),this[_0x2e03('0xa2')](_0x181677[_0x2e03('0x8')][_0x533434],_0x4fe339),_0x18ad6f['insertions'][_0x533434]=this['_generateTape'](this[_0x2e03('0x35')][_0x2e03('0x6c')](_0x533434),[]),_0x18ad6f['deletions'][_0x533434]=this[_0x2e03('0xc2')](this[_0x2e03('0x2e')]['get'](_0x533434)||J(_0x533434,!0x1),[])):_0x32452b['delete'](_0x533434);}for(const _0x12d50c of _0x32452b){const _0x2b4bc7=_0x18ad6f['insertions'][_0x12d50c];for(const _0xafa194 of _0x2b4bc7){const _0x1e7908=this['_getVidAttributeName'](_0xafa194),_0x491819=_0xafa194['item'][_0x2e03('0x2f')](_0x1e7908);_0x203fc8[_0x2e03('0xa')](_0x491819),_0x491819>=this[_0x2e03('0xfd')]&&_0x370634[_0x2e03('0x7b')](_0x491819,_0x278f03[_0x2e03('0x6c')](_0x491819));}}for(const _0x3dcaa0 of _0x32452b){const _0x91eca2=_0x18ad6f['insertions'][_0x3dcaa0],_0x5a9139=this[_0x2e03('0xef')](_0x18ad6f[_0x2e03('0xa5')][_0x3dcaa0]);let _0x3e4ea0=0x0;for(const _0x52d43d of _0x91eca2){const _0x190b37=this[_0x2e03('0x25')](_0x52d43d),_0x52cd8c=_0x52d43d['item'][_0x2e03('0x2f')](_0x190b37);if(!_0x370634[_0x2e03('0xa9')](_0x52cd8c)&&!_0x22428d[_0x2e03('0xa9')](_0x52cd8c)){if(_0x203fc8[_0x2e03('0xa9')](_0x52cd8c))_0x3e4ea0++;else{if(_0x52cd8c!=_0x5a9139[_0x3e4ea0]){const _0x209d8b=_0x278f03[_0x2e03('0x6c')](_0x52cd8c)||_0x278f03[_0x2e03('0x6c')](_0x5a9139[_0x3e4ea0]);for(;_0x52cd8c!=_0x5a9139[_0x3e4ea0];)_0x203fc8['has'](_0x5a9139[_0x3e4ea0])||(_0x22428d[_0x2e03('0x7b')](_0x5a9139[_0x3e4ea0],_0x209d8b),_0x278f03[_0x2e03('0x7b')](_0x5a9139[_0x3e4ea0],_0x209d8b)),_0x3e4ea0++;}_0x3e4ea0++;}}}}for(const _0x450f1f of _0x32452b){const _0x2c7b6a=_0x18ad6f['insertions'][_0x450f1f];for(const _0x5f6450 of _0x2c7b6a){const _0x24dfe7=this[_0x2e03('0x25')](_0x5f6450),_0xf3cd09=_0x5f6450[_0x2e03('0xd1')][_0x2e03('0x2f')](_0x24dfe7);if(_0x22428d[_0x2e03('0xa9')](_0xf3cd09)){const _0x35bb3f=_0x22428d[_0x2e03('0x6c')](_0xf3cd09);_0x203fc8[_0x2e03('0xa9')](_0xf3cd09)||_0x203fc8['set'](_0xf3cd09,{..._0x35bb3f}),_0x370634[_0x2e03('0x7b')](_0xf3cd09,{..._0x35bb3f});}}}for(const _0x16a144 of _0x203fc8['keys']())_0x16a144>=this[_0x2e03('0xfd')]&&_0x203fc8[_0x2e03('0xa')](_0x16a144);const _0x1ee6c9=new Map();for(const _0x12bd40 of _0x32452b){let _0x456ed4=_0x18ad6f[_0x2e03('0x8')][_0x12bd40];for(const _0x1b4315 of _0x456ed4)if(_0x1b4315['item']['is'](_0x2e03('0x4b'),_0x2e03('0x1c'))){const _0x586b18=this[_0x2e03('0x25')](_0x1b4315),_0x212672=_0x1b4315[_0x2e03('0xd1')][_0x2e03('0x2f')](_0x586b18);if(_0x370634['has'](_0x212672)){const _0x56116f=_0x1b4315['item']['parent'][_0x2e03('0x13')][_0x2e03('0x2f')](_0x2e03('0x15')),_0xc3019d=_0x1ee6c9[_0x2e03('0x6c')](_0x56116f)||new Set();_0xc3019d[_0x2e03('0x79')](_0x370634[_0x2e03('0x6c')](_0x212672)[_0x2e03('0xc4')]),_0x1ee6c9['set'](_0x56116f,_0xc3019d);}}_0x456ed4=_0x18ad6f[_0x2e03('0xa5')][_0x12bd40];for(const _0x3519cb of _0x456ed4)if(_0x3519cb['item']['is'](_0x2e03('0x4b'),_0x2e03('0x1c'))){const _0x4a586b=this[_0x2e03('0x25')](_0x3519cb),_0x224baf=_0x3519cb[_0x2e03('0xd1')][_0x2e03('0x2f')](_0x4a586b);if(_0x203fc8[_0x2e03('0xa9')](_0x224baf)){const _0x44b97e=_0x3519cb[_0x2e03('0xd1')][_0x2e03('0x13')]['parent']['getAttribute'](_0x2e03('0x15')),_0x20ee11=_0x1ee6c9[_0x2e03('0x6c')](_0x44b97e)||new Set();_0x20ee11[_0x2e03('0x79')](_0x203fc8[_0x2e03('0x6c')](_0x224baf)['userId']),_0x1ee6c9[_0x2e03('0x7b')](_0x44b97e,_0x20ee11);}}for(const _0x5e7aa6 of _0x1ee6c9[_0x2e03('0xce')]())(_0x370634[_0x2e03('0xa9')](_0x5e7aa6)||_0x203fc8[_0x2e03('0xa9')](_0x5e7aa6))&&_0x1ee6c9[_0x2e03('0xa')](_0x5e7aa6);}for(const _0x37fbfc of _0x32452b){const _0x5c9647=_0x18ad6f[_0x2e03('0x8')][_0x37fbfc];let _0x2c4881=null,_0x51d778=null;for(const _0x1024d5 of _0x5c9647){const _0x286caa=this[_0x2e03('0x25')](_0x1024d5),_0x32ae24=_0x1024d5[_0x2e03('0xd1')][_0x2e03('0x2f')](_0x286caa),_0x42db2b=_0x1ee6c9['get'](_0x32ae24);_0x42db2b&&_0x2e03('0x54')==_0x1024d5[_0x2e03('0x82')]&&(_0x2c4881=Array['from'](_0x42db2b)[0x0],_0x51d778=_0x1024d5[_0x2e03('0xd1')][_0x2e03('0x2f')](_0x2e03('0xff'))),_0x2c4881&&(_0x203fc8[_0x2e03('0x7b')](_0x32ae24,{'userId':_0x2c4881}),_0x370634[_0x2e03('0x7b')](_0x32ae24,{'userId':_0x2c4881})),_0x32ae24==_0x51d778&&(_0x2c4881=null,_0x51d778=null);}}const _0x385c8e={},_0x1435cf=new Set();for(const _0x1743f0 of _0x32452b){const _0x28e6b8=_0x181677[_0x2e03('0xa5')][_0x1743f0],_0x546fc6=_0x181677[_0x2e03('0x8')][_0x1743f0];for(const {userId:_0x7d9ac6}of this[_0x2e03('0xc7')][_0x2e03('0x10')]())null!==_0x7d9ac6&&_0x1435cf[_0x2e03('0x79')](_0x7d9ac6);for(const {userId:_0x3437d5}of this[_0x2e03('0x5b')][_0x2e03('0x10')]())null!==_0x3437d5&&_0x1435cf[_0x2e03('0x79')](_0x3437d5);this[_0x2e03('0xa4')](_0x546fc6,_0x18ad6f[_0x2e03('0x8')][_0x1743f0],_0x370634,_0x2e03('0x19'),_0x1435cf),this[_0x2e03('0xa4')](_0x28e6b8,_0x18ad6f[_0x2e03('0xa5')][_0x1743f0],_0x203fc8,_0x2e03('0x69'),_0x1435cf),_0x385c8e[_0x1743f0]={'insertions':this[_0x2e03('0xf7')](_0x546fc6),'deletions':this['_prepareViewToSave'](_0x28e6b8),'attachChange':this[_0x2e03('0x5b')][_0x2e03('0x6c')](_0x1743f0)||null,'attributesBefore':_0x4eb609(this[_0x2e03('0xc6')]['get'](_0x1743f0))||{},'attributesAfter':_0x4eb609(this[_0x2e03('0x2d')][_0x2e03('0x6c')](_0x1743f0))};}return{'diffData':_0x385c8e,'authorsIds':Array[_0x2e03('0xd5')](_0x1435cf)};}['_processRootBeforeSave'](_0x43f282){for(const [,_0x3b6bd1]of _0x43f282[_0x2e03('0xb')]){const _0x17deb4=_0x3b6bd1[_0x2e03('0xc')][_0x2e03('0x9c')]()['filter'](_0x17ce07=>_0x2e03('0x1c')==_0x17ce07[_0x2e03('0x85')]);for(const _0x5bb3d5 of _0x17deb4)0x1==_0x5bb3d5['childCount']&&_0x5bb3d5[_0x2e03('0x70')](0x0)['is']('element',_0x2e03('0x41'))&&_0x5bb3d5[_0x2e03('0x70')](0x0)[_0x2e03('0xe1')](_0x2e03('0x4f'),!0x0);}}[_0x2e03('0xf7')](_0xdb21e8){this[_0x2e03('0xb6')](_0xdb21e8);const _0x886059=this[_0x2e03('0x2a')][_0x2e03('0xa0')]['toView'](_0xdb21e8,{}),_0x42ceae=Array[_0x2e03('0xd5')](_0x886059['getChildren']())['map'](_0x273179=>this[_0x2e03('0x11')](_0x273179));return JSON['stringify'](_0x42ceae);}[_0x2e03('0x11')](_0x40290a){if(_0x40290a['is'](_0x2e03('0xfb')))return _0x40290a[_0x2e03('0xa0')];{const _0x2101aa=_0x40290a;return{'type':Object[_0x2e03('0xce')](j)[_0x2e03('0x3b')](_0xe41fb4=>_0x40290a instanceof j[_0xe41fb4]),'name':_0x2101aa['name'],'attributes':Array[_0x2e03('0xd5')](_0x2101aa[_0x2e03('0xc0')]()),'children':Array[_0x2e03('0xd5')](_0x2101aa['getChildren']())[_0x2e03('0xe6')](_0x416f9c=>this[_0x2e03('0x11')](_0x416f9c))};}}[_0x2e03('0xa4')](_0x17a9cf,_0x194739,_0x5de6ad,_0x2eb546,_0x5a45fb){let _0x4b909d=null,_0x12a465=null,_0xdff686=0x0;const _0x39f68e=this[_0x2e03('0x2a')]['model'];for(let _0x551ab0=0x0;_0x551ab0<_0x194739[_0x2e03('0x90')];_0x551ab0++){const _0x1cf2ef=this[_0x2e03('0x25')](_0x194739[_0x551ab0]),_0x1f77a0=_0x194739[_0x551ab0][_0x2e03('0xd1')][_0x2e03('0x2f')](_0x1cf2ef),_0x4d13ea=_0x5de6ad[_0x2e03('0x6c')](_0x1f77a0),_0x370b2d=_0x551ab0==_0x194739[_0x2e03('0x90')]-0x1;(!_0x4b909d&&_0x4d13ea&&(_0x4b909d=_0x4d13ea,_0x12a465=_0x194739[_0x551ab0]),_0x4b909d&&(!_0x4d13ea||_0x4d13ea[_0x2e03('0xc4')]!=_0x4b909d['userId']))&&(_0xc731c8(_0x4d13ea,H(_0x12a465,_0x17a9cf,_0x39f68e),H(_0x194739[_0x551ab0],_0x17a9cf,_0x39f68e)),_0x4b909d=_0x4d13ea||null,_0x12a465=_0x4d13ea?_0x194739[_0x551ab0]:null),_0x4b909d&&_0x370b2d&&_0xc731c8(_0x4d13ea,H(_0x12a465,_0x17a9cf,_0x39f68e),q(_0x194739[_0x551ab0],_0x17a9cf,_0x39f68e));}function _0xc731c8(_0x5a799d,_0x278df0,_0x369a57){const _0x472e28=_0x4b909d[_0x2e03('0xc4')],_0x50cad9=_0x2e03('0xbf')+_0x2eb546+':'+_0x472e28+':'+_0xdff686++,_0x54615a=_0x39f68e[_0x2e03('0x5d')](_0x278df0,_0x369a57);_0x17a9cf['markers'][_0x2e03('0x7b')](_0x50cad9,_0x54615a),null!==_0x472e28&&_0x5a45fb[_0x2e03('0x79')](_0x472e28);}}[_0x2e03('0x25')](_0x165134){switch(_0x165134[_0x2e03('0x82')]){case _0x2e03('0x54'):return _0x2e03('0x15');case _0x2e03('0x67'):return _0x2e03('0xff');default:return _0x2e03('0x6f');}}[_0x2e03('0x3c')](_0x26799f,_0x2b6170){_0x26799f['baseVersion']=null;for(const _0x12c0cb in _0x26799f){const _0x1f1c32=_0x26799f[_0x12c0cb];if(_0x1f1c32 instanceof _0x5e3514){const _0x2d6cc6=_0x2b6170['get'](_0x1f1c32[_0x2e03('0x1a')][_0x2e03('0x8e')]);_0x26799f[_0x12c0cb]=this[_0x2e03('0x34')](_0x1f1c32,_0x2d6cc6);}if(_0x1f1c32 instanceof _0x3f86f7){const _0x26e0ca=_0x2b6170[_0x2e03('0x6c')](_0x1f1c32[_0x2e03('0x1a')][_0x2e03('0x8e')]);_0x26799f[_0x12c0cb]=this[_0x2e03('0x31')](_0x1f1c32,_0x26e0ca);}_0x2e03('0x1a')===_0x12c0cb&&(_0x26799f[_0x2e03('0x1a')]=_0x2b6170[_0x2e03('0x6c')](_0x26799f[_0x2e03('0x1a')][_0x2e03('0x8e')]));}}[_0x2e03('0x31')](_0x289d78,_0x1855f5){return this['editor'][_0x2e03('0xc5')]['createRange'](this[_0x2e03('0x34')](_0x289d78['start'],_0x1855f5),this[_0x2e03('0x34')](_0x289d78[_0x2e03('0x52')],_0x1855f5));}[_0x2e03('0x34')](_0x13e3cd,_0x4abb50){return this[_0x2e03('0x2a')][_0x2e03('0xc5')][_0x2e03('0x92')](_0x4abb50,_0x13e3cd['path'],_0x13e3cd['stickiness']);}[_0x2e03('0xab')](_0x5e94bc){const _0x586d91=this['_idsRoots']['get'](_0x5e94bc[_0x2e03('0x103')][_0x2e03('0x1a')][_0x2e03('0x8e')]),_0x42068a=this[_0x2e03('0x34')](_0x5e94bc[_0x2e03('0x103')],_0x586d91),_0x2b72f1=null===_0x5e94bc[_0x2e03('0xb3')]?null:_0x5e94bc[_0x2e03('0xb3')]||this['editor'][_0x2e03('0x78')][_0x2e03('0x6c')](_0x2e03('0x3a'))['me']['id'],_0x1e9ce6=_0x42068a[_0x2e03('0x13')],_0x58895c=this[_0x2e03('0x64')],_0x14c0d6=[];for(const _0x29d967 of _0x5e94bc[_0x2e03('0xb2')])if(_0x29d967['is'](_0x2e03('0x4b')))_0x14c0d6[_0x2e03('0x32')](this['_makeIdsRoot'](_0x29d967));else for(let _0x260ac6=0x0;_0x260ac6<_0x29d967[_0x2e03('0xfe')];_0x260ac6++)_0x14c0d6['push'](new _0x1692b2(_0x2e03('0xfb'),{'vid':this[_0x2e03('0x64')]++}));const _0x46d6e6=this[_0x2e03('0x64')];for(let _0x578e93=_0x58895c;_0x578e93<_0x46d6e6;_0x578e93++)this[_0x2e03('0xb5')][_0x2e03('0x7b')](_0x578e93,{'userId':_0x2b72f1});_0x1e9ce6[_0x2e03('0xe4')](_0x42068a['offset'],_0x14c0d6);}[_0x2e03('0xaa')](_0x2a2672){(_0x2a2672=this[_0x2e03('0x7a')](_0x2a2672,this[_0x2e03('0x35')]))[_0x2e03('0x40')]();const _0x90960e=null===_0x2a2672[_0x2e03('0xb3')]?null:_0x2a2672[_0x2e03('0xb3')]||this[_0x2e03('0x2a')]['plugins']['get']('Users')['me']['id'],_0x2ac012=_0x2a2672[_0x2e03('0x43')](),_0x1df46c=_0x2ac012[_0x2e03('0x13')],_0x355805=_0x2ac012[_0x2e03('0xdf')];!function _0x2e67e4(_0x3fe524,_0x28bea8,_0x216b21,_0xa45e79){for(let _0x23c5de=_0x216b21;_0x23c5de<_0xa45e79;_0x23c5de++){const _0x5d37ce=_0x28bea8[_0x2e03('0x70')](_0x23c5de);_0x5d37ce['is'](_0x2e03('0x4b'),_0x2e03('0xfb'))?_0x3fe524[_0x2e03('0x7b')](_0x5d37ce[_0x2e03('0x2f')](_0x2e03('0x6f')),{'userId':_0x90960e}):(_0x3fe524['set'](_0x5d37ce['getAttribute'](_0x2e03('0x15')),{'userId':_0x90960e}),_0x2e67e4(_0x3fe524,_0x5d37ce,0x0,_0x5d37ce[_0x2e03('0x91')]),_0x3fe524['set'](_0x5d37ce[_0x2e03('0x2f')](_0x2e03('0xff')),{'userId':_0x90960e}));}}(this[_0x2e03('0xb5')],_0x1df46c,_0x355805,_0x355805+_0x2a2672['howMany']);}[_0x2e03('0xc3')](_0x116485){const _0x50562c=null===(_0x116485=this['_cloneOperation'](_0x116485,this[_0x2e03('0x35')]))[_0x2e03('0xb3')]?null:_0x116485[_0x2e03('0xb3')]||this[_0x2e03('0x2a')]['plugins']['get'](_0x2e03('0x3a'))['me']['id'],_0x2ab7cb=_0x116485[_0x2e03('0x104')]['parent'],_0x416964=_0x116485['sourcePosition']['parent'],_0x21bf21=_0x2ab7cb[_0x2e03('0x2f')]('vid_end'),_0x423a3b=_0x416964['getAttribute'](_0x2e03('0x15'));_0x2ab7cb['_setAttribute']('vid_end',_0x416964[_0x2e03('0x2f')](_0x2e03('0xff'))),_0x416964[_0x2e03('0xe1')](_0x2e03('0xff'),_0x21bf21),this[_0x2e03('0xb5')][_0x2e03('0x7b')](_0x423a3b,{'userId':_0x50562c}),this[_0x2e03('0xb5')][_0x2e03('0x7b')](_0x21bf21,{'userId':_0x50562c}),_0x116485['_execute']();}[_0x2e03('0x57')](_0x518586){const _0xbd892d=null===(_0x518586=this[_0x2e03('0x7a')](_0x518586,this[_0x2e03('0x35')]))[_0x2e03('0xb3')]?null:_0x518586[_0x2e03('0xb3')]||this[_0x2e03('0x2a')][_0x2e03('0x78')]['get'](_0x2e03('0x3a'))['me']['id'],_0x44e71b=_0x518586[_0x2e03('0xeb')],_0x19eae8=_0x518586[_0x2e03('0x5')][_0x2e03('0x13')];_0x518586[_0x2e03('0x40')]();const _0x2e128e=_0x19eae8[_0x2e03('0x2f')](_0x2e03('0xff')),_0x2d9736=_0x518586[_0x2e03('0x84')][_0x2e03('0x22')];if(_0x44e71b){const _0x89e2fd=_0x2d9736[_0x2e03('0x2f')]('vid_end'),_0x2e6119=_0x19eae8[_0x2e03('0x2f')]('vid_end');_0x19eae8[_0x2e03('0xe1')](_0x2e03('0xff'),_0x89e2fd),_0x2d9736[_0x2e03('0xe1')](_0x2e03('0xff'),_0x2e6119),this[_0x2e03('0xb5')][_0x2e03('0x7b')](_0x19eae8[_0x2e03('0x2f')](_0x2e03('0xff')),{'userId':_0xbd892d}),this['_touched'][_0x2e03('0x7b')](_0x2d9736[_0x2e03('0x2f')]('vid_start'),{'userId':_0xbd892d});}else{const _0x2f533f=this[_0x2e03('0x64')]++,_0x409763=this[_0x2e03('0x64')]++;_0x19eae8[_0x2e03('0xe1')]('vid_end',_0x2f533f),_0x2d9736[_0x2e03('0xe1')](_0x2e03('0x15'),_0x409763),_0x2d9736[_0x2e03('0xe1')](_0x2e03('0xff'),_0x2e128e),this[_0x2e03('0xb5')]['set'](_0x2f533f,{'userId':_0xbd892d}),this['_touched'][_0x2e03('0x7b')](_0x409763,{'userId':_0xbd892d});}}[_0x2e03('0xbb')](_0x569100){if(!_0x569100[_0x2e03('0xd3')])return;const _0x19bef9=(_0x569100=this[_0x2e03('0x7a')](_0x569100,this[_0x2e03('0x2')]))[_0x2e03('0x5c')]?_0x569100[_0x2e03('0x5c')][_0x2e03('0x1a')]:null,_0x529154=_0x569100['newRange']?_0x569100[_0x2e03('0x33')][_0x2e03('0x1a')]:null;_0x19bef9&&this[_0x2e03('0x58')][_0x2e03('0xa')](_0x569100['name']),_0x529154&&this[_0x2e03('0x58')][_0x2e03('0x7b')](_0x569100[_0x2e03('0x85')],_0x569100['newRange'][_0x2e03('0x95')]());const _0xd5adef=null===_0x569100['_authorId']?null:_0x569100['_authorId']||this[_0x2e03('0x2a')][_0x2e03('0x78')][_0x2e03('0x6c')](_0x2e03('0x3a'))['me']['id'],_0x21fc30=_0x569100[_0x2e03('0x85')];if(!this[_0x2e03('0xc7')][_0x2e03('0xa9')](_0x21fc30))return void this[_0x2e03('0xc7')][_0x2e03('0x7b')](_0x21fc30,{'range':_0x569100[_0x2e03('0x5c')],'userId':_0xd5adef});const _0x4ed19a=this['_touchedMarkers'][_0x2e03('0x6c')](_0x21fc30),_0x169192=_0x4ed19a[_0x2e03('0xcc')],_0x3e67eb=_0x569100[_0x2e03('0x33')];null==_0x169192&&null==_0x3e67eb||_0x169192&&_0x3e67eb&&_0x169192['isEqual'](_0x3e67eb)?this[_0x2e03('0xc7')][_0x2e03('0xa')](_0x569100['name']):_0x4ed19a[_0x2e03('0xc4')]=_0xd5adef;}['_handleRootOperation'](_0x73605,_0x1c6424){this['_diffRoots'][_0x2e03('0xa9')](_0x73605[_0x2e03('0x8e')])?this[_0x2e03('0x2')][_0x2e03('0x6c')](_0x73605['rootName'])[_0x2e03('0xf2')]=_0x73605['isAdd']:(this[_0x2e03('0x2')][_0x2e03('0x7b')](_0x73605['rootName'],J(_0x73605[_0x2e03('0x8e')],!0x0)),this[_0x2e03('0x2d')][_0x2e03('0x7b')](_0x73605[_0x2e03('0x8e')],{}),_0x1c6424&&this['_idsRoots'][_0x2e03('0x7b')](_0x73605['rootName'],J(_0x73605[_0x2e03('0x8e')],!0x0)));const _0x140348=null===_0x73605[_0x2e03('0xb3')]?null:_0x73605[_0x2e03('0xb3')]||this[_0x2e03('0x2a')][_0x2e03('0x78')][_0x2e03('0x6c')]('Users')['me']['id'],_0x24029d=this[_0x2e03('0x5b')][_0x2e03('0x6c')](_0x73605[_0x2e03('0x8e')]);_0x24029d&&_0x24029d[_0x2e03('0xc4')]===_0x140348?this['_touchedRoots']['delete'](_0x73605[_0x2e03('0x8e')]):this[_0x2e03('0x5b')][_0x2e03('0x7b')](_0x73605[_0x2e03('0x8e')],{'userId':_0x140348,'isAttached':_0x73605[_0x2e03('0x20')]});}['_handleRootAttributeOperation'](_0x1ab10b){const _0x4eeb09=this[_0x2e03('0x2d')][_0x2e03('0x6c')](_0x1ab10b[_0x2e03('0x1a')][_0x2e03('0x8e')]);null===_0x1ab10b['newValue']?delete _0x4eeb09[_0x1ab10b[_0x2e03('0x76')]]:_0x4eeb09[_0x1ab10b[_0x2e03('0x76')]]=_0x1ab10b[_0x2e03('0xbd')];}}function B(_0x465536){const _0x372110=J(_0x465536[_0x2e03('0x8e')],_0x465536[_0x2e03('0x50')]());for(const _0x47b6b9 of _0x465536[_0x2e03('0xc9')]()){const _0x5b18f0=_0x47b6b9['_clone'](!0x0);_0x372110[_0x2e03('0x89')](_0x5b18f0);}return _0x372110;}function J(_0x29c3a6,_0x5bbb7f=!0x0){const _0x59d2bd=new _0x3273da();return _0x59d2bd[_0x2e03('0x8e')]=_0x29c3a6,_0x59d2bd[_0x2e03('0xf2')]=_0x5bbb7f,_0x59d2bd[_0x2e03('0x50')]=()=>_0x59d2bd[_0x2e03('0xf2')],_0x59d2bd;}function H(_0x184a72,_0x441136,_0x12bb48){const _0x2ceeca=_0x2e03('0x67')==_0x184a72[_0x2e03('0x82')]?_0x12bb48[_0x2e03('0x28')](_0x184a72[_0x2e03('0xd1')],_0x2e03('0x52')):_0x12bb48[_0x2e03('0xf3')](_0x184a72[_0x2e03('0xd1')]);return _0x12bb48['createPositionFromPath'](_0x441136,_0x2ceeca['path'],_0x2ceeca['stickiness']);}function q(_0x4d63a6,_0x425e7c,_0xc849aa){const _0x4dff61=_0x2e03('0x54')==_0x4d63a6[_0x2e03('0x82')]?_0xc849aa[_0x2e03('0x28')](_0x4d63a6[_0x2e03('0xd1')],0x0):_0xc849aa[_0x2e03('0x105')](_0x4d63a6[_0x2e03('0xd1')]);return _0xc849aa[_0x2e03('0x92')](_0x425e7c,_0x4dff61[_0x2e03('0x8d')],_0x4dff61[_0x2e03('0x7f')]);}