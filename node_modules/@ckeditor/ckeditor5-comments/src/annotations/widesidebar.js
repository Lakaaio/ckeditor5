/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1429=['setActiveAnnotation','switchTo','editors','ready','change:container','addEventListener','listenTo','detach','wideSidebar','remove','plugins','updateTargetRect','_activeAnnotation','widesidebar-attach-already-attached','resize','register','high','annotations','getOrderedSelectedAnnotations','refresh','uiUpdate','rearrange','_destroyEditorAnnotationsIntegration','cancel','stopListening','activeAnnotation','set:container','init','add','_refreshPositioningDebounced','_editorAnnotations','focus','EditorAnnotations','refreshPositioning','set','requires','from','context','attach','hasDomSelection','get','_attachToContainer','stop','_integrateWithEditorAnnotations','removeEventListener','addAnnotation','blur','_annotations','pluginName','destroy','widesidebar-detach-not-attached','WideSidebar','_detachFromContainer','isAttached'];(function(_0x165336,_0x14290f){const _0x49fbed=function(_0x40924d){while(--_0x40924d){_0x165336['push'](_0x165336['shift']());}};_0x49fbed(++_0x14290f);}(_0x1429,0xc1));const _0x49fb=function(_0x165336,_0x14290f){_0x165336=_0x165336-0x0;let _0x49fbed=_0x1429[_0x165336];return _0x49fbed;};import{ContextPlugin as _0x3a12e5,Context as _0x2ee9b4}from'ckeditor5/src/core';import _0x508d1c from'./annotationsuis';import _0x3f1812 from'./sidebar';import{CKEditorError as _0x5ced89,Collection as _0x21728d}from'ckeditor5/src/utils';import{debounce as _0x341554}from'lodash-es';import _0x48acd0 from'./editorannotations';export default class i extends _0x3a12e5{static get[_0x49fb('0x4')](){return[_0x3f1812,_0x508d1c];}static get[_0x49fb('0x11')](){return _0x49fb('0x14');}constructor(_0x47131b){super(_0x47131b),this[_0x49fb('0x16')]=!0x1,this[_0x49fb('0x3')](_0x49fb('0x30'),null),this[_0x49fb('0x28')]=null,this[_0x49fb('0x35')]=new _0x21728d(),this[_0x49fb('0x34')]=_0x341554(()=>{this[_0x49fb('0x28')][_0x49fb('0x2')]();},0xfa,{'leading':!0x1});}[_0x49fb('0x32')](){const _0x1c4ce1=this[_0x49fb('0x6')]['plugins'][_0x49fb('0x9')](_0x508d1c),_0x5e3c33=this['context'][_0x49fb('0x21')][_0x49fb('0x9')](_0x3f1812);_0x1c4ce1[_0x49fb('0x26')]('wideSidebar',this),_0x5e3c33['container']&&_0x1c4ce1[_0x49fb('0x18')](_0x49fb('0x1f'));}[_0x49fb('0x17')](_0x17325a){if(_0x17325a===this[_0x49fb('0x30')])return;const _0x4af443=this[_0x49fb('0x6')][_0x49fb('0x21')][_0x49fb('0x9')](_0x3f1812);_0x4af443[_0x49fb('0x23')]=_0x17325a;const _0x27a82f=this[_0x49fb('0x30')];this[_0x49fb('0x30')]=_0x17325a,_0x4af443[_0x49fb('0x2a')]({'blurredAnnotation':_0x27a82f,'activatedAnnotation':this['activeAnnotation']});}[_0x49fb('0x7')](_0x191613){this[_0x49fb('0x28')]=_0x191613;const _0x465f1=this[_0x49fb('0x6')]['plugins'][_0x49fb('0x9')](_0x3f1812);if(_0x465f1[_0x49fb('0x10')]=_0x191613,this[_0x49fb('0x16')])throw new _0x5ced89(_0x49fb('0x24'),this);this['isAttached']=!0x0,this[_0x49fb('0x1d')](_0x465f1,_0x49fb('0x31'),()=>{this[_0x49fb('0x1e')](),this[_0x49fb('0x1d')](_0x465f1,_0x49fb('0x1b'),_0x2ed381=>{_0x2ed381['off'](),this[_0x49fb('0x7')](_0x191613);});}),_0x465f1[_0x49fb('0xa')]({'viewClass':'ck-sidebar--wide'});const _0x1e19db=_0x28b025=>{_0x28b025[_0x49fb('0x22')](),_0x465f1[_0x49fb('0xe')](_0x28b025);};for(const _0x2fde58 of _0x191613)_0x1e19db(_0x2fde58);this[_0x49fb('0x1d')](_0x191613,_0x49fb('0x33'),(_0x2570c2,_0x4bf224)=>{_0x1e19db(_0x4bf224);}),this['listenTo'](_0x191613,_0x49fb('0x20'),(_0x247a13,_0x16c24e,_0x34670b)=>{_0x465f1[_0x49fb('0x2c')]({'removedAnnotation':_0x16c24e,'previousAnnotation':_0x191613[_0x49fb('0x9')](_0x34670b-0x1),'nextAnnotation':_0x191613['get'](_0x34670b+0x1)}),_0x16c24e===this[_0x49fb('0x30')]&&this[_0x49fb('0x17')](null);},{'priority':'high'}),this[_0x49fb('0x1d')](_0x191613,_0x49fb('0x0'),(_0x85a168,_0x3174e2)=>{this[_0x49fb('0x17')](_0x3174e2);}),this[_0x49fb('0x1d')](_0x191613,_0x49fb('0xf'),()=>{this[_0x49fb('0x17')](null);});const _0x144e5a=this[_0x49fb('0x6')]instanceof _0x2ee9b4?this['context'][_0x49fb('0x19')]:new _0x21728d([this['context']]);for(const _0x597c0b of _0x144e5a)this['_integrateWithEditorAnnotations'](_0x597c0b);this[_0x49fb('0x1d')](_0x144e5a,'add',(_0x181984,_0x2f91ce)=>{this[_0x49fb('0x1d')](_0x2f91ce,_0x49fb('0x1a'),()=>{this[_0x49fb('0xc')](_0x2f91ce);});}),this['listenTo'](_0x144e5a,'remove',(_0x2a2300,_0x786598)=>{_0x786598[_0x49fb('0x21')]['has'](_0x49fb('0x1'))&&this[_0x49fb('0x2d')](_0x786598[_0x49fb('0x21')]['get'](_0x49fb('0x1')));}),window[_0x49fb('0x1c')](_0x49fb('0x25'),this[_0x49fb('0x34')]),this[_0x49fb('0x28')][_0x49fb('0x2')]();}[_0x49fb('0x1e')](){if(!this['isAttached'])throw new _0x5ced89(_0x49fb('0x13'),this);this[_0x49fb('0x17')](null);const _0x157074=this['context'][_0x49fb('0x21')][_0x49fb('0x9')](_0x3f1812);_0x157074[_0x49fb('0x15')](this[_0x49fb('0x28')]),this['stopListening'](_0x157074),this[_0x49fb('0x2f')](this[_0x49fb('0x28')]),this[_0x49fb('0x6')]instanceof _0x2ee9b4&&this[_0x49fb('0x2f')](this[_0x49fb('0x6')][_0x49fb('0x19')]);for(const _0x3f2da2 of Array[_0x49fb('0x5')](this['_editorAnnotations']))this[_0x49fb('0x2d')](_0x3f2da2);window[_0x49fb('0xd')](_0x49fb('0x25'),this[_0x49fb('0x34')]),this[_0x49fb('0x34')][_0x49fb('0x2e')](),this[_0x49fb('0x30')]=null,this[_0x49fb('0x16')]=!0x1,this[_0x49fb('0x28')]=null;}[_0x49fb('0x12')](){this[_0x49fb('0x16')]&&this[_0x49fb('0x1e')]();}[_0x49fb('0xc')](_0x1617ff){const _0x58ea47=_0x1617ff[_0x49fb('0x21')][_0x49fb('0x9')](_0x48acd0);if(!_0x58ea47)return;const _0x3ad3d1=()=>{const _0x1649b2=_0x58ea47[_0x49fb('0x29')]({'annotations':this[_0x49fb('0x28')],'activeAnnotation':this['activeAnnotation']});this[_0x49fb('0x17')](_0x1649b2[0x0]||null);};this['listenTo'](_0x58ea47,_0x49fb('0x2a'),_0x3ad3d1),this[_0x49fb('0x1d')](_0x58ea47,'blur',(_0x19159a,{isAnnotationTracked:_0x16bd4f})=>{this[_0x49fb('0x30')]&&_0x16bd4f(this[_0x49fb('0x30')])&&this[_0x49fb('0x17')](null);}),this['listenTo'](_0x58ea47,_0x49fb('0x2b'),()=>{this[_0x49fb('0x34')]();}),this[_0x49fb('0x1d')](this[_0x49fb('0x28')],_0x49fb('0xf'),_0x3a3d22=>{_0x58ea47[_0x49fb('0x8')]()&&(_0x3ad3d1(),_0x3a3d22[_0x49fb('0xb')]());},{'priority':_0x49fb('0x27')}),this[_0x49fb('0x35')][_0x49fb('0x33')](_0x58ea47);}[_0x49fb('0x2d')](_0x30479c){this[_0x49fb('0x2f')](_0x30479c),this[_0x49fb('0x35')][_0x49fb('0x20')](_0x30479c);}}