/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2086=['remove','getSidebarItemView','clear','_activeAnnotation','add','last','_recalculateBuffer','_setItemTop','unbind','change:_lastItem','change:bottom','_createSidebarView','_detachFromContainer','sidebar-setcontainer-invalid-element','class','element','_getMaxAvailableTop','config','set','_updateLastItem','addAnnotation','view','locale','bottom','_annotationToSidebarItemView','max','_sidebarItemViewToAnnotation','_alignForBottomChange','_lastItem','container','_alignBeforeItem','push','targetRect','_getItemBefore','object','init','_getTargetTop','bind','_targetTop','stopListening','_destroySidebarItemView','pluginName','_spaceBetweenItems','listenTo','_alignAfterItem','destroy','render','sidebar-attachtocontainer-missing-container','sidebar.container','rearrange','content','get','length','_alignToTargetRect','isAnimationDisabled','nodeType','_annotations','sidebar.preventScrollOutOfView','list','minHeight','_getItemAfter','_recalculate','top','target','getIndex','updateHeight'];(function(_0x5ac84c,_0x208648){const _0x4da252=function(_0x5ac993){while(--_0x5ac993){_0x5ac84c['push'](_0x5ac84c['shift']());}};_0x4da252(++_0x208648);}(_0x2086,0x1e1));const _0x4da2=function(_0x5ac84c,_0x208648){_0x5ac84c=_0x5ac84c-0x0;let _0x4da252=_0x2086[_0x5ac84c];return _0x4da252;};import{ContextPlugin as _0x54dea6}from'ckeditor5/src/core';import{Rect as _0x542b48,CKEditorError as _0x1898d7}from'ckeditor5/src/utils';import _0x56c3cb from'./view/sidebarview';import _0x246641 from'./view/sidebaritemview';export default class z extends _0x54dea6{static get[_0x4da2('0x16')](){return'Sidebar';}constructor(_0x28e997){super(_0x28e997),this[_0x4da2('0x41')](_0x4da2('0x9'),void 0x0),this[_0x4da2('0x2')]=this[_0x4da2('0x3a')](),this[_0x4da2('0x41')](_0x4da2('0xa'),null),this[_0x4da2('0x17')]=0x19,this[_0x4da2('0x7')]=new Map(),this[_0x4da2('0x5')]=new Map(),this['context'][_0x4da2('0x40')]['define'](_0x4da2('0x26'),!0x1),this[_0x4da2('0x25')]=null,this[_0x4da2('0x32')]=null,this[_0x4da2('0x35')]=[];}[_0x4da2('0x10')](){const _0x3161a6=this['context'][_0x4da2('0x40')][_0x4da2('0x20')](_0x4da2('0x1d'));_0x3161a6&&this['setContainer'](_0x3161a6);}['setContainer'](_0x1fe018){if(!y(_0x1fe018))throw new _0x1898d7(_0x4da2('0x3c'));this[_0x4da2('0xa')]=_0x1fe018;}['_attachToContainer']({viewClass:_0x4a4ec7='',spaceBetweenItems:_0x2f610d=0x19}={}){if(!y(this[_0x4da2('0xa')]))throw new _0x1898d7(_0x4da2('0x1c'),this);this[_0x4da2('0xa')]['appendChild'](this[_0x4da2('0x2')][_0x4da2('0x3e')]),this['view'][_0x4da2('0x3d')]=_0x4a4ec7,this[_0x4da2('0x17')]=_0x2f610d;}[_0x4da2('0x1e')]({removedAnnotation:_0x4c0ac7,previousAnnotation:_0x220761,nextAnnotation:_0x578431}){const _0x5ed99b=this['getSidebarItemView'](_0x4c0ac7);this[_0x4da2('0x2')][_0x4da2('0x27')][_0x4da2('0x2f')](_0x5ed99b),this[_0x4da2('0x15')](_0x4c0ac7),_0x220761&&this[_0x4da2('0x22')](this['getSidebarItemView'](_0x220761)),_0x578431&&this['_alignToTargetRect'](this[_0x4da2('0x30')](_0x578431)),this[_0x4da2('0x0')]();}['refresh']({blurredAnnotation:_0x2f87b0,activatedAnnotation:_0x50990e,disableAnimationOnActivatedAnnotation:_0x3d6640}){if(this[_0x4da2('0x32')]=_0x50990e,_0x2f87b0){_0x2f87b0['isActive']=!0x1;const _0x4e61f1=this[_0x4da2('0x30')](_0x2f87b0);_0x4e61f1&&_0x3d6640&&(_0x4e61f1[_0x4da2('0x23')]=!0x1);}if(_0x50990e){const _0x51b48a=this['getSidebarItemView'](_0x50990e);_0x51b48a&&(_0x50990e['isActive']=!0x0,_0x3d6640&&(_0x51b48a['isAnimationDisabled']=!0x0,_0x51b48a['top']+=0x1),this[_0x4da2('0x22')](_0x51b48a));}}[_0x4da2('0x3b')](_0x21eef4){if(this[_0x4da2('0x14')](),this[_0x4da2('0x2')][_0x4da2('0x3e')]['remove'](),_0x21eef4)for(const _0x2d1ed9 of _0x21eef4)this[_0x4da2('0x15')](_0x2d1ed9);this[_0x4da2('0x2')][_0x4da2('0x27')][_0x4da2('0x31')](),this[_0x4da2('0x2')][_0x4da2('0x3d')]='',this[_0x4da2('0x9')]=null;}[_0x4da2('0x1')](_0x25dfba,_0x173986){_0x173986||(_0x173986=_0x25dfba['view']);const _0x1a723b=new _0x246641(this['context'][_0x4da2('0x3')]);this[_0x4da2('0x7')][_0x4da2('0x41')](_0x1a723b,_0x25dfba),this[_0x4da2('0x5')][_0x4da2('0x41')](_0x25dfba,_0x1a723b),_0x1a723b[_0x4da2('0x1f')][_0x4da2('0x33')](_0x173986),this[_0x4da2('0x18')](_0x25dfba[_0x4da2('0x2')],'change:targetRect',(_0x305f70,_0x5d72e5,_0x3ac050)=>{const _0x3035d8=this[_0x4da2('0x11')](_0x25dfba,_0x3ac050);_0x1a723b[_0x4da2('0x13')]!=_0x3035d8&&(_0x1a723b[_0x4da2('0x13')]=_0x3035d8,this['_setItemTop'](_0x1a723b,_0x3035d8));}),this[_0x4da2('0x18')](_0x1a723b,'change:top',()=>{this['_recalculate'](_0x1a723b,'top');}),this['listenTo'](_0x1a723b,_0x4da2('0x39'),()=>{this[_0x4da2('0x2a')](_0x1a723b,'bottom');}),this[_0x4da2('0x22')](_0x1a723b);const _0x5c8e46=this[_0x4da2('0xe')](_0x1a723b);if(_0x5c8e46)this['_alignAfterItem'](_0x5c8e46,_0x1a723b)||this[_0x4da2('0x22')](_0x1a723b);else this[_0x4da2('0x22')](_0x1a723b);return this['_updateLastItem'](),this['view'][_0x4da2('0x27')]['add'](_0x1a723b),_0x1a723b;}['_alignForTopChange'](_0x32b854){if(!_0x32b854[_0x4da2('0x1f')][_0x4da2('0x21')])return;const _0x43b73e=this['_getItemBefore'](_0x32b854);if(!_0x43b73e)return;const _0x538874=this[_0x4da2('0x7')]['get'](_0x43b73e),_0x1bb818=this[_0x4da2('0x32')];_0x1bb818&&_0x1bb818===_0x538874?this['_alignAfterItem'](_0x43b73e,_0x32b854):this['_alignBeforeItem'](_0x32b854,_0x43b73e);}[_0x4da2('0x8')](_0x3b69bf){if(!_0x3b69bf['content'][_0x4da2('0x21')])return;const _0x3c91d2=this['_getItemAfter'](_0x3b69bf);if(!_0x3c91d2)return;const _0x27adaf=this[_0x4da2('0x7')][_0x4da2('0x20')](_0x3c91d2),_0xad26f3=this['context'][_0x4da2('0x40')][_0x4da2('0x20')](_0x4da2('0x26')),_0xd93d2b=this[_0x4da2('0x32')];_0xd93d2b&&_0xd93d2b===_0x27adaf&&_0xad26f3?(this['_alignBeforeItem'](_0x3c91d2,_0x3b69bf),this[_0x4da2('0x19')](_0x3b69bf,_0x3c91d2)):_0xd93d2b&&_0xd93d2b===_0x27adaf?this[_0x4da2('0xb')](_0x3c91d2,_0x3b69bf):this[_0x4da2('0x19')](_0x3b69bf,_0x3c91d2);}['_recalculate'](_0x3dfa10,_0x3f214b){0x0===this[_0x4da2('0x35')][_0x4da2('0x21')]&&setTimeout(()=>{for(const {sidebarItemView:_0x1cf76e,changedProp:_0xae8a00}of this[_0x4da2('0x35')])'top'===_0xae8a00?this['_alignForTopChange'](_0x1cf76e):this[_0x4da2('0x8')](_0x1cf76e);this[_0x4da2('0x35')]=[];},0xa),this[_0x4da2('0x35')][_0x4da2('0xc')]({'sidebarItemView':_0x3dfa10,'changedProp':_0x3f214b});}[_0x4da2('0x30')](_0x5ca43b){return this[_0x4da2('0x5')][_0x4da2('0x20')](_0x5ca43b);}[_0x4da2('0x1a')](){this[_0x4da2('0x2')][_0x4da2('0x1a')]();}[_0x4da2('0x15')](_0x56e060){const _0x452e8d=this['getSidebarItemView'](_0x56e060);this['stopListening'](_0x452e8d),this[_0x4da2('0x14')](_0x56e060[_0x4da2('0x2')]),_0x452e8d[_0x4da2('0x1a')](),this[_0x4da2('0x5')]['delete'](_0x56e060),this['_sidebarItemViewToAnnotation']['delete'](_0x452e8d);}['_createSidebarView'](){const _0x37b1c1=new _0x56c3cb(this['context'][_0x4da2('0x3')]);return _0x37b1c1[_0x4da2('0x1b')](),this['on'](_0x4da2('0x38'),(_0x222b0f,_0x114151,_0x4b0747,_0x5bc73d)=>{_0x5bc73d&&_0x37b1c1[_0x4da2('0x37')](_0x4da2('0x28')),_0x4b0747?_0x37b1c1[_0x4da2('0x12')]('minHeight')['to'](_0x4b0747,_0x4da2('0x4')):_0x37b1c1['minHeight']=null;}),_0x37b1c1;}[_0x4da2('0x0')](){var _0x486a4f;this[_0x4da2('0x9')]=(null===(_0x486a4f=this[_0x4da2('0x25')])||void 0x0===_0x486a4f?void 0x0:_0x486a4f[_0x4da2('0x34')])?this[_0x4da2('0x30')](this[_0x4da2('0x25')]['last']):null;}[_0x4da2('0xe')](_0x959c86){var _0x15ea6d;const _0x37ccf8=this[_0x4da2('0x7')][_0x4da2('0x20')](_0x959c86),_0x2a921c=_0x37ccf8&&(null===(_0x15ea6d=this[_0x4da2('0x25')])||void 0x0===_0x15ea6d?void 0x0:_0x15ea6d[_0x4da2('0x20')](this[_0x4da2('0x25')]['getIndex'](_0x37ccf8)-0x1));return _0x2a921c&&this[_0x4da2('0x30')](_0x2a921c)||null;}[_0x4da2('0x29')](_0x37ceba){var _0x5a5ee4;const _0x32d048=this[_0x4da2('0x7')]['get'](_0x37ceba),_0x457de9=_0x32d048&&(null===(_0x5a5ee4=this[_0x4da2('0x25')])||void 0x0===_0x5a5ee4?void 0x0:_0x5a5ee4[_0x4da2('0x20')](this[_0x4da2('0x25')][_0x4da2('0x2d')](_0x32d048)+0x1));return _0x457de9&&this[_0x4da2('0x30')](_0x457de9)||null;}[_0x4da2('0xb')](_0x150e83,_0x1e2d84){_0x150e83[_0x4da2('0x2e')]();const _0x5164d8=H(_0x1e2d84['bottom']+this[_0x4da2('0x17')],_0x150e83[_0x4da2('0x2b')]);return!!_0x5164d8&&(this[_0x4da2('0x36')](_0x1e2d84,_0x1e2d84[_0x4da2('0x2b')]-_0x5164d8),!0x0);}['_alignAfterItem'](_0x490733,_0x486cc5){_0x490733[_0x4da2('0x2e')]();const _0x46bf45=H(_0x490733[_0x4da2('0x4')]+this['_spaceBetweenItems'],_0x486cc5['top']);return!!_0x46bf45&&(this[_0x4da2('0x36')](_0x486cc5,_0x486cc5[_0x4da2('0x2b')]+_0x46bf45,!0x1),!0x0);}['_alignToTargetRect'](_0x4211af){const _0x579da6=this[_0x4da2('0x7')][_0x4da2('0x20')](_0x4211af);if(!_0x579da6||!_0x579da6[_0x4da2('0x2c')]||!_0x579da6[_0x4da2('0xd')])return;const _0x3beecf=this['_getTargetTop'](_0x579da6,_0x579da6[_0x4da2('0xd')]);this[_0x4da2('0x36')](_0x4211af,_0x3beecf);}[_0x4da2('0x11')](_0x3d034c,_0x5c7875){if(null===_0x5c7875)return 0x0;if(_0x3d034c['target']instanceof _0x542b48)return _0x5c7875['top'];{const _0x3f66ee=new _0x542b48(this[_0x4da2('0x2')][_0x4da2('0x3e')])[_0x4da2('0x2b')];return _0x5c7875[_0x4da2('0x2b')]-_0x3f66ee;}}[_0x4da2('0x36')](_0x213275,_0x99bca6,_0x4776e9=this['context']['config'][_0x4da2('0x20')](_0x4da2('0x26'))){_0x4776e9&&(_0x99bca6=Math['max'](_0x99bca6,this['_getMaxAvailableTop'](_0x213275))),_0x213275['top']=_0x99bca6;}[_0x4da2('0x3f')](_0x1d7c01){let _0x56038e=this[_0x4da2('0xe')](_0x1d7c01),_0x742c6b=0x0;for(;_0x56038e;)_0x56038e[_0x4da2('0x2e')](),_0x742c6b+=this[_0x4da2('0x17')]+_0x56038e['height'],_0x56038e=this[_0x4da2('0xe')](_0x56038e);return _0x742c6b;}}function H(_0xd15b86,_0x1ef334){return Math[_0x4da2('0x6')](_0xd15b86-_0x1ef334,0x0);}function y(_0x4a545a){return null!==_0x4a545a&&_0x4da2('0xf')==typeof _0x4a545a&&0x1===_0x4a545a[_0x4da2('0x24')];}