/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x48cc=['has','_focusTracker','targetRect','left','getByView','focusTracker','_getOrderInContent','destroy','stopListening','set','annotationcollection-not-existing-item','isFocused','sort','view','innerView','_viewToAnnotation','get','refreshPositioning','getIndex','getByInnerView','_innerViewToAnnotation','_sort','remove','updateTargetRect','fire','focus','length','focusableElements','annotationcollection-duplicated-item','listenTo','delete','add','change:isFocused','blur','clear','top'];(function(_0x144151,_0x48ccd9){const _0x2376ac=function(_0x1d243){while(--_0x1d243){_0x144151['push'](_0x144151['shift']());}};_0x2376ac(++_0x48ccd9);}(_0x48cc,0xb9));const _0x2376=function(_0x144151,_0x48ccd9){_0x144151=_0x144151-0x0;let _0x2376ac=_0x48cc[_0x144151];return _0x2376ac;};import{CKEditorError as _0x21730f,Collection as _0x3ba87c,FocusTracker as _0x4c0830}from'ckeditor5/src/utils';export default class x extends _0x3ba87c{constructor(_0x3062cf=[]){super(),this[_0x2376('0xf')]=new Map(),this[_0x2376('0xa')]=new Map(),this['_focusTracker']=new _0x4c0830(),this[_0x2376('0x20')]['on'](_0x2376('0x1b'),(_0x50901f,_0x194fac,_0x31fce8)=>{_0x31fce8||this[_0x2376('0x13')](_0x2376('0x1c'));});for(const _0x27becc of _0x3062cf)this['add'](_0x27becc);}get[_0x2376('0x6')](){return this['_focusTracker']['isFocused'];}['add'](_0x575b92){if(this[_0x2376('0x1f')](_0x575b92))throw new _0x21730f(_0x2376('0x17'),null);this['_innerViewToAnnotation'][_0x2376('0x4')](_0x575b92[_0x2376('0x9')],_0x575b92),this['_viewToAnnotation'][_0x2376('0x4')](_0x575b92[_0x2376('0x8')],_0x575b92);for(const _0x2e1263 of _0x575b92[_0x2376('0x16')])this[_0x2376('0x20')]['add'](_0x2e1263);this[_0x2376('0x18')](_0x575b92[_0x2376('0x16')],'add',(_0x3ba8b7,_0x3d1311)=>{this['_focusTracker'][_0x2376('0x1a')](_0x3d1311);}),this[_0x2376('0x18')](_0x575b92[_0x2376('0x16')],'remove',(_0x472c37,_0x1356e0)=>{this[_0x2376('0x20')][_0x2376('0x11')](_0x1356e0);}),this[_0x2376('0x18')](_0x575b92[_0x2376('0x8')][_0x2376('0x0')],_0x2376('0x1b'),(_0x40c8b6,_0x4a7a44,_0x59cf1a)=>{_0x59cf1a&&this[_0x2376('0x13')](_0x2376('0x14'),_0x575b92);}),_0x575b92[_0x2376('0x12')]();const _0x200375=this[_0x2376('0x1')](_0x575b92['view'][_0x2376('0x21')]);return super['add'](_0x575b92,_0x200375);}['remove'](_0x439836){if(!this['has'](_0x439836))throw new _0x21730f(_0x2376('0x5'),null);this[_0x2376('0x3')](_0x439836['view'][_0x2376('0x0')]),this[_0x2376('0x3')](_0x439836[_0x2376('0x16')]);for(const _0x5788af of _0x439836[_0x2376('0x16')])this['_focusTracker'][_0x2376('0x11')](_0x5788af);return this[_0x2376('0xa')]['delete'](_0x439836['view']),this['_innerViewToAnnotation'][_0x2376('0x19')](_0x439836[_0x2376('0x9')]),super[_0x2376('0x11')](_0x439836);}[_0x2376('0xe')](_0x465f49){return this[_0x2376('0xf')][_0x2376('0xb')](_0x465f49);}[_0x2376('0x23')](_0x106461){return this['_viewToAnnotation'][_0x2376('0xb')](_0x106461);}[_0x2376('0x2')](){super[_0x2376('0x1d')](),this[_0x2376('0x3')](),this[_0x2376('0xf')][_0x2376('0x1d')](),this[_0x2376('0xa')]['clear'](),this[_0x2376('0x20')]['destroy']();}[_0x2376('0xc')](){for(const _0x1ff460 of this)_0x1ff460[_0x2376('0x12')]();this[_0x2376('0x10')]();}[_0x2376('0x10')](){const _0x52f229=Array['from'](this)[_0x2376('0x7')]((_0x199db1,_0x21086f)=>v(_0x199db1[_0x2376('0x8')][_0x2376('0x21')],_0x21086f[_0x2376('0x8')][_0x2376('0x21')]));for(let _0xb7a95c=_0x52f229[_0x2376('0x15')]-0x1;_0xb7a95c>0x0;_0xb7a95c--){const _0x11b168=_0x52f229[_0xb7a95c];_0xb7a95c!==this[_0x2376('0xd')](_0x11b168)&&(this[_0x2376('0x11')](_0x11b168),this['add'](_0x11b168));}}[_0x2376('0x1')](_0x4f5e56){let _0x506bda=0x0;if(!_0x4f5e56)return this[_0x2376('0x15')];for(const _0x463af9 of this){const _0x242995=_0x463af9[_0x2376('0x8')]['targetRect'];if(_0x242995){if(v(_0x4f5e56,_0x242995)<0x0)return _0x506bda;_0x506bda++;}}return _0x506bda;}}export function bindAnnotationCollections({source:_0xe01a8b,target:_0x2a86e2,filter:_0x27d4cf}){for(const _0x28d8be of _0xe01a8b)_0x27d4cf(_0x28d8be)&&_0x2a86e2[_0x2376('0x1a')](_0x28d8be);_0x2a86e2['listenTo'](_0xe01a8b,'add',(_0x176308,_0x16798f)=>{_0x27d4cf(_0x16798f)&&_0x2a86e2[_0x2376('0x1a')](_0x16798f);}),_0x2a86e2[_0x2376('0x18')](_0xe01a8b,_0x2376('0x11'),(_0xcf3a4e,_0x3a0161)=>{_0x2a86e2[_0x2376('0x1f')](_0x3a0161)&&_0x2a86e2[_0x2376('0x11')](_0x3a0161);});}function v(_0x594d23,_0x523837){if(null===_0x594d23&&null===_0x523837)return 0x0;if(null===_0x594d23)return-0x1;if(null===_0x523837)return 0x1;const _0x32c446=_0x594d23[_0x2376('0x1e')]-_0x523837[_0x2376('0x1e')];return 0x0==_0x32c446?_0x594d23[_0x2376('0x22')]-_0x523837[_0x2376('0x22')]:_0x32c446;}