/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3142=['stopListening','isVisible','delete','change:isVisible','_addActiveAnnotation','createAnnotationView','deactivateAll','fire','refreshPositioning','Annotations','pluginName','activeAnnotations','view','focusTracker','remove','add','collection','getByInnerView','_activateAnnotation','element','createAnnotation','_removeActiveAnnotation','refreshVisibility','destroy','has','set','_visibleAnnotations','listenTo'];(function(_0x1a0a67,_0x3142d3){const _0x5c2212=function(_0x2f5f3c){while(--_0x2f5f3c){_0x1a0a67['push'](_0x1a0a67['shift']());}};_0x5c2212(++_0x3142d3);}(_0x3142,0xd1));const _0x5c22=function(_0x1a0a67,_0x3142d3){_0x1a0a67=_0x1a0a67-0x0;let _0x5c2212=_0x3142[_0x1a0a67];return _0x5c2212;};import{ContextPlugin as _0x4c3737}from'ckeditor5/src/core';import _0xa23163 from'./annotation';import _0x2df044 from'./annotationcollection';import _0x4650ef from'./view/annotationview';export default class b extends _0x4c3737{static get[_0x5c22('0x19')](){return _0x5c22('0x18');}constructor(_0x54190d){super(_0x54190d),this[_0x5c22('0x3')]=new _0x2df044(),this[_0x5c22('0xd')]=new _0x2df044(),this[_0x5c22('0xc')](_0x5c22('0x1a'),new Set()),this['_bindAnnotationsToVisibleAnnotations']();}[_0x5c22('0x2')](_0x4ba66d){this[_0x5c22('0x3')][_0x5c22('0x2')](_0x4ba66d);}[_0x5c22('0x1')](_0x3b546d){this[_0x5c22('0x3')]['remove'](_0x3b546d),_0x3b546d['destroy']();}['refreshVisibility'](){for(const _0x3b85b5 of this[_0x5c22('0x3')])_0x3b85b5[_0x5c22('0x9')]();}[_0x5c22('0x17')](){this[_0x5c22('0xd')]['refreshPositioning']();}[_0x5c22('0x4')](_0x4c3026){return this['collection']['getByInnerView'](_0x4c3026);}[_0x5c22('0x15')](){this[_0x5c22('0x16')]('_deactivateAllAnnotations');}['destroy'](){for(const _0x4f3bff of this[_0x5c22('0x3')])_0x4f3bff[_0x5c22('0xa')]();this['_visibleAnnotations'][_0x5c22('0xa')](),this[_0x5c22('0x3')]['destroy'](),super['destroy']();}['activate'](_0x325c70){this['fire'](_0x5c22('0x5'),_0x325c70);}[_0x5c22('0x7')](_0xdd0975){return new _0xa23163(_0xdd0975);}[_0x5c22('0x14')](_0x518383,_0x3057e1){return new _0x4650ef(_0x518383,_0x3057e1);}[_0x5c22('0x13')](_0x41b105){const _0xc09824=new Set(this[_0x5c22('0x1a')]);_0xc09824['add'](_0x41b105),this[_0x5c22('0x1a')]=_0xc09824;}[_0x5c22('0x8')](_0x475a99){const _0x10ba7a=new Set(this['activeAnnotations']);_0x10ba7a[_0x5c22('0x11')](_0x475a99),this[_0x5c22('0x1a')]=_0x10ba7a;}['_bindAnnotationsToVisibleAnnotations'](){const _0x277e54=this[_0x5c22('0x3')],_0x23a6e2=this[_0x5c22('0xd')];function _0x4572f7(_0x4df1c1){const _0x4ff195=_0x4df1c1['source'];_0x4ff195[_0x5c22('0x10')]&&!_0x23a6e2[_0x5c22('0xb')](_0x4ff195)?_0x23a6e2[_0x5c22('0x2')](_0x4ff195):!_0x4ff195[_0x5c22('0x10')]&&_0x23a6e2[_0x5c22('0xb')](_0x4ff195)&&_0x23a6e2[_0x5c22('0x1')](_0x4ff195),_0x4ff195[_0x5c22('0x1b')][_0x5c22('0x0')][_0x5c22('0x1')](_0x4ff195[_0x5c22('0x1b')][_0x5c22('0x6')]),_0x4ff195[_0x5c22('0x1b')][_0x5c22('0x0')][_0x5c22('0x2')](_0x4ff195[_0x5c22('0x1b')][_0x5c22('0x6')]);}this[_0x5c22('0xe')](_0x277e54,_0x5c22('0x2'),(_0x688fb3,_0x372c64)=>{_0x372c64['isVisible']&&_0x23a6e2[_0x5c22('0x2')](_0x372c64),this[_0x5c22('0xe')](_0x372c64,_0x5c22('0x12'),_0x4572f7);}),this[_0x5c22('0xe')](_0x277e54,_0x5c22('0x1'),(_0x1923cc,_0x7e83d4)=>{_0x23a6e2[_0x5c22('0xb')](_0x7e83d4)&&_0x23a6e2[_0x5c22('0x1')](_0x7e83d4),this[_0x5c22('0xf')](_0x7e83d4,'change:isVisible',_0x4572f7);});}}