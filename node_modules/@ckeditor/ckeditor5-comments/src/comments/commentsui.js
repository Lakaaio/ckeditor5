/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0xbae8=['CommentsUI','getRange','execute','editing','plugins','_threadToController','comment','pluginName','model','hasMarkerForId','innerView','isFocused','push','low','add','CommentsListView','tooltip','icon','_viewToController','map','addComment','addCommentThread','_createUIButton','change:activeAnnotations','editor','highest','CommentThreadInputView','comment:','isEnabled','length','from','removeCommentThread','view','addSourceCollector','commands','locale','stop','listenTo','activeMarker','get','Comment','focus'];(function(_0x33d747,_0xbae865){const _0x253454=function(_0x5732e6){while(--_0x5732e6){_0x33d747['push'](_0x33d747['shift']());}};_0x253454(++_0xbae865);}(_0xbae8,0x13d));const _0x2534=function(_0x33d747,_0xbae865){_0x33d747=_0x33d747-0x0;let _0x253454=_0xbae8[_0x33d747];return _0x253454;};import{Plugin as _0x341271}from'ckeditor5/src/core';import _0x5a70c0 from'./commentsrepository';import _0x4bed03 from'./commentsediting';import _0x4bf8d8 from'../annotations/editorannotations';import{ButtonView as _0x4326f7}from'ckeditor5/src/ui';import _0x2950d0 from'../../theme/icons/add-comment.svg';import _0x2f7107 from'../annotations/annotations';import _0x4319a1 from'./ui/view/commentslistview';import _0x497a01 from'./ui/view/commentthreadinputview';import{getTranslation as _0x2572b3}from'../utils/common-translations';export default class e extends _0x341271{static get[_0x2534('0x1a')](){return _0x2534('0x13');}static get['requires'](){return[_0x5a70c0,_0x4bed03,_0x4bf8d8,_0x2f7107];}get[_0x2534('0x22')](){return _0x4319a1;}get[_0x2534('0x3')](){return _0x497a01;}['init'](){const _0x13f8ac=this[_0x2534('0x1')],_0x43e42f=_0x13f8ac[_0x2534('0x17')][_0x2534('0x10')](_0x5a70c0),_0x4733e8=_0x13f8ac['plugins'][_0x2534('0x10')](_0x4bed03),_0x1d6a07=_0x13f8ac[_0x2534('0x17')][_0x2534('0x10')](_0x2f7107),_0x70706a=_0x13f8ac[_0x2534('0x17')]['get'](_0x4bf8d8);_0x13f8ac['ui']['componentFactory'][_0x2534('0x21')](_0x2534('0x19'),()=>this[_0x2534('0x29')]()),_0x70706a[_0x2534('0xa')](()=>{const _0x8cc5d3=[];for(const [_0xac5723,_0x255737]of _0x43e42f[_0x2534('0x18')]){const _0x3cd8fd=_0x4733e8['getAllMarkersForId'](_0xac5723['id']),_0x27f8fa=_0x3cd8fd[_0x2534('0x26')](_0x1dde2b=>_0x1dde2b[_0x2534('0x14')]());_0x3cd8fd[_0x2534('0x6')]>0x0&&_0x8cc5d3[_0x2534('0x1f')]([_0x255737['view'],_0x27f8fa]);}return _0x8cc5d3;}),this['listenTo'](_0x1d6a07,_0x2534('0x0'),(_0x3bffcd,_0x116214,_0x1f1799)=>{const _0x452803=Array[_0x2534('0x7')](_0x1f1799)['map'](_0x3b8075=>_0x3b8075[_0x2534('0x1d')])['find'](_0x11f72c=>_0x43e42f[_0x2534('0x25')]['has'](_0x11f72c));if(!_0x452803)return void(_0x4733e8[_0x2534('0xf')]=null);const _0x4fe90c=_0x43e42f[_0x2534('0x25')][_0x2534('0x10')](_0x452803)[_0x2534('0x1b')]['id'],_0x1eb497=_0x2534('0x4')+_0x4fe90c;_0x4fe90c&&_0x4733e8[_0x2534('0x1c')](_0x4fe90c)?_0x4733e8[_0x2534('0xf')]=_0x1eb497:_0x4733e8[_0x2534('0xf')]&&(_0x4733e8[_0x2534('0xf')]=null);}),this['listenTo'](_0x43e42f,_0x2534('0x8'),(_0x27b678,{threadId:_0xbaf695,isFromAdapter:_0x119161})=>{!_0x119161&&_0x13f8ac['ui']['focusTracker'][_0x2534('0x1e')]&&_0x4733e8['hasMarkerForId'](_0xbaf695)&&_0x13f8ac['editing'][_0x2534('0x9')][_0x2534('0x12')]();},{'priority':_0x2534('0x2')}),this[_0x2534('0xe')](_0x43e42f,_0x2534('0x27'),(_0x1a46ad,{threadId:_0x1029ab,isFromAdapter:_0x3cfd65})=>{if(_0x3cfd65||!_0x4733e8[_0x2534('0x1c')](_0x1029ab)||!_0x43e42f['hasCommentThread'](_0x1029ab))return;0x1===_0x43e42f['getCommentThread'](_0x1029ab)[_0x2534('0x6')]&&(_0x13f8ac[_0x2534('0x16')][_0x2534('0x9')][_0x2534('0x12')](),_0x1a46ad[_0x2534('0xd')]());},{'priority':_0x2534('0x20')});}[_0x2534('0x29')](){const _0x11b977=this[_0x2534('0x1')],_0x4f6e04=new _0x4326f7(_0x11b977['locale']),_0x73e6e0=_0x11b977[_0x2534('0xb')][_0x2534('0x10')](_0x2534('0x28'));return _0x4f6e04['label']=_0x2572b3(_0x11b977[_0x2534('0xc')],_0x2534('0x11')),_0x4f6e04[_0x2534('0x23')]=_0x2572b3(_0x11b977[_0x2534('0xc')],_0x2534('0x11')),_0x4f6e04[_0x2534('0x24')]=_0x2950d0,_0x4f6e04['bind'](_0x2534('0x5'))['to'](_0x73e6e0),this[_0x2534('0xe')](_0x4f6e04,_0x2534('0x15'),()=>_0x73e6e0[_0x2534('0x15')]()),_0x4f6e04;}}