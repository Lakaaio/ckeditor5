/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x222d=['resolveCommentThread','reopenCommentThread','resolvedAt','getCommentThread','init','remove','has','removeCommentThread','pluginName','_calculatePosition','plugins','add','CommentsArchive','listenTo','context','resolvedThreads','findIndex','get','addCommentThread','highest'];(function(_0x243112,_0x222da9){const _0x1f728e=function(_0x3ac324){while(--_0x3ac324){_0x243112['push'](_0x243112['shift']());}};_0x1f728e(++_0x222da9);}(_0x222d,0xfc));const _0x1f72=function(_0x243112,_0x222da9){_0x243112=_0x243112-0x0;let _0x1f728e=_0x222d[_0x243112];return _0x1f728e;};import{ContextPlugin as _0x19e4f1}from'ckeditor5/src/core';import{Collection as _0x4027f6}from'ckeditor5/src/utils';import _0x5814d9 from'./commentsrepository';import _0xcae30d from'../annotations/annotations';export default class p extends _0x19e4f1{static get[_0x1f72('0x10')](){return _0x1f72('0x0');}static get['requires'](){return[_0x5814d9,_0xcae30d];}constructor(_0x4deb8b){super(_0x4deb8b),this[_0x1f72('0x3')]=new _0x4027f6();}[_0x1f72('0xc')](){const _0x4e26e7=this[_0x1f72('0x2')],_0x17088c=_0x4e26e7[_0x1f72('0x12')][_0x1f72('0x5')](_0x5814d9),_0x102cd8=_0x4e26e7[_0x1f72('0x12')][_0x1f72('0x5')](_0xcae30d);this[_0x1f72('0x1')](_0x17088c,_0x1f72('0x6'),(_0x32a478,{threadId:_0x207e81,resolvedAt:_0x373275,deletedAt:_0x5ba706})=>{if(_0x373275&&!_0x5ba706){const _0x347d7e=_0x17088c['getCommentThread'](_0x207e81);this[_0x1f72('0x3')][_0x1f72('0x13')](_0x347d7e,this[_0x1f72('0x11')](_0x373275));}}),this[_0x1f72('0x1')](_0x17088c,_0x1f72('0x8'),(_0x362a00,{threadId:_0x499a4d,resolvedAt:_0x2c2cff})=>{const _0x2418be=_0x17088c[_0x1f72('0xb')](_0x499a4d);this[_0x1f72('0x3')][_0x1f72('0x13')](_0x2418be,this[_0x1f72('0x11')](_0x2c2cff));},{'priority':_0x1f72('0x7')}),this[_0x1f72('0x1')](_0x17088c,_0x1f72('0x9'),(_0x182255,{threadId:_0x58095c})=>{const _0xf6745e=_0x17088c[_0x1f72('0xb')](_0x58095c);this['resolvedThreads'][_0x1f72('0xe')](_0xf6745e)&&this[_0x1f72('0x3')][_0x1f72('0xd')](_0xf6745e);},{'priority':'highest'}),this[_0x1f72('0x1')](_0x17088c,_0x1f72('0xf'),(_0x3e644f,{threadId:_0x4b11f3})=>{const _0xf9c41c=_0x17088c[_0x1f72('0xb')](_0x4b11f3);this['resolvedThreads'][_0x1f72('0xe')](_0xf9c41c)&&this[_0x1f72('0x3')]['remove'](_0xf9c41c);},{'priority':_0x1f72('0x7')}),this[_0x1f72('0x1')](_0x102cd8['collection'],'focus',(_0x102305,_0x4b07b3)=>{_0x4b07b3['isActive']=!0x0,_0x102cd8['activate'](_0x4b07b3);});}[_0x1f72('0x11')](_0x3a435d){const _0x36798a=[...this[_0x1f72('0x3')]][_0x1f72('0x4')](_0x65d1af=>_0x65d1af[_0x1f72('0xa')]<_0x3a435d);return _0x36798a>-0x1?_0x36798a:this[_0x1f72('0x3')]['length'];}}