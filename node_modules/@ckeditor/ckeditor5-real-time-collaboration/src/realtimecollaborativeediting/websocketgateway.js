/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1278=['offline','isInReconnectionStack','connected','has','_reconnectionStack','constructor','limitExceeded','_isBrowserOffline','showWarning','code','The\x20limit\x20of\x20maximum\x20concurrent\x20connections\x20that\x20the\x20collaboration\x20server\x20can\x20handle\x20has\x20been\x20reached.\x20Try\x20opening\x20the\x20document\x20again\x20in\x20a\x20few\x20minutes.\x20Please\x20contact\x20your\x20system\x20administrator\x20if\x20the\x20problem\x20persists.','_domEmitter','then','get','Connected\x20users\x20limit\x20exceeded','websocketgateway-invalid-plugin-interface','_shouldPluginsReconnect','removeFromReconnectionStack','websocketgateway-missing-token','config','disconnect','state','reconnect','delete','_reconnect','pluginName','catch','set','CloudServices','websocketgateway-missing-websocket-url','function','WebSocketGateway','CONNECTING','webSocketUrl','connect','plugins','DISCONNECTED','real-time-collaboration','add','error','define','addToReconnectionStack','destroy','from','cloudServices.requestTimeout','context','cloudServices.connectionTimeout','cloudservices-init','CONNECTED','token','init','requires','create','connection','change:me','websocketgateway-plugin-already-registered','all','listenTo'];(function(_0x318060,_0x127807){const _0x45fd64=function(_0x35de3f){while(--_0x35de3f){_0x318060['push'](_0x318060['shift']());}};_0x45fd64(++_0x127807);}(_0x1278,0x134));const _0x45fd=function(_0x318060,_0x127807){_0x318060=_0x318060-0x0;let _0x45fd64=_0x1278[_0x318060];return _0x45fd64;};import{ContextPlugin as _0x5af502}from'ckeditor5/src/core';import{DomEmitterMixin as _0x52b999,CKEditorError as _0x1181f4}from'ckeditor5/src/utils';import _0x207c64,{WEB_SOCKET_GATEWAY_STATES as _0x3b45ad}from'@ckeditor/ckeditor-cloud-services-collaboration/src/websocketgateway/websocketgateway';import{Notification as _0x232390}from'ckeditor5/src/ui';export default class c extends _0x5af502{static get[_0x45fd('0x21')](){return[_0x45fd('0xa'),_0x232390];}static get[_0x45fd('0x7')](){return _0x45fd('0xd');}constructor(_0x29b06d){super(_0x29b06d),this[_0x45fd('0x9')]('state',_0x3b45ad[_0x45fd('0x1e')]),this['set'](_0x45fd('0x2f'),!0x1),this[_0x45fd('0x2c')]=new Set(),this['_shouldPluginsReconnect']=!0x1,this[_0x45fd('0x33')]=Object[_0x45fd('0x22')](_0x52b999);}[_0x45fd('0x20')](){const _0x5920b2=this[_0x45fd('0x1b')],_0x34a9c7=_0x5920b2[_0x45fd('0x11')][_0x45fd('0x35')](_0x45fd('0xa')),_0x3e52bd=_0x5920b2[_0x45fd('0x11')]['get'](_0x232390);if(!_0x34a9c7[_0x45fd('0x1f')])throw new _0x1181f4(_0x45fd('0x0'),this);if(!_0x34a9c7[_0x45fd('0xf')])throw new _0x1181f4(_0x45fd('0xb'),this);return this['_domEmitter'][_0x45fd('0x27')](window,_0x45fd('0x28'),()=>this['_isBrowserOffline']=!0x0),this[_0x45fd('0x33')][_0x45fd('0x27')](window,'online',()=>this[_0x45fd('0x2f')]=!0x1),this[_0x45fd('0x1b')][_0x45fd('0x1')][_0x45fd('0x16')](_0x45fd('0x1c'),0xa),this['context'][_0x45fd('0x1')][_0x45fd('0x16')](_0x45fd('0x1a'),0x14),c[_0x45fd('0xd')][_0x45fd('0x10')](_0x34a9c7[_0x45fd('0x1f')],_0x34a9c7['webSocketUrl'],{'timeout':0x3e8*this[_0x45fd('0x1b')]['config'][_0x45fd('0x35')]('cloudServices.connectionTimeout'),'requestTimeout':0x3e8*this['context'][_0x45fd('0x1')][_0x45fd('0x35')]('cloudServices.requestTimeout')})['then'](_0x839751=>{if(this[_0x45fd('0x23')]=_0x839751,this['bind'](_0x45fd('0x3'))['to'](_0x839751,_0x45fd('0x3'),this,_0x45fd('0x2f'),(_0x32f6c6,_0x2155b3)=>(_0x45fd('0x2a')!==_0x32f6c6&&(this[_0x45fd('0x38')]=!0x0),_0x2155b3||_0x32f6c6!==_0x3b45ad[_0x45fd('0x1e')]?_0x3b45ad['DISCONNECTED']:this[_0x45fd('0x3')]==_0x3b45ad[_0x45fd('0x12')]&&this[_0x45fd('0x38')]?(this[_0x45fd('0x38')]=!0x1,this['_reconnect'](),_0x3b45ad[_0x45fd('0xe')]):_0x3b45ad[_0x45fd('0x1e')])),this['connection']['on'](_0x45fd('0x15'),(_0x2003cc,_0x245c6f)=>{if(_0x45fd('0x2e')!==_0x245c6f[_0x45fd('0x31')])throw console[_0x45fd('0x15')](_0x245c6f),new _0x1181f4(_0x45fd('0x1d'),null,{'originalError':_0x245c6f});_0x3e52bd[_0x45fd('0x30')](_0x45fd('0x32'),{'title':_0x45fd('0x36'),'namespace':_0x45fd('0x13')});}),!_0x839751['me'])return new Promise(_0x111738=>_0x839751['on'](_0x45fd('0x24'),_0x111738));})['catch'](_0x9a9301=>{throw console[_0x45fd('0x15')](_0x9a9301),new _0x1181f4('cloudservices-init',null,{'originalError':_0x9a9301});});}[_0x45fd('0x17')](_0x4ef062){if(_0x45fd('0xc')!=typeof _0x4ef062[_0x45fd('0x4')])throw new _0x1181f4(_0x45fd('0x37'),this);if(this[_0x45fd('0x29')](_0x4ef062))throw new _0x1181f4(_0x45fd('0x25'),this,{'name':_0x4ef062[_0x45fd('0x2d')][_0x45fd('0x7')]});this['_reconnectionStack'][_0x45fd('0x14')](_0x4ef062);}[_0x45fd('0x39')](_0x114de1){this[_0x45fd('0x2c')][_0x45fd('0x5')](_0x114de1);}['isInReconnectionStack'](_0x44f1c3){return this[_0x45fd('0x2c')][_0x45fd('0x2b')](_0x44f1c3);}[_0x45fd('0x6')](){return this[_0x45fd('0x23')]['reconnect']()[_0x45fd('0x34')](()=>Promise[_0x45fd('0x26')](Array[_0x45fd('0x19')](this['_reconnectionStack'],_0x4da2bd=>_0x4da2bd[_0x45fd('0x4')]())))[_0x45fd('0x34')](()=>this[_0x45fd('0x3')]=_0x3b45ad[_0x45fd('0x1e')])[_0x45fd('0x8')](_0x27b3f0=>{throw console[_0x45fd('0x15')](_0x27b3f0),new _0x1181f4('cloudservices-reconnection-error',this['context']);});}[_0x45fd('0x18')](){this['connection']&&this[_0x45fd('0x23')][_0x45fd('0x2')](),this[_0x45fd('0x3')]=_0x3b45ad[_0x45fd('0x12')],this[_0x45fd('0x33')]['stopListening'](),super[_0x45fd('0x18')]();}}c[_0x45fd('0xd')]=_0x207c64,c['initialReconnectionInterval']=0x3e8;