/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2901=['detachRoot','_isEditingAllowed','_offset','_isConnected','rootName','_hasSynchronizationProblem','createUserMarkerOperations','realtimecollaborationclient-initservice-internal-error','sendOperations','_setPendingAction','fromJSON','409','_bufferedOperations','startsWith','type','model','sessionId','collaboration.channelId','markers','_lastSyncedOperationId','_handleReconnectionError','add','init','_baseBufferDelay','stop','permissions','_knownOperations','reset','initData','directChange','remove','multi-root-editor-root-attributes-no-root','CollaborativeEditingService','InsertOperation','__className','createRange','Permissions','baseVersion','_handleExternalOperations','isAttached','The\x20document\x20cannot\x20be\x20connected\x20back\x20to\x20the\x20server.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.','size','rootsAttributes','disconnect','_handleServerResponse','data','code','setIdForTheLastOperation','end','_refreshUserSelectionMarkers','realtimecollaborationclient-sendbufferedoperations','lastOperationAcceptedAt','operationsReceived','404','_sendBufferedOperationsDelayId','cloudServices.bundleVersion','cloud-services-internal-error:\x20Request\x20timeout.','disableReadOnlyMode','bind','The\x20document\x20details\x20could\x20not\x20be\x20taken\x20during\x20the\x20reconnection.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.','_hasSelectionChanged','isReadOnly','Synchronization\x20issue','_isPendingUpdate','wasUndone','_crash','start','_fetchMissingUsers','_disconnectService','set','lastSyncVersion','entries','addOperation','_handleReceivedOperations','addToReconnectionStack','rtc-destroyed','_setUpDataInit','realtimecollaborationclient-init-session-connection-error','lastOperationId','push','destroy','_getOperationsFromInitData','locale','getMany','position','_ignoredOperations','_pendingAction','setPermissions','listenTo','catch','toJSON','document','_compressor','_isAttached','register','_authorId','plugins','pluginName','requires','lastDocumentSession','_isDisconnection','has','_handleInitialConnectionData','fire','cloud-services-internal-error:\x20Collaborative\x20Editing\x20Service\x20is\x20not\x20connected.','connection','addRoot','isUndoneOperation','stopListening','_handleSendingSelectionMarkers','channelSessions','addUser','realtimecollaborationclient-init-document-already-initialized','enableReadOnlyMode','currentDocumentSession','sessionAdd:','_initSessionsHandling','string','batch','keys','bufferOperation','CommentsOnly','applyOperation','createdAt','includes','getIdOfTheLastOperation','_clearPendingAction','createPositionFromPath','editor','_channelId','rtc-offline','isDocumentOperation','connect','forEach','unregister','collaboration','getConnectedSessions','_handleReconnectionResponse','_currentBufferDelay','_isInit','config','The\x20last\x20saved\x20version\x20of\x20the\x20document\x20does\x20not\x20match\x20the\x20local\x20version.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.','message','cloudDocumentVersion','disconnected','_compressOperations','history','_disconnectionOperations','getRoot','_decompressOperations','getReversed','parse','getDocumentDetails','offset','collaboration-missing-channelid','_shouldSendUpdate','_operationToId','length','_shouldSendSelectionUpdate','change:hasDomSelection','_service','get','reconnection:\x20flushed\x20session','metadata','_connectAfterSessionHasBeenFlushed','reconnect','wereChangesApplied','connected','_saveOperationInBuffer','_lastServerVersion','filter','_connectService','Notification','showWarning','realtimecollaborationclient-init-non-existent-root','serverHistory','_document','PENDING_ACTION_SENDING_DATA','slice','_sendBufferedOperationsDelayed','then','roots','realtimecollaborationclient-handleserverresponse','high','error','_updateServerHistory','document:write','state','real-time-collaboration','marker','differ','path','getUser','userId','realtimecollaborationclient-editor-setdata-and-editor-data-set-are-forbidden-in-real-time-collaboration','return','change:_isEditingAllowed','map','getOperations','_applyOperationsSet','_initThrowingOnDataSet','version','realtimecollaborationclient-init-connection-failed','_operationIdentifier','_sendBufferedOperations'];(function(_0x3e945c,_0x290130){const _0x348b12=function(_0x426d67){while(--_0x426d67){_0x3e945c['push'](_0x3e945c['shift']());}};_0x348b12(++_0x290130);}(_0x2901,0x16b));const _0x348b=function(_0x3e945c,_0x290130){_0x3e945c=_0x3e945c-0x0;let _0x348b12=_0x2901[_0x3e945c];return _0x348b12;};import{Plugin as _0x2b6c9c,PendingActions as _0x1e2e02}from'ckeditor5/src/core';import{CKEditorError as _0x4a45d4,version as _0x5bcbd2,uid as _0x5bb914}from'ckeditor5/src/utils';import{Notification as _0x3492a4}from'ckeditor5/src/ui';import{transformSets as _0x260d89,InsertOperation as _0x143c8c,MarkerOperation as _0x443056,RootAttributeOperation as _0x463a09,RootOperation as _0x1e1738,OperationFactory as _0x10ee49,History as _0x2f4267}from'ckeditor5/src/engine';import _0x104a09 from'./websocketgateway';import _0x1f013b from'./sessions';import _0x147629 from'./usermarkers';import{getTranslation as _0xa6cf0}from'../common-translations';import _0x48d204 from'@ckeditor/ckeditor5-operations-compressor/src/compressor';import{Users as _0x20d889}from'ckeditor5-collaboration/src/collaboration-core';import _0x589681 from'@ckeditor/ckeditor-cloud-services-collaboration/src/collaborativeeditingservice/collaborativeeditingservice';import _0x5f12c5 from'@ckeditor/ckeditor-cloud-services-collaboration/src/users/user';let $=0x1;export default class l extends _0x2b6c9c{static get[_0x348b('0x91')](){return[_0x104a09,_0x1f013b,_0x147629,_0x1e2e02,_0x20d889,_0x3492a4];}static get[_0x348b('0x90')](){return'RealTimeCollaborationClient';}get[_0x348b('0xbe')](){return this[_0x348b('0xb')]+this[_0x348b('0x31')];}get[_0x348b('0xb')](){return this[_0x348b('0x11')][_0x348b('0x2b')]-this[_0x348b('0x31')];}get['lastSyncVersion'](){const _0x200fc9=this[_0x348b('0x11')][_0x348b('0x28')]();for(let _0x35f0fb=_0x200fc9[_0x348b('0xcc')]-0x1;_0x35f0fb>=0x0;_0x35f0fb--){const _0xbe72b4=_0x200fc9[_0x35f0fb];if(!this['_disconnectionOperations'][_0x348b('0x94')](_0xbe72b4))return _0xbe72b4[_0x348b('0x54')]+0x1-this[_0x348b('0x31')];}return 0x0;}constructor(_0x29daf4){if(super(_0x29daf4),this[_0x348b('0x31')]=0x0,this['sessionId']=null,this[_0x348b('0x11')]=new _0x2f4267(),this['editor'][_0x348b('0xbb')]['define'](_0x348b('0xb6'),{}),this[_0x348b('0xb0')]=this[_0x348b('0xaf')][_0x348b('0xbb')][_0x348b('0x3')](_0x348b('0x40')),!this[_0x348b('0xb0')])throw new _0x4a45d4(_0x348b('0xc9'),this);const _0x539122=_0x29daf4[_0x348b('0xbb')]['get'](_0x348b('0x66'))||_0x5bcbd2;this[_0x348b('0x2')]=new l[(_0x348b('0x4f'))](_0x539122,this[_0x348b('0xb0')]),this[_0x348b('0x12')]=this[_0x348b('0xaf')][_0x348b('0x3e')][_0x348b('0x8a')],this[_0x348b('0x8b')]=new _0x48d204(),this[_0x348b('0x3b')]=[],this[_0x348b('0x49')]=new WeakSet(),this[_0x348b('0x74')]('_isPendingUpdate',!0x1),this[_0x348b('0x74')](_0x348b('0x34'),!0x1),this[_0x348b('0x85')]=null,this[_0x348b('0x6b')]=!0x1,this[_0x348b('0x65')]=null,this['_baseBufferDelay']=0x12c,this['_currentBufferDelay']=this['_baseBufferDelay'],this[_0x348b('0x42')]=null,this[_0x348b('0xc2')]=new WeakSet(),this[_0x348b('0x2d')]=new Q(this[_0x348b('0xc2')]);}[_0x348b('0x45')](){const _0xd9eede=this['editor'],_0x2979a9=_0xd9eede['plugins']['get'](_0x20d889),_0x54c4fd=_0xd9eede[_0x348b('0x8f')][_0x348b('0x3')](_0x104a09);this['listenTo'](_0x2979a9,'getOperationAuthor',(_0x39e82e,_0x2a8db7)=>{const _0x50dc5a=_0x2a8db7[0x0];_0x50dc5a[_0x348b('0x8e')]&&(_0x39e82e[_0x348b('0x25')]=_0x2979a9[_0x348b('0x22')](_0x50dc5a[_0x348b('0x8e')]),_0x39e82e[_0x348b('0x47')]()),null===_0x50dc5a[_0x348b('0x8e')]&&(_0x39e82e[_0x348b('0x25')]=null,_0x39e82e['stop']());},{'priority':_0x348b('0x19')}),this[_0x348b('0x87')](_0xd9eede[_0x348b('0x3e')][_0x348b('0x8a')]['selection'],'change:range',(_0x59dec8,_0x367319)=>{_0x367319[_0x348b('0x4c')]&&this[_0x348b('0x60')]();}),this[_0x348b('0x87')](_0xd9eede['editing']['view'],_0x348b('0x1'),()=>{this[_0x348b('0x60')]();}),this['_initThrowingOnDataSet'](),_0xd9eede['model']['on'](_0x348b('0xa9'),(_0x13fe4e,_0x41c67c)=>{const _0x540510=_0x41c67c[0x0];_0x540510[_0x348b('0xb2')]&&(this[_0x348b('0xa')](_0x540510),this[_0x348b('0xca')]()&&this[_0x348b('0x15')]());}),this['_setUpDataInit'](),this['bind'](_0x348b('0x30'))['to'](_0x54c4fd,_0x348b('0x1d'),this,_0x348b('0x34'),(_0x3a3338,_0x4d733a)=>_0x348b('0x9')===_0x3a3338&&!_0x4d733a),this['on'](_0x348b('0x26'),()=>{this['_isEditingAllowed']?_0xd9eede[_0x348b('0x68')]('rtc-offline'):_0xd9eede['enableReadOnlyMode'](_0x348b('0xb1'));}),this[_0x348b('0x30')]?_0xd9eede['disableReadOnlyMode']('rtc-offline'):_0xd9eede[_0x348b('0xa0')]('rtc-offline'),this['set'](_0x348b('0x32'),!0x1);}async['reconnect'](){const _0x6dbd07=this[_0x348b('0xaf')]['plugins'][_0x348b('0x3')](_0x1f013b),_0x187b57=this['editor'][_0x348b('0x8f')]['get'](_0x104a09);try{this['_isPendingUpdate']=!0x0,_0x6dbd07[_0x348b('0xb5')](this[_0x348b('0xb0')]);const _0x160d49=await this[_0x348b('0x2')]['reconnect'](_0x187b57[_0x348b('0x98')],this[_0x348b('0x75')]);await this[_0x348b('0xb8')](_0x160d49)&&(this[_0x348b('0x6e')]=!0x1,this[_0x348b('0xad')]());const _0x1c31e7=await this[_0x348b('0x2')][_0x348b('0xb7')]();_0x6dbd07[_0x348b('0x8d')](this[_0x348b('0xb0')],_0x1c31e7),this[_0x348b('0x9c')](),this[_0x348b('0x32')]=!0x0;}catch(_0x373a74){if(function(_0x363244){return _0x348b('0x64')===_0x363244[_0x348b('0x5d')];}(_0x373a74)&&this[_0x348b('0x3f')])await this[_0x348b('0x6')]();else{if(function(_0x587f91){return _0x348b('0x3a')===_0x587f91[_0x348b('0x5d')];}(_0x373a74)){const _0x2fde34=_0xa6cf0(this[_0x348b('0xaf')][_0x348b('0x81')],_0x348b('0x57'));this[_0x348b('0x43')](_0x2fde34);}else{if(!(_0x373a74 instanceof J))throw _0x373a74;this[_0x348b('0x43')]();}}}}[_0x348b('0x7f')](){const _0x1ed844=this[_0x348b('0xaf')][_0x348b('0x8f')]['get'](_0x104a09),_0x35d7d9=this[_0x348b('0xaf')][_0x348b('0x8f')][_0x348b('0x3')](_0x1f013b);this[_0x348b('0xaf')][_0x348b('0xa0')](_0x348b('0x7a')),_0x35d7d9[_0x348b('0x9d')][_0x348b('0x94')](this[_0x348b('0xb0')])&&_0x35d7d9['unregister'](this[_0x348b('0xb0')]),_0x1ed844['removeFromReconnectionStack'](this),this[_0x348b('0x73')](),super[_0x348b('0x7f')]();}async[_0x348b('0xb8')](_0x45f710){if(this[_0x348b('0x3f')]!==_0x45f710[_0x348b('0x3f')]&&this[_0x348b('0x42')]!==_0x45f710['lastOperationId'])throw new J();return this[_0x348b('0x3f')]=_0x45f710[_0x348b('0x3f')],this[_0x348b('0x5b')]([],{..._0x45f710,'wereChangesApplied':!0x1,'data':_0x45f710[_0x348b('0x5c')]},_0x348b('0x7'));}async[_0x348b('0xd')](_0x552aa7,_0x588bcd=!0x1){const {connection:_0x384def}=this[_0x348b('0xaf')]['plugins'][_0x348b('0x3')](_0x104a09);l[_0x348b('0x4f')][_0x348b('0xb7')](_0x384def,this['_channelId'])['then'](_0x4fafa8=>this[_0x348b('0xa3')](_0x4fafa8))[_0x348b('0x88')](_0x787b80=>{this[_0x348b('0x70')](_0x348b('0x7c'),_0x787b80);}),this['listenTo'](this[_0x348b('0x2')],_0x348b('0x63'),this[_0x348b('0x78')][_0x348b('0x69')](this)),this['listenTo'](this[_0x348b('0x2')],_0x348b('0x1a'),(_0x153e5c,_0x3fc4e9)=>{this['_crash'](_0x348b('0x36'),_0x3fc4e9);}),this[_0x348b('0x87')](this[_0x348b('0x2')],_0x348b('0xbf'),()=>{this[_0x348b('0x32')]=!0x1;});const _0x48d6be=this['_operationIdentifier'][_0x348b('0xac')](_0x552aa7),_0x2b2bd3=await this['_service'][_0x348b('0xb3')](_0x384def,this[_0x348b('0xc0')](_0x552aa7),_0x48d6be);if(this[_0x348b('0x3f')]=_0x2b2bd3[_0x348b('0x3f')],_0x2b2bd3[_0x348b('0x8')]&&(this[_0x348b('0x6e')]=!0x1,this['_clearPendingAction']()),_0x588bcd){if(!_0x2b2bd3['wereChangesApplied'])return void this['_handleReconnectionError']();this[_0x348b('0x11')][_0x348b('0x4a')](),this[_0x348b('0x31')]=_0x2b2bd3[_0x348b('0xc8')],this[_0x348b('0x11')][_0x348b('0x2b')]=this[_0x348b('0x31')],await this['_handleServerResponse'](_0x552aa7,_0x2b2bd3,_0x348b('0x4'));}else await this[_0x348b('0x95')](_0x2b2bd3,_0x552aa7);this['_handleSendingSelectionMarkers'](),this[_0x348b('0x32')]=!0x0;}[_0x348b('0x9c')](){const _0x4450d8=this[_0x348b('0xaf')]['plugins'][_0x348b('0x3')](_0x1f013b),_0x57aa33=this['editor'][_0x348b('0x8f')][_0x348b('0x3')](_0x147629),_0x15e491=_0x4450d8[_0x348b('0x9d')][_0x348b('0x3')](this[_0x348b('0xb0')]);_0x15e491&&_0x15e491[_0x348b('0xcc')]>0x1?_0x57aa33['createUserMarkerOperations']():this[_0x348b('0x87')](_0x4450d8,_0x348b('0xa2')+this[_0x348b('0xb0')],()=>{0x2===_0x4450d8[_0x348b('0x9d')][_0x348b('0x3')](this['_channelId'])[_0x348b('0xcc')]&&_0x57aa33[_0x348b('0x35')]();});}async[_0x348b('0x78')](_0x1df1e3,_0x53b3a4,_0x465185,_0x452cb8){if(!this[_0x348b('0x6e')]&&this[_0x348b('0x12')][_0x348b('0x2b')]==_0x53b3a4){const _0x358979=this[_0x348b('0xc4')](_0x465185,_0x452cb8);await this['_fetchMissingUsers'](_0x358979),this[_0x348b('0x55')](_0x358979,_0x53b3a4,_0x465185[_0x348b('0x7d')])||this['_crash']('realtimecollaborationclient-initservice-incorrect-server-operation');}}async['_connectAfterSessionHasBeenFlushed'](){this[_0x348b('0x73')]();const {locale:_0x385f67}=this[_0x348b('0xaf')];let _0x1e73c8;try{_0x1e73c8=await this[_0x348b('0x2')][_0x348b('0xc7')]();}catch(_0xfd4aa9){const _0x72a959=_0xa6cf0(_0x385f67,_0x348b('0x6a'));return void this['_handleReconnectionError'](_0x72a959);}const _0x29b815=_0x1e73c8[_0x348b('0xa1')]||_0x1e73c8[_0x348b('0x92')];if(this[_0x348b('0x42')]===_0x29b815[_0x348b('0x7d')])await this['_connectService'](this[_0x348b('0xaf')][_0x348b('0x3e')][_0x348b('0x8a')][_0x348b('0xc1')]['getOperations'](),!0x0);else{const _0xcbe01f=_0xa6cf0(_0x385f67,_0x348b('0xbc'));this[_0x348b('0x43')](_0xcbe01f);}}[_0x348b('0x73')](){this['_service'][_0x348b('0x5a')](),this['_bufferedOperations']=[],clearTimeout(this['_sendBufferedOperationsDelayId']),this[_0x348b('0x9b')](this[_0x348b('0x2')]);}[_0x348b('0xa3')](_0x5bb49c){const _0x5bcabb=this[_0x348b('0xaf')][_0x348b('0x8f')][_0x348b('0x3')](_0x1f013b);this['listenTo'](_0x5bcabb,_0x348b('0xa2')+this[_0x348b('0xb0')],(_0x1ceeb7,{session:_0x3c52db})=>{if(_0x3c52db['id']===_0x5bcabb['mySessionId']){_0x1ceeb7['off']();const _0x23e220=this['editor'][_0x348b('0x8f')][_0x348b('0x94')]('CommentsOnly')&&this[_0x348b('0xaf')][_0x348b('0x8f')][_0x348b('0x3')](_0x348b('0xa8'));let _0x5a0d5d=_0x3c52db[_0x348b('0x48')];_0x23e220&&_0x23e220['isEnabled']&&(_0x5a0d5d=_0x5a0d5d[_0x348b('0xc')](_0x572c04=>_0x348b('0x1c')!==_0x572c04)),this[_0x348b('0xaf')][_0x348b('0x8f')][_0x348b('0x3')](_0x348b('0x53'))[_0x348b('0x86')](_0x5a0d5d,this[_0x348b('0xb0')]);}}),_0x5bcabb[_0x348b('0x8d')](this['_channelId'],_0x5bb49c);}[_0x348b('0x2a')](){const _0x3ef9f7=this['editor'][_0x348b('0x5c')][_0x348b('0x74')];this[_0x348b('0xaf')][_0x348b('0x5c')][_0x348b('0x74')]=(..._0x597b75)=>{if(!_0x597b75[_0x597b75[_0x348b('0xcc')]-0x1]['suppressErrorInCollaboration'])throw new _0x4a45d4(_0x348b('0x24'),this);_0x3ef9f7['apply'](this['editor'][_0x348b('0x5c')],_0x597b75);};}[_0x348b('0x7b')](){this[_0x348b('0xaf')][_0x348b('0x5c')]['on']('init',(_0x2c1eef,[_0x386d44])=>{if(this[_0x348b('0x12')][_0x348b('0x2b')])throw new _0x4a45d4(_0x348b('0x9f'),this);_0x2c1eef[_0x348b('0x47')](),this[_0x348b('0x38')]();const _0x3a83e1=this[_0x348b('0xaf')][_0x348b('0xbb')]['get'](_0x348b('0x59')),_0x230c95=this[_0x348b('0x80')](_0x386d44,_0x3a83e1);_0x2c1eef[_0x348b('0x25')]=this[_0x348b('0xd')](_0x230c95)[_0x348b('0x16')](()=>{this[_0x348b('0xaf')]['plugins']['get'](_0x104a09)[_0x348b('0x79')](this),this[_0x348b('0xaf')]['data'][_0x348b('0x96')]('ready');})[_0x348b('0x88')](_0x463e7f=>this[_0x348b('0x70')](_0x348b('0x2c'),_0x463e7f))['finally'](()=>this['_clearPendingAction']());},{'priority':_0x348b('0x19')});}async[_0x348b('0x72')](_0x4f60d3){const _0xdc891e=this[_0x348b('0xaf')][_0x348b('0x8f')][_0x348b('0x3')](_0x20d889),{connection:_0x3c51f0}=this[_0x348b('0xaf')][_0x348b('0x8f')][_0x348b('0x3')](_0x104a09),_0x4df033=new Set();for(const _0x3df60c of _0x4f60d3){const _0x9825f=_0x3df60c['_authorId'];_0x9825f&&!_0xdc891e[_0x348b('0x22')](_0x9825f)&&_0x4df033[_0x348b('0x44')](_0x9825f);}if(0x0===_0x4df033[_0x348b('0x58')])return;const _0x55e3d5=await _0x5f12c5[_0x348b('0x82')](_0x3c51f0,Array['from'](_0x4df033));for(const _0x1451d0 of _0x55e3d5)_0xdc891e[_0x348b('0x22')](_0x1451d0['id'])||_0xdc891e[_0x348b('0x9e')](_0x1451d0);}['_getOperationsFromInitData'](_0x13481d,_0x3b0190={}){const _0x5dbdfe=this['editor'][_0x348b('0x3e')],_0x1f48b2=[];let _0x1297b9=0x0;const _0x3fbc32=_0x348b('0xa4')==typeof _0x13481d?{'main':_0x13481d}:_0x13481d;for(const _0x3beb21 of Object[_0x348b('0xa6')](_0x3fbc32)){if(!this[_0x348b('0x12')][_0x348b('0x17')]['has'](_0x3beb21))throw new _0x4a45d4(_0x348b('0x10'),this);const _0x44f7ff=this['editor']['data'][_0x348b('0xc6')](_0x3fbc32[_0x3beb21]),_0x1b9dce=this[_0x348b('0x12')][_0x348b('0xc3')](_0x3beb21),_0x2bbdcf=new _0x143c8c(_0x5dbdfe['createPositionAt'](_0x1b9dce,0x0),_0x44f7ff,_0x1297b9++);_0x1f48b2['push'](_0x2bbdcf);for(const [_0x14110d,_0x20513f]of _0x44f7ff[_0x348b('0x41')]){const _0x34a9a8=_0x5dbdfe[_0x348b('0x52')](_0x5dbdfe[_0x348b('0xae')](_0x1b9dce,_0x20513f[_0x348b('0x71')][_0x348b('0x21')]['slice']()),_0x5dbdfe[_0x348b('0xae')](_0x1b9dce,_0x20513f[_0x348b('0x5f')][_0x348b('0x21')][_0x348b('0x14')]())),_0x2bdab0=new _0x443056(_0x14110d,null,_0x34a9a8,_0x5dbdfe['markers'],!0x0,_0x1297b9++);_0x1f48b2['push'](_0x2bdab0);}}if(_0x3b0190)for(const [_0x41450a,_0x257fc5]of Object[_0x348b('0x76')](_0x3b0190)){const _0x43fd26=_0x5dbdfe['document']['getRoot'](_0x41450a);if(!_0x43fd26)throw new _0x4a45d4(_0x348b('0x4e'),null);for(const [_0x541640,_0x33717e]of Object['entries'](_0x257fc5))if(null!==_0x33717e){const _0x1f8157=new _0x463a09(_0x43fd26,_0x541640,null,_0x33717e,_0x1297b9++);_0x1f48b2[_0x348b('0x7e')](_0x1f8157);}}return _0x1f48b2;}async['_handleInitialConnectionData'](_0x899c,_0xcf3d47){let _0x1ecc42;this[_0x348b('0x31')]=_0x899c[_0x348b('0xc8')];const _0xa2d15c=_0x899c[_0x348b('0x8')]&&!_0x899c[_0x348b('0x4b')],_0x4c977a=_0xa2d15c?0x0:_0x899c[_0x348b('0x5c')][_0x348b('0x54')];if(_0xa2d15c)_0x1ecc42=_0xcf3d47,_0x1ecc42[_0x348b('0xb4')](_0x574289=>{_0x574289[_0x348b('0xaa')]=_0x899c['sessionCreatedAt'],_0x574289[_0x348b('0xba')]=!0x0,_0x574289[_0x348b('0x8e')]=null;}),this[_0x348b('0x29')](_0x1ecc42,_0xa2d15c);else{if(_0x899c['initData']){const _0x3fad93=this[_0x348b('0x80')](_0x899c[_0x348b('0x4b')]);this[_0x348b('0x12')][_0x348b('0xc1')]['version']=-_0x3fad93[_0x348b('0xcc')],_0x3fad93[_0x348b('0xb4')](_0x7c2e68=>{_0x7c2e68['baseVersion']-=_0x3fad93[_0x348b('0xcc')],_0x7c2e68[_0x348b('0xaa')]=_0x899c['sessionCreatedAt'],_0x7c2e68[_0x348b('0xba')]=!0x0,_0x7c2e68[_0x348b('0x8e')]=null;}),this[_0x348b('0x29')](_0x3fad93,!0x0),this[_0x348b('0x11')][_0x348b('0x2b')]=-_0x3fad93['length']+this[_0x348b('0x31')],this[_0x348b('0x1b')](_0x3fad93);}this[_0x348b('0x12')][_0x348b('0xc1')][_0x348b('0x2b')]=_0x4c977a,_0x1ecc42=this[_0x348b('0xc4')](_0x899c['data'],_0x899c[_0x348b('0x5')]),await this[_0x348b('0x72')](_0x1ecc42),this[_0x348b('0x29')](_0x1ecc42,_0xa2d15c);}_0x899c['lastOperationId']&&(this['_operationIdentifier'][_0x348b('0x5e')](_0x1ecc42,_0x899c[_0x348b('0x7d')]),this[_0x348b('0x42')]=_0x899c[_0x348b('0x7d')]),this['serverHistory'][_0x348b('0x2b')]=_0x4c977a+this[_0x348b('0x31')],this['_updateServerHistory'](_0x1ecc42);}['_crash'](_0x4af5c4,_0x5bb17f){throw this[_0x348b('0x6e')]=!0x0,_0x5bb17f&&console[_0x348b('0x1a')](_0x5bb17f),new _0x4a45d4(_0x4af5c4,this['editor']);}[_0x348b('0xa')](_0x4009c1){this['_knownOperations']['has'](_0x4009c1)||(this['_knownOperations'][_0x348b('0x44')](_0x4009c1),this[_0x348b('0x3b')]['push'](_0x4009c1),this[_0x348b('0x85')]||_0x348b('0x1f')==_0x4009c1[_0x348b('0x3d')]&&!_0x4009c1['affectsData']||this[_0x348b('0x38')]());}[_0x348b('0x15')](_0x2354a2=!0x1){!_0x2354a2&&this[_0x348b('0x6e')]||(this[_0x348b('0x6e')]=!0x0,clearTimeout(this[_0x348b('0x65')]),this[_0x348b('0x65')]=setTimeout(()=>{this[_0x348b('0x2e')]()[_0x348b('0x16')](_0x4876f1=>{_0x4876f1&&(this[_0x348b('0xad')](),this[_0x348b('0x6e')]=!0x1);})['catch'](_0x2e13f2=>{if(this[_0x348b('0xad')](),this[_0x348b('0x6e')]=!0x1,!function(_0x253fcd){return _0x253fcd[_0x348b('0xbd')][_0x348b('0x3c')]('cloud-services-internal-error:\x20Not\x20connected.')||_0x253fcd[_0x348b('0xbd')]['startsWith'](_0x348b('0x97'))||_0x253fcd['message'][_0x348b('0x3c')](_0x348b('0x67'));}(_0x2e13f2))throw _0x2e13f2;});},this[_0x348b('0xb9')]));}async[_0x348b('0x2e')](){const _0x16164c=this[_0x348b('0xaf')][_0x348b('0x8f')][_0x348b('0x3')](_0x147629);if(this[_0x348b('0x0')]()&&(_0x16164c[_0x348b('0x35')](),this[_0x348b('0x6b')]=!0x1),!this['_shouldSendUpdate']())return!0x0;const _0x48a419=[...this['_bufferedOperations']];for(const _0x14d384 of _0x48a419)_0x14d384[_0x348b('0x6f')]=this[_0x348b('0x12')][_0x348b('0xc1')][_0x348b('0x9a')](_0x14d384);const _0x53bbf1=this[_0x348b('0x2d')][_0x348b('0xac')](_0x48a419),_0x2021cc=$++,_0x3efc9e=this['_compressOperations'](_0x48a419),_0x2704a3=await this[_0x348b('0x2')][_0x348b('0x37')](_0x3efc9e,_0x3efc9e[_0x348b('0x54')],_0x53bbf1);try{return await this['_handleServerResponse'](_0x48a419,_0x2704a3,_0x2021cc);}catch(_0x29cf6a){return this[_0x348b('0x70')](_0x348b('0x61'),_0x29cf6a);}}async[_0x348b('0x5b')](_0x28200a,_0x428f88,_0xc1b855){if('error'in _0x428f88)throw _0x428f88[_0x348b('0x1a')];let _0x15b9d2=!0x1;if(_0x428f88[_0x348b('0x8')]){_0x428f88[_0x348b('0x7d')]&&(this['_lastSyncedOperationId']=_0x428f88[_0x348b('0x7d')]),this[_0x348b('0x3b')]=this['_bufferedOperations'][_0x348b('0xc')](_0x4b6142=>!_0x28200a[_0x348b('0xab')](_0x4b6142));for(const _0x8ea156 of _0x28200a)_0x8ea156[_0x348b('0xaa')]=_0x348b('0x62')in _0x428f88&&_0x428f88[_0x348b('0x62')]||void 0x0;this[_0x348b('0x1b')](_0x28200a),_0x15b9d2=!0x0,this['_currentBufferDelay']=this[_0x348b('0x46')];}else{const _0xffe9f4=this[_0x348b('0xc4')](_0x428f88['data'],_0x428f88[_0x348b('0x5')])[_0x348b('0xc')](_0x9f46c2=>_0x9f46c2[_0x348b('0x54')]>=this['_lastServerVersion']);await this[_0x348b('0x72')](_0xffe9f4),_0x15b9d2=this[_0x348b('0x55')](_0xffe9f4,_0x428f88[_0x348b('0x2b')],_0x428f88['lastOperationId']),this[_0x348b('0xb9')]=Math['round'](this[_0x348b('0xb9')]/0x2);}return _0x15b9d2?!this[_0x348b('0xca')]()||(this[_0x348b('0x15')](!0x0),!0x1):this['_crash'](_0x348b('0x18'));}[_0x348b('0x55')](_0x26a0f5,_0x49786f,_0x96aa69){try{const _0x1b6f2b={'document':this[_0x348b('0x12')],'useRelations':!0x1,'padWithNoOps':!0x0},{operationsA:_0xb92c25,operationsB:_0x3001f4,originalOperations:_0x2a1d9a}=_0x260d89(_0x26a0f5,this[_0x348b('0x3b')],_0x1b6f2b);K(_0xb92c25,this['_document'][_0x348b('0x2b')]),K(_0x3001f4,_0x49786f);for(const _0x1f5fa3 of _0xb92c25){const _0x264889=_0x2a1d9a[_0x348b('0x3')](_0x1f5fa3);_0x1f5fa3[_0x348b('0x8e')]=_0x264889?_0x264889[_0x348b('0x8e')]:null;}_0x96aa69&&(this['_operationIdentifier'][_0x348b('0x5e')](_0x26a0f5,_0x96aa69),this[_0x348b('0x42')]=_0x96aa69),this[_0x348b('0x3b')]=[..._0x3001f4],this[_0x348b('0x29')](_0xb92c25),this['_updateServerHistory'](_0x26a0f5);}catch(_0x2b2b3c){return console[_0x348b('0x1a')](_0x2b2b3c),!0x1;}return!0x0;}[_0x348b('0x29')](_0x5601b2,_0x354cdf=!0x1){this['editor'][_0x348b('0x3e')]['enqueueChange']({'isUndoable':!0x1,'isLocal':!0x1},_0x2eef69=>{for(const _0x558f35 of _0x5601b2)this[_0x348b('0x49')][_0x348b('0x44')](_0x558f35),_0x2eef69[_0x348b('0xa5')][_0x348b('0x77')](_0x558f35),this[_0x348b('0xaf')]['model'][_0x348b('0xa9')](_0x558f35);});}[_0x348b('0x1b')](_0xfa8d41){_0xfa8d41['forEach'](_0x218e8d=>{const _0x4c7b1e=_0x218e8d['clone']();_0x4c7b1e['_authorId']=_0x218e8d['_authorId'],_0x4c7b1e[_0x348b('0xba')]=!!_0x218e8d['_isInit'],_0x4c7b1e[_0x348b('0xaa')]=_0x218e8d[_0x348b('0xaa')],_0x4c7b1e[_0x348b('0x54')]+=this['_offset'],_0x218e8d['_isDisconnection']&&this[_0x348b('0xc2')][_0x348b('0x44')](_0x4c7b1e),this[_0x348b('0x11')]['addOperation'](_0x4c7b1e);});}[_0x348b('0x43')](_0x2db8f8){const _0x135e05=this['editor'][_0x348b('0x8f')][_0x348b('0x3')](_0x348b('0xe')),_0x244c43=this[_0x348b('0xaf')][_0x348b('0x81')];_0x2db8f8||(_0x2db8f8=_0xa6cf0(_0x244c43,'The\x20local\x20document\x20and\x20server\x20document\x20differ\x20and\x20merging\x20them\x20can\x20cause\x20unexpected\x20behavior.\x20To\x20not\x20lose\x20your\x20content\x20save\x20it\x20locally\x20and\x20refresh\x20the\x20editor.')),_0x135e05[_0x348b('0xf')](_0x2db8f8,{'title':_0xa6cf0(_0x244c43,_0x348b('0x6d')),'namespace':_0x348b('0x1e')}),this[_0x348b('0x34')]=!0x0,clearTimeout(this[_0x348b('0x65')]),this['_bufferedOperations']=[],this[_0x348b('0xaf')][_0x348b('0x8f')][_0x348b('0x3')](_0x104a09)[_0x348b('0x7f')]();}[_0x348b('0x38')](){this[_0x348b('0x85')]||(this[_0x348b('0x85')]=this['editor'][_0x348b('0x8f')][_0x348b('0x3')](_0x1e2e02)['add'](_0xa6cf0(this['editor'][_0x348b('0x81')],_0x348b('0x13'))));}['_clearPendingAction'](){this['_pendingAction']&&(this[_0x348b('0xaf')]['plugins']['get'](_0x1e2e02)[_0x348b('0x4d')](this[_0x348b('0x85')]),this[_0x348b('0x85')]=null);}['_compressOperations'](_0xa31f32){const _0x3e3c61=_0xa31f32[_0x348b('0x27')](_0x11f7d1=>_0x11f7d1[_0x348b('0x89')]());return this[_0x348b('0x8b')]['compress'](_0x3e3c61);}['_decompressOperations'](_0x5650a7,_0xa473b1){const _0x72df37=new Set();return this[_0x348b('0x8b')]['decompress'](_0x5650a7)[_0x348b('0x27')]((_0x5b2521,_0x509cbb)=>{const _0x241233='init'==_0xa473b1[_0x509cbb][_0x348b('0x3d')];if(_0x241233&&_0x348b('0x50')==_0x5b2521[_0x348b('0x51')]){const _0x1e3c9d=_0x5b2521[_0x348b('0x83')]['root'];if(!this[_0x348b('0x12')]['getRoot'](_0x1e3c9d)){const _0xea049c=new _0x1e1738(_0x1e3c9d,'$root',!0x0,this[_0x348b('0x12')],null);this[_0x348b('0x12')][_0x348b('0xc3')](_0x1e3c9d)[_0x348b('0x8c')]=!0x0,this[_0x348b('0x12')]['differ'][_0x348b('0xa7')](_0xea049c);}}const _0x10f5c8=_0x10ee49[_0x348b('0x39')](_0x5b2521,this[_0x348b('0x12')]);if(_0x348b('0x2f')==_0x10f5c8[_0x348b('0x3d')])_0x72df37['add'](_0x5b2521[_0x348b('0x33')]);else{if(_0x348b('0x99')==_0x10f5c8[_0x348b('0x3d')]){const _0xc9bf0b=this[_0x348b('0x12')][_0x348b('0xc3')](_0x5b2521['rootName']);_0xc9bf0b&&_0xc9bf0b[_0x348b('0x56')]()&&!_0x72df37[_0x348b('0x94')](_0x5b2521[_0x348b('0x33')])&&(_0xc9bf0b[_0x348b('0x8c')]=!0x1,this[_0x348b('0x12')][_0x348b('0x20')][_0x348b('0xa7')](_0x10f5c8[_0x348b('0xc5')]()));}}return _0x10f5c8[_0x348b('0x6f')]=_0x5b2521['wasUndone'],_0x10f5c8['_isInit']=_0x241233,_0x10f5c8[_0x348b('0x8e')]=_0x241233?null:_0xa473b1[_0x509cbb][_0x348b('0x23')],_0x10f5c8[_0x348b('0x93')]='cs:removeUser'===_0xa473b1[_0x509cbb][_0x348b('0x3d')],_0x10f5c8['createdAt']=_0xa473b1[_0x509cbb][_0x348b('0xaa')],_0x10f5c8;});}['_refreshUserSelectionMarkers'](){this['_hasSelectionChanged']=!0x0,this['_shouldSendSelectionUpdate']()?this[_0x348b('0x15')]():this[_0x348b('0x6b')]=!0x1;}[_0x348b('0x0')](){const _0x59f2f7=this[_0x348b('0xaf')][_0x348b('0x8f')]['get'](_0x1f013b)['channelSessions'][_0x348b('0x3')](this[_0x348b('0xb0')]);return Boolean(!this[_0x348b('0xaf')][_0x348b('0x6c')]&&_0x59f2f7&&_0x59f2f7[_0x348b('0xcc')]>0x1&&this['_hasSelectionChanged']);}['_shouldSendUpdate'](){return this[_0x348b('0x3b')][_0x348b('0xcc')]>0x0||this['_shouldSendSelectionUpdate']();}}l['CollaborativeEditingService']=_0x589681;class J extends Error{}function K(_0x217b9b,_0x2f8936){for(const _0x3f98d8 of _0x217b9b)_0x3f98d8[_0x348b('0x54')]=_0x2f8936++;}class Q{constructor(_0xe18d22){this[_0x348b('0x84')]=_0xe18d22,this[_0x348b('0xcb')]=new WeakMap();}[_0x348b('0xac')](_0x3aea6c){let _0x148c10=_0x3aea6c['length'];for(;_0x148c10--;){const _0x1d24c2=_0x3aea6c[_0x148c10];if(!this['_ignoredOperations'][_0x348b('0x94')](_0x1d24c2)){if(!this['_operationToId'][_0x348b('0x94')](_0x1d24c2)){const _0x4ac981=_0x5bb914()[_0x348b('0x14')](0x1,0x12);this[_0x348b('0xcb')][_0x348b('0x74')](_0x1d24c2,_0x4ac981);}return this[_0x348b('0xcb')][_0x348b('0x3')](_0x1d24c2);}}}[_0x348b('0x5e')](_0x505903,_0x51dd08){if(!_0x51dd08)return;let _0x5ee347=_0x505903[_0x348b('0xcc')];for(;_0x5ee347--;){const _0x184d34=_0x505903[_0x5ee347];this[_0x348b('0x84')][_0x348b('0x94')](_0x184d34)||this[_0x348b('0xcb')][_0x348b('0x74')](_0x184d34,_0x51dd08);}}}