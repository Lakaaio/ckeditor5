/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5730=['isInContent','removeMarker','delete','addRange','head','get','onDiscard','removeAttribute','createdAt','_onAttributesChange','commentThread','reduce','markers','toJSON','substr','_markerNames','onAccept','@external','authoredAt','decorate','onAttributesChange','getMarkerNames','set','suggestion:','author','creator','getRanges','getMarkers','getItems','attributes','discard','setAttribute','nodeAfter','map','getAllAdjacentSuggestions','isExternal','getContainedElement','length','getFirstRange','getFirstMarker','data','push','start','isIntersectingWithRange','getRange','removeMarkers','nodeBefore','accept','add','subType','_model','clear','type','addMarkerName','from','hasComments','_onDiscard','previous','isMultiRange','size','getMultiRangeId','_onAccept'];(function(_0x502d3c,_0x573092){const _0x402ef7=function(_0x4c66ac){while(--_0x4c66ac){_0x502d3c['push'](_0x502d3c['shift']());}};_0x402ef7(++_0x573092);}(_0x5730,0x1b5));const _0x402e=function(_0x502d3c,_0x573092){_0x502d3c=_0x502d3c-0x0;let _0x402ef7=_0x5730[_0x502d3c];return _0x402ef7;};import{Element as _0x14feac}from'ckeditor5/src/engine';import{ObservableMixin as _0x692ce4,uid as _0x1a6781}from'ckeditor5/src/utils';import{cloneDeep as _0x15376d,isEqual as _0xff4964,set as _0x113be0,unset as _0x15db31}from'lodash-es';export default class u extends _0x692ce4(){constructor(_0x32c12a,_0x3ca637){super(),this['id']=_0x3ca637['id'],this[_0x402e('0x31')]=_0x3ca637[_0x402e('0x31')],this[_0x402e('0x2e')]=_0x3ca637[_0x402e('0x2e')]||null,this['author']=_0x3ca637[_0x402e('0x15')],this[_0x402e('0x16')]=_0x3ca637[_0x402e('0x16')]||_0x3ca637[_0x402e('0x15')],this[_0x402e('0x20')]=Boolean(_0x3ca637[_0x402e('0x1a')]&&_0x3ca637[_0x402e('0x1a')][_0x402e('0xe')]),this['data']=null,this[_0x402e('0x2f')]=_0x32c12a,this[_0x402e('0x3a')]=_0x3ca637[_0x402e('0xd')],this[_0x402e('0x35')]=_0x3ca637[_0x402e('0x3')],this[_0x402e('0x6')]=_0x3ca637[_0x402e('0x11')],this[_0x402e('0xc')]=new Set(),this[_0x402e('0x5')]=null,this[_0x402e('0x13')](_0x402e('0xf'),null),this[_0x402e('0x13')](_0x402e('0x1a'),_0x3ca637[_0x402e('0x1a')]||{}),this[_0x402e('0x13')](_0x402e('0x36'),null),this['set']('next',null),this[_0x402e('0x13')](_0x402e('0x7'),null),this[_0x402e('0x13')]('_saved',!0x1),this[_0x402e('0x10')](_0x402e('0x2c')),this[_0x402e('0x10')](_0x402e('0x1b'));}get[_0x402e('0x1')](){let _0x3c9c0b=this;for(;_0x3c9c0b[_0x402e('0x36')];)_0x3c9c0b=_0x3c9c0b[_0x402e('0x36')];return _0x3c9c0b;}get[_0x402e('0x34')](){return!!this[_0x402e('0x7')]&&this[_0x402e('0x7')][_0x402e('0x22')]>0x0;}get[_0x402e('0x37')](){if(0x0==this['_markerNames'][_0x402e('0x38')])return!0x1;return 0x6==Array['from'](this[_0x402e('0xc')])[0x0]['split'](':')[_0x402e('0x22')];}get[_0x402e('0x3b')](){return null!==this[_0x402e('0x24')]();}[_0x402e('0x32')](_0x637801){this[_0x402e('0xc')][_0x402e('0x2d')](_0x637801);}[_0x402e('0x12')](){return Array[_0x402e('0x33')](this[_0x402e('0xc')]);}[_0x402e('0x18')](){return this[_0x402e('0x12')]()['map'](_0x2dc022=>this[_0x402e('0x2f')][_0x402e('0x9')][_0x402e('0x2')](_0x2dc022))['filter'](_0xfd4503=>_0xfd4503);}[_0x402e('0x24')](){return this['getMarkers']()[0x0]||null;}[_0x402e('0x2a')](){this[_0x402e('0x2f')]['change'](_0x218117=>{for(const _0xd6bb54 of this[_0x402e('0x18')]())_0x218117[_0x402e('0x3c')](_0xd6bb54);}),this[_0x402e('0xc')][_0x402e('0x30')]();}['removeMarker'](_0x2413d6){this[_0x402e('0x2f')]['change'](_0x47327d=>{_0x47327d[_0x402e('0x3c')](_0x2413d6);}),this['_markerNames'][_0x402e('0x3d')](_0x2413d6);}[_0x402e('0x0')](_0x124ff9){const _0xafcdf7=_0x402e('0x14')+this['type']+':'+this[_0x402e('0x2e')]+':'+this['id']+':'+this['creator']['id']+':'+u[_0x402e('0x39')]();this[_0x402e('0x32')](_0xafcdf7),this[_0x402e('0x2f')]['change'](_0x565483=>{_0x565483['addMarker'](_0xafcdf7,{'range':_0x124ff9,'usingOperation':!0x0,'affectsData':!0x0});});}[_0x402e('0x28')](_0x1864bd){for(const _0x38fb55 of this[_0x402e('0x17')]())if(_0x38fb55['isIntersecting'](_0x1864bd))return!0x0;return!0x1;}[_0x402e('0x17')](){return this[_0x402e('0x18')]()[_0x402e('0x1e')](_0x436d03=>_0x436d03['getRange']());}[_0x402e('0x19')](){return this[_0x402e('0x17')]()[_0x402e('0x8')]((_0x3b79fa,_0xf92ac)=>[..._0x3b79fa,..._0xf92ac[_0x402e('0x19')]()],[]);}[_0x402e('0x23')](){var _0x519cc0;return(null===(_0x519cc0=this['getFirstMarker']())||void 0x0===_0x519cc0?void 0x0:_0x519cc0[_0x402e('0x29')]())||null;}[_0x402e('0x21')](){const _0x186f76=this[_0x402e('0x17')]();if(0x1!=_0x186f76[_0x402e('0x22')])return null;const _0x448c1b=_0x186f76[0x0],_0x518a88=_0x448c1b[_0x402e('0x27')][_0x402e('0x1d')],_0x174773=_0x448c1b['end'][_0x402e('0x2b')];return _0x518a88 instanceof _0x14feac?_0x518a88!=_0x174773?null:_0x518a88:null;}[_0x402e('0x2c')](){this[_0x402e('0x3a')](this[_0x402e('0x17')](),this[_0x402e('0x25')],this[_0x402e('0x1a')]),this[_0x402e('0x2a')]();}['discard'](){this[_0x402e('0x35')](this['getRanges'](),this[_0x402e('0x25')],this[_0x402e('0x1a')]),this[_0x402e('0x2a')]();}[_0x402e('0x1f')](){const _0x3988ce=[];let _0x4bed89=this[_0x402e('0x1')];for(;_0x4bed89;)_0x3988ce[_0x402e('0x26')](_0x4bed89),_0x4bed89=_0x4bed89['next'];return _0x3988ce;}[_0x402e('0x1c')](_0x3c4b99,_0x32a009){const _0x50502c=_0x15376d(this[_0x402e('0x1a')]);_0x113be0(_0x50502c,_0x3c4b99,_0x32a009),_0xff4964(_0x50502c,this['attributes'])||(this['attributes']=_0x50502c,this['_onAttributesChange'](_0x50502c));}[_0x402e('0x4')](_0x4dd5bd){const _0xf9273f=_0x15376d(this[_0x402e('0x1a')]);_0x15db31(_0xf9273f,_0x4dd5bd),_0xff4964(_0xf9273f,this['attributes'])||(this['attributes']=_0xf9273f,this['_onAttributesChange'](this[_0x402e('0x1a')]));}[_0x402e('0xa')](){return{'id':this['id'],'type':this[_0x402e('0x2e')]?this[_0x402e('0x31')]+':'+this['subType']:this[_0x402e('0x31')],'authorId':this[_0x402e('0x16')]['id'],'createdAt':this[_0x402e('0x5')],'hasComments':this[_0x402e('0x34')],'data':this['data'],'attributes':this[_0x402e('0x1a')]};}static['getMultiRangeId'](){return _0x1a6781()[_0x402e('0xb')](0x1,0x5);}}