/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0xd8f5=['nodes','_decompressSingleOperation','value','from','_splitCurrent','_context','_compareOperations','compress','_compressSingleOperation','data','__className','wasUndone','attributes','InsertOperation','keys','every','position','_checkOperation','_compareAttributes','next','substr','length'];(function(_0x184235,_0xd8f541){const _0x41ef80=function(_0x12d18a){while(--_0x12d18a){_0x184235['push'](_0x184235['shift']());}};_0x41ef80(++_0xd8f541);}(_0xd8f5,0xc9));const _0x41ef=function(_0x184235,_0xd8f541){_0x184235=_0x184235-0x0;let _0x41ef80=_0xd8f5[_0x184235];return _0x41ef80;};import _0x570ec7 from'./actioncompressor';import{arePositionsEqual as _0x25ff90,getPositionShiftedBy as _0x26c347}from'../utils';import{cloneDeep as _0x264ee7}from'lodash-es';export default class m extends _0x570ec7{['_combineNext'](_0x1ec451,_0x4e1a24){return _0x4e1a24[_0x41ef('0x13')][0x0][_0x41ef('0x6')]+=_0x1ec451[_0x41ef('0x13')][0x0]['data'],_0x4e1a24;}[_0x41ef('0x1')](_0x1c450a){const _0x37d716=_0x264ee7(_0x1c450a),_0x1753a1=_0x37d716[_0x41ef('0x13')][0x0],_0xa5a032=_0x1c450a[_0x41ef('0x13')][0x0],_0x216110=_0xa5a032['data'][Symbol['iterator']]()[_0x41ef('0x10')]()[_0x41ef('0x15')],_0x2d754d=_0x216110[_0x41ef('0x12')];return _0x1753a1[_0x41ef('0x6')]=_0x216110,_0xa5a032['data']=_0xa5a032[_0x41ef('0x6')][_0x41ef('0x11')](_0x2d754d),_0x1c450a[_0x41ef('0xd')]=_0x26c347(_0x1c450a[_0x41ef('0xd')],_0x2d754d),_0x37d716;}[_0x41ef('0x3')](_0x2e0ec5,_0x53374b){if(this[_0x41ef('0xe')](_0x2e0ec5)&&this[_0x41ef('0xe')](_0x53374b)){const _0x1f32e2=_0x2e0ec5[_0x41ef('0x13')][0x0]['data']['length'],_0x51f6c9=_0x25ff90(_0x26c347(_0x2e0ec5[_0x41ef('0xd')],_0x1f32e2),_0x53374b[_0x41ef('0xd')]),_0x373572=_0x2e0ec5[_0x41ef('0x13')][0x0],_0x315db7=_0x53374b[_0x41ef('0x13')][0x0];return _0x51f6c9&&this[_0x41ef('0xf')](_0x373572,_0x315db7);}return!0x1;}[_0x41ef('0x5')](_0x1e1c01){const _0x5ebb4d={'types':[],'buffers':[],'baseVersion':0x0};return this['_context']['_getCompressorByName'](_0x41ef('0xa'))[_0x41ef('0x4')](_0x5ebb4d,[_0x1e1c01]),_0x5ebb4d['buffers'][0x0];}[_0x41ef('0x14')](_0x28c8cd){const _0x2f536d=[];return this[_0x41ef('0x2')]['_getCompressorByName'](_0x41ef('0xa'))['decompress'](_0x2f536d,_0x28c8cd),_0x2f536d[0x0];}['_checkOperation'](_0x3f3b5c){return _0x41ef('0xa')==_0x3f3b5c[_0x41ef('0x7')]&&0x1==_0x3f3b5c[_0x41ef('0x13')][_0x41ef('0x12')]&&_0x3f3b5c[_0x41ef('0x13')][0x0][_0x41ef('0x6')]&&!_0x3f3b5c[_0x41ef('0x8')]&&0x1==Array[_0x41ef('0x0')](_0x3f3b5c[_0x41ef('0x13')][0x0][_0x41ef('0x6')])[_0x41ef('0x12')];}[_0x41ef('0xf')](_0x13400e,_0x2841e0){const _0x54bc3f=Object[_0x41ef('0xb')](_0x13400e['attributes']||{}),_0x560f02=Object['keys'](_0x2841e0['attributes']||{});return _0x54bc3f[_0x41ef('0x12')]===_0x560f02[_0x41ef('0x12')]&&_0x54bc3f[_0x41ef('0xc')](_0x377383=>_0x2841e0[_0x41ef('0x9')][_0x377383]&&_0x2841e0[_0x41ef('0x9')][_0x377383]===_0x13400e['attributes'][_0x377383]);}}